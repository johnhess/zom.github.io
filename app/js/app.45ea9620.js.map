{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/avatars/av_beta.png","webpack:///./src/assets/avatars/av_badger.png","webpack:///./src/assets/avatars/av_octopus.png","webpack:///./src/assets/avatars/av_squirrel.png","webpack:///./src/assets/avatars/av_jellyfish.png","webpack:///./src/components/messages/ContactChanged.vue?c0cb","webpack:///./src/components/CreateRoom.vue?f36a","webpack:///./src/assets/avatars/av_hedgehog.png","webpack:///./src/assets/avatars/av_tucan.png","webpack:///./src/components/MessageOperationsBottomSheet.vue?6ee0","webpack:///./src/assets/avatars/av_macaw.png","webpack:///./src/assets/avatars/av_puffin.png","webpack:///./src/assets/stickers/order.txt","webpack:///./src/components/RoomList.vue?4dca","webpack:///./src/assets/avatars/av_peacock.png","webpack:///./src/components/VoiceRecorderLock.vue?f556","webpack:///./src/components/roomInfoMixin.js","webpack:///./src/components/messages/ContactJoin.vue?8a83","webpack:///./src/components/messages/RoomTopicChanged.vue?2ccc","webpack:///./src/assets/avatars/av_walrus.png","webpack:///./src/components/messages/MessageIncomingFile.vue?c3f2","webpack:///./src/assets/avatars/av_zebra.png","webpack:///./src/assets/avatars/av_leopard.png","webpack:///./src/assets/avatars/av_pangolin.png","webpack:///./src/components/messages/DebugEvent.vue?3f9c","webpack:///./src/components/Join.vue?f634","webpack:///./src/assets/avatars/av_polar bear.png","webpack:///./src/components/Chat.vue?f183","webpack:///./src/assets/avatars/av_snake.png","webpack:///./src/components/Login.vue?4860","webpack:///./src/assets/avatars/av_eagle.png","webpack:///./src/App.vue?a97f","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?2667","webpack:///./src/plugins/vuetify.js","webpack:///./src/components/Home.vue?40a3","webpack:///./src/components/RoomList.vue?5f9e","webpack:///src/components/RoomList.vue","webpack:///./src/components/RoomList.vue?62a4","webpack:///./src/components/RoomList.vue?f6c5","webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?705d","webpack:///./src/components/Home.vue","webpack:///./src/components/Chat.vue?52dc","webpack:///./src/components/messages/MessageIncomingText.vue?5199","webpack:///./src/components/messages/QuickReactions.vue?b70e","webpack:///src/components/messages/QuickReactions.vue","webpack:///./src/components/messages/QuickReactions.vue?e661","webpack:///./src/components/messages/QuickReactions.vue?fa7e","webpack:///./src/components/messages/messageMixin.js","webpack:///src/components/messages/MessageIncomingText.vue","webpack:///./src/components/messages/MessageIncomingText.vue?06b1","webpack:///./src/components/messages/MessageIncomingText.vue?a064","webpack:///./src/components/messages/MessageIncomingFile.vue?c44f","webpack:///src/components/messages/MessageIncomingFile.vue","webpack:///./src/components/messages/MessageIncomingFile.vue?43a2","webpack:///./src/components/messages/MessageIncomingFile.vue?4c0f","webpack:///./src/components/messages/MessageIncomingImage.vue?3360","webpack:///src/components/messages/MessageIncomingImage.vue","webpack:///./src/components/messages/MessageIncomingImage.vue?fcf9","webpack:///./src/components/messages/MessageIncomingImage.vue?bc40","webpack:///./src/components/messages/MessageIncomingAudio.vue?58d5","webpack:///./src/components/messages/attachmentMixin.js","webpack:///src/components/messages/MessageIncomingAudio.vue","webpack:///./src/components/messages/MessageIncomingAudio.vue?e5a7","webpack:///./src/components/messages/MessageIncomingAudio.vue?ce7f","webpack:///./src/components/messages/MessageIncomingVideo.vue?431f","webpack:///src/components/messages/MessageIncomingVideo.vue","webpack:///./src/components/messages/MessageIncomingVideo.vue?d1e5","webpack:///./src/components/messages/MessageIncomingVideo.vue?0cda","webpack:///./src/components/messages/MessageIncomingSticker.vue?365d","webpack:///./src/plugins/stickers.js","webpack:///src/components/messages/MessageIncomingSticker.vue","webpack:///./src/components/messages/MessageIncomingSticker.vue?9c73","webpack:///./src/components/messages/MessageIncomingSticker.vue?d321","webpack:///./src/components/messages/MessageOutgoingText.vue?bc8d","webpack:///src/components/messages/MessageOutgoingText.vue","webpack:///./src/components/messages/MessageOutgoingText.vue?6ed1","webpack:///./src/components/messages/MessageOutgoingText.vue?de3c","webpack:///./src/components/messages/MessageOutgoingFile.vue?265a","webpack:///src/components/messages/MessageOutgoingFile.vue","webpack:///./src/components/messages/MessageOutgoingFile.vue?d1e2","webpack:///./src/components/messages/MessageOutgoingFile.vue?c1a2","webpack:///./src/components/messages/MessageOutgoingImage.vue?1431","webpack:///src/components/messages/MessageOutgoingImage.vue","webpack:///./src/components/messages/MessageOutgoingImage.vue?92f7","webpack:///./src/components/messages/MessageOutgoingImage.vue?644d","webpack:///./src/components/messages/MessageOutgoingAudio.vue?71c1","webpack:///src/components/messages/MessageOutgoingAudio.vue","webpack:///./src/components/messages/MessageOutgoingAudio.vue?c482","webpack:///./src/components/messages/MessageOutgoingAudio.vue?25a2","webpack:///./src/components/messages/MessageOutgoingVideo.vue?caca","webpack:///src/components/messages/MessageOutgoingVideo.vue","webpack:///./src/components/messages/MessageOutgoingVideo.vue?4ba3","webpack:///./src/components/messages/MessageOutgoingVideo.vue?4855","webpack:///./src/components/messages/MessageOutgoingSticker.vue?0049","webpack:///src/components/messages/MessageOutgoingSticker.vue","webpack:///./src/components/messages/MessageOutgoingSticker.vue?cf3d","webpack:///./src/components/messages/MessageOutgoingSticker.vue?d6a8","webpack:///./src/components/messages/ContactJoin.vue?9b3e","webpack:///src/components/messages/ContactJoin.vue","webpack:///./src/components/messages/ContactJoin.vue?3c1d","webpack:///./src/components/messages/ContactJoin.vue?3d8f","webpack:///./src/components/messages/ContactLeave.vue?2239","webpack:///src/components/messages/ContactLeave.vue","webpack:///./src/components/messages/ContactLeave.vue?230f","webpack:///./src/components/messages/ContactLeave.vue?73e3","webpack:///./src/components/messages/ContactInvited.vue?3a25","webpack:///src/components/messages/ContactInvited.vue","webpack:///./src/components/messages/ContactInvited.vue?3180","webpack:///./src/components/messages/ContactInvited.vue?54b1","webpack:///./src/components/messages/ContactChanged.vue?d67a","webpack:///src/components/messages/ContactChanged.vue","webpack:///./src/components/messages/ContactChanged.vue?06a1","webpack:///./src/components/messages/ContactChanged.vue?5317","webpack:///./src/components/messages/RoomNameChanged.vue?895f","webpack:///src/components/messages/RoomNameChanged.vue","webpack:///./src/components/messages/RoomNameChanged.vue?abdf","webpack:///./src/components/messages/RoomNameChanged.vue?adb7","webpack:///./src/components/messages/RoomTopicChanged.vue?9180","webpack:///src/components/messages/RoomTopicChanged.vue","webpack:///./src/components/messages/RoomTopicChanged.vue?1516","webpack:///./src/components/messages/RoomTopicChanged.vue?25a9","webpack:///./src/components/messages/RoomAvatarChanged.vue?a791","webpack:///src/components/messages/RoomAvatarChanged.vue","webpack:///./src/components/messages/RoomAvatarChanged.vue?f3dc","webpack:///./src/components/messages/RoomAvatarChanged.vue?07d4","webpack:///./src/components/messages/RoomHistoryVisibility.vue?c433","webpack:///src/components/messages/RoomHistoryVisibility.vue","webpack:///./src/components/messages/RoomHistoryVisibility.vue?bb47","webpack:///./src/components/messages/RoomHistoryVisibility.vue?11a0","webpack:///./src/components/messages/RoomJoinRules.vue?c158","webpack:///src/components/messages/RoomJoinRules.vue","webpack:///./src/components/messages/RoomJoinRules.vue?617a","webpack:///./src/components/messages/RoomJoinRules.vue?fea1","webpack:///./src/components/messages/DebugEvent.vue?1cde","webpack:///src/components/messages/DebugEvent.vue","webpack:///./src/components/messages/DebugEvent.vue?2424","webpack:///./src/components/messages/DebugEvent.vue?2317","webpack:///./src/components/messages/MessageOperations.vue?ff9c","webpack:///./src/components/messages/messageOperationsMixin.js","webpack:///src/components/messages/MessageOperations.vue","webpack:///./src/components/messages/MessageOperations.vue?3e7f","webpack:///./src/components/messages/MessageOperations.vue?d3d5","webpack:///./src/components/messages/MessageOperationsPicker.vue?dbac","webpack:///src/components/messages/MessageOperationsPicker.vue","webpack:///./src/components/messages/MessageOperationsPicker.vue?960f","webpack:///./src/components/messages/MessageOperationsPicker.vue?496a","webpack:///./src/components/ChatHeader.vue?c03f","webpack:///src/components/ChatHeader.vue","webpack:///./src/components/ChatHeader.vue?6819","webpack:///./src/components/ChatHeader.vue?440c","webpack:///./src/components/VoiceRecorder.vue?c3ad","webpack:///./src/components/VoiceRecorderLock.vue?89d1","webpack:///src/components/VoiceRecorderLock.vue","webpack:///./src/components/VoiceRecorderLock.vue?f224","webpack:///./src/components/VoiceRecorderLock.vue?daee","webpack:///src/components/VoiceRecorder.vue","webpack:///./src/components/VoiceRecorder.vue?0249","webpack:///./src/components/VoiceRecorder.vue?dd9d","webpack:///./src/components/RoomInfoBottomSheet.vue?2d78","webpack:///./src/components/BottomSheet.vue?f79a","webpack:///src/components/BottomSheet.vue","webpack:///./src/components/BottomSheet.vue?2590","webpack:///./src/components/BottomSheet.vue?e6b3","webpack:///src/components/RoomInfoBottomSheet.vue","webpack:///./src/components/RoomInfoBottomSheet.vue?8b24","webpack:///./src/components/RoomInfoBottomSheet.vue?3612","webpack:///./src/components/CreatedRoomWelcomeHeader.vue?a4bd","webpack:///src/components/CreatedRoomWelcomeHeader.vue","webpack:///./src/components/CreatedRoomWelcomeHeader.vue?931c","webpack:///./src/components/CreatedRoomWelcomeHeader.vue?dc86","webpack:///./src/components/MessageOperationsBottomSheet.vue?02ab","webpack:///src/components/MessageOperationsBottomSheet.vue","webpack:///./src/components/MessageOperationsBottomSheet.vue?08b8","webpack:///./src/components/MessageOperationsBottomSheet.vue?fd0f","webpack:///./src/components/StickerPickerBottomSheet.vue?7b9f","webpack:///src/components/StickerPickerBottomSheet.vue","webpack:///./src/components/StickerPickerBottomSheet.vue?4193","webpack:///./src/components/StickerPickerBottomSheet.vue?98ec","webpack:///src/components/Chat.vue","webpack:///./src/components/Chat.vue?61f6","webpack:///./src/components/Chat.vue?4c96","webpack:///./src/components/Join.vue?c6fd","webpack:///src/components/Join.vue","webpack:///./src/components/Join.vue?09b1","webpack:///./src/components/Join.vue?1673","webpack:///./src/components/Login.vue?9e6a","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?2227","webpack:///./src/components/Login.vue?cef6","webpack:///./src/components/Profile.vue?e3f1","webpack:///src/components/Profile.vue","webpack:///./src/components/Profile.vue?ab14","webpack:///./src/components/Profile.vue?db09","webpack:///./src/components/CreateRoom.vue?7f0b","webpack:///src/components/CreateRoom.vue","webpack:///./src/components/CreateRoom.vue?ec5a","webpack:///./src/components/CreateRoom.vue?75cd","webpack:///./src/router/index.js","webpack:///./src/store/auth.module.js","webpack:///./src/store/index.js","webpack:///./src/services/navigation.service.js","webpack:///./src/services/cleaninsights.service.js","webpack:///./src/main.js","webpack:///./src/components/BottomSheet.vue?49b0","webpack:///./src/assets/avatars/av_cat.png","webpack:///./src/App.vue?c650","webpack:///./src/assets/avatars/av_panda.png","webpack:///./src/components/VoiceRecorder.vue?ead2","webpack:///./src/assets/avatars/av_tiger.png","webpack:///./src/components/messages/MessageOutgoingSticker.vue?8763","webpack:///./src/assets/avatars/av_osprey.png","webpack:///./src/components/messages/MessageOutgoingAudio.vue?81f2","webpack:///./src/assets/avatars/av_panther.png","webpack:///./src/assets/avatars/av_otter.png","webpack:///./src/assets/avatars/av_mantis.png","webpack:///./src/assets/avatars/av_bunny.png","webpack:///./src/components/messages/MessageOutgoingImage.vue?7e37","webpack:///./src/assets/avatars/av_iguna.png","webpack:///./src/components/StickerPickerBottomSheet.vue?f739","webpack:///./src/assets/avatars/av_dragonfly.png","webpack:///./src/assets/avatars/av_hummingbird.png","webpack:///./src/components/messages/MessageOperationsPicker.vue?8ba9","webpack:///./src/assets/avatars/av_turtle.png","webpack:///./src/assets/avatars/av_orangutan.png","webpack:///./src/models/user.js","webpack:///./src/assets/avatars/av_owl.png","webpack:///./src/assets/avatars/av_starfish.png","webpack:///./src/assets/avatars/av_horse.png","webpack:///./src/components/messages/MessageIncomingText.vue?062b","webpack:///./src/assets/avatars sync \\.(jpeg|jpg|png)$","webpack:///./src/components/messages/MessageIncomingSticker.vue?cca2","webpack:///./src/assets/avatars/av_shark.png","webpack:///./src/components/CreatedRoomWelcomeHeader.vue?15d6","webpack:///./src/assets/avatars/av_giraffe.png","webpack:///./src/components/messages/MessageOperations.vue?7d03","webpack:///./src/assets/avatars/av_gazelle.png","webpack:///./src/components/messages/MessageIncomingAudio.vue?91be","webpack:///./src/components/RoomInfoBottomSheet.vue?72f4","webpack:///./src/assets/stickers sync \\.png$","webpack:///./src/assets/avatars/av_elephant.png","webpack:///./src/components/messages/ContactInvited.vue?aa01","webpack:///./src/assets/avatars/av_crab.png","webpack:///./src/components/messages/RoomHistoryVisibility.vue?a2ce","webpack:///./src/assets/avatars/av_egret.png","webpack:///./src/assets/avatars/av_fox.png","webpack:///./src/assets/avatars/av_stingray.png","webpack:///./src/components/Profile.vue?28f4","webpack:///./src/assets/avatars/av_puppy.png","webpack:///./src/assets/avatars/av_rhino.png","webpack:///./src/assets/avatars/av_sloth.png","webpack:///./src/assets/avatars/av_yak.png","webpack:///./src/components/messages/MessageOutgoingFile.vue?3880","webpack:///./src/components/ChatHeader.vue?a171","webpack:///./src/services/matrix.service.js","webpack:///./src/assets/avatars/av_baboon.png","webpack:///./src/components/messages/MessageOutgoingVideo.vue?077f","webpack:///./src/assets/avatars/av_gorilla.png","webpack:///./src/components/messages/MessageIncomingVideo.vue?2992","webpack:///./src/assets/avatars/av_hippo.png","webpack:///./src/assets/avatars/av_bear.png","webpack:///./src/assets/avatars/av_lion.png","webpack:///./src/components/messages/RoomNameChanged.vue?7a17","webpack:///./src/components/messages/RoomJoinRules.vue?81bc","webpack:///./src/assets/avatars/av_lionfish.png","webpack:///./src/plugins/utils.js","webpack:///./src/components/LeaveRoomDialog.vue?ea88","webpack:///./src/assets/avatars/av_lizard.png","webpack:///./src/assets/avatars/av_crane.png","webpack:///./src/components/LeaveRoomDialog.vue?c414","webpack:///src/components/LeaveRoomDialog.vue","webpack:///./src/components/LeaveRoomDialog.vue?3746","webpack:///./src/components/LeaveRoomDialog.vue?7228","webpack:///./src/components/VoiceRecorder.vue?6dac","webpack:///./src/assets/avatars/av_penguin.png","webpack:///./src/assets/avatars/av_flamingo.png","webpack:///./src/components/messages/MessageOutgoingText.vue?d5ce","webpack:///./src/components/messages/MessageIncomingImage.vue?2aae","webpack:///./src/assets/avatars/av_whaleshark.png","webpack:///./src/assets/avatars/av_butterfly.png","webpack:///./src/assets/avatars/av_cockatoo.png","webpack:///./src/components/RoomList.vue?ffa9","webpack:///./src/components/messages/RoomAvatarChanged.vue?f37c","webpack:///./src/components/StickerPickerBottomSheet.vue?484c","webpack:///./src/components/messages/QuickReactions.vue?6543","webpack:///./src/assets/avatars/av_rooster.png","webpack:///./src/assets/avatars/av_cardinal.png","webpack:///./src/assets/avatars/av_bee.png","webpack:///./src/components/messages/ContactLeave.vue?7a66"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","roomJoinRule","userCanChangeJoinRule","userCanPurgeRoom","mounted","this","$matrix","on","roomInfoMixinOnEvent","updatePermissions","destroyed","off","computed","room","currentRoom","roomName","roomTopic","topic","roomAvatar","avatar","publicRoomLink","$router","getRoomLink","getCanonicalAlias","roomId","watch","handler","ignoredNewVal","ignoredOldVal","newVal","oldVal","setRoomJoinRule","methods","getRoomJoinRule","canChangeAccess","currentState","mayClientSendStateEvent","matrixClient","getRoomId","getType","_vm","_h","$createElement","_c","_self","staticRenderFns","location","protocol","currentUser","replace","$store","state","auth","user","title","notificationCount","$route","meta","includeRoom","currentRoomId","component","VApp","VMain","Vue","use","Vuetify","icons","iconfont","staticClass","attrs","$event","stopPropagation","logout","_v","staticStyle","_e","_s","invitesTitle","model","callback","$$v","expression","_l","roomsProcessing","summary","info","acceptInvitation","rejectInvitation","props","String","default","showInvites","Boolean","getUnreadNotificationCount","joinRoom","leaveRoom","$emit","$navigation","VBtn","VIcon","VImg","VList","VListItem","VListItemAction","VListItemAvatar","VListItemContent","VListItemGroup","VListItemSubtitle","VListItemTitle","VSlideYTransition","components","RoomList","loading","ready","dispatch","$nextTick","VCol","VContainer","VProgressCircular","VRow","$refs","roomInfoSheet","open","ref","onScroll","closeContextMenuIfOpen","selectedEvent","showContextMenu","style","recentEmojis","addReaction","addQuickReaction","addReply","edit","redact","download","showMoreMessageOperations","handleChatContainerResize","closeCreateRoomWelcomeHeader","index","getId","showDayMarkerBeforeEvent","dayForEvent","isRelation","isRedacted","isRedaction","refInFor","touchStart","touchEnd","touchCancel","touchMove","componentForEvent","events","timelineWindow","_timelineSet","getRelationsForEvent","sendQuickReaction","showContextMenuForEvent","viewProfile","readMarker","directives","rawName","scrollToEndOfTimeline","replyToEvent","getContent","body","typingMembersString","indexOf","_k","keyCode","preventDefault","sendCurrentTextMessage","currentInput","editedEvent","cancelEditReply","showRecorder","showRecordingUI","startRecording","arg","canRecordAudio","sendButtonDisabled","config","attachButtonDisabled","showStickerPicker","showAttachmentPicker","handlePickedAttachment","mic_button","showRecorderPTT","onVoiceRecording","currentImageInputPath","currentImageInput","currentSendError","currentSendProgress","cancelSendAttachment","currentSendOperation","sendAttachment","showEmojiPicker","emojiSelected","sendSticker","showNotAllowedForGuests","initialLoadDone","class","messageClasses","messageEventAvatar","messageEventDisplayName","substring","toUpperCase","reactions","inReplyToSender","domProps","linkify","$sanitize","inReplyToText","messageText","replacingEventId","opbutton","formatTime","origin_server_ts","includes","currentUserId","onClickEmoji","reactionMap","beforeDestroy","onAddRelation","$bubble","processReactions","_eventsCount","newValue","immediate","require","linkifyHtml","options","defaults","className","QuickReactions","nextEvent","timelineSet","inReplyToEvent","relatesTo","getWireContent","originalEventId","event_id","originalEvent","findEventById","incoming","getSender","showSenderAndTime","ts1","ts2","content","lines","split","reverse","startsWith","text","map","item","join","senderIsAdminOrModerator","userAvatar","mxcUrlToHttp","userAvatarLetter","currentUserDisplayName","ownAvatarClicked","buttonRef","anchor","stateEventDisplayName","member","getMember","displayname","state_key","getAvatarUrl","getHomeserverUrl","powerLevel","time","date","Date","setTime","today","getDate","getMonth","getFullYear","toLocaleTimeString","toLocaleString","mixins","messageMixin","VAvatar","cover","contain","URL","revokeObjectURL","objectUrl","downloadProgress","log","JSON","stringify","util","getAttachment","progress","url","catch","attachmentMixin","VResponsive","stickerPacks","stickerCodeMap","stickerPackInfo","packInfo","pack","ordering","ignorederr","importAll","keys","res","parts","sticker","image","Stickers","messageBody","getStickerImage","endsWith","gStickers","stickers","status","changer","displayNameChange","prevContent","avatarChange","avatar_url","getPrevContent","history","visibility","joinRule","maxRecents","more","isEditable","msgtype","isDownloadable","isRedactable","getRoom","maySendRedactionForEvent","emoji","messageOperationsMixin","emojis","Array","outgoing","onHeaderClicked","memberCount","showLeaveConfirmation","LeaveRoomDialog","onEvent","updateMemberCount","getJoinedMemberCount","ptt","row","states","RECORDED","redo","RECORDING","pauseRecording","recordedFile","send","cancelRecording","recordingTime","stopRecording","ERROR","errorMessage","recordingLocked","isLocked","INITIAL","VoiceRecorderLock","show","micButtonRef","willCancel","startCoordinateX","startCoordinateY","State","recordStartedAt","fromCharCode","recordTimer","$el","getBoundingClientRect","left","width","right","vrroot","parentElement","widthParent","documentElement","setProperty","initialScale","initialTranslate","val","addEventListener","mouseUp","mouseMove","display","removeEventListener","lockButtonStyle","close","stopRecordTimer","x","clientX","y","clientY","touches","constraints","audio","channelCount","sampleRate","echoCancellation","autoGainControl","noiseSuppression","volume","video","navigator","mediaDevices","recorder","destroy","getFile","startRecordTimer","setInterval","clearInterval","showDetails","createRoom","onBackgroundClick","top","isMove","calcY","_m","_t","openY","Number","halfY","defaultState","mc","startY","rect","onresize","sheet","set","self","evt","center","height","setState","VFadeTransition","roomInfoMixin","BottomSheet","closed","backgroundClick","SwipeableBottomSheet","$watch","currentStickerPack","stickersInPack","selectSticker","packs","getPacks","getStickerShortcode","VCard","VTab","VTabItem","VTabs","VTabsItems","VTabsSlider","ScrollPosition","node","previousScrollHeightMinusTop","previousScrollTop","readyFor","restore","scrollTop","prepareFor","direction","ChatHeader","MessageIncomingText","MessageIncomingFile","MessageIncomingImage","MessageIncomingAudio","MessageIncomingVideo","MessageIncomingSticker","MessageOutgoingText","MessageOutgoingFile","MessageOutgoingImage","MessageOutgoingAudio","MessageOutgoingVideo","MessageOutgoingSticker","ContactJoin","ContactLeave","ContactInvited","ContactChanged","RoomNameChanged","RoomTopicChanged","RoomAvatarChanged","RoomHistoryVisibility","RoomJoinRules","DebugEvent","MessageOperations","MessageOperationsPicker","VoiceRecorder","RoomInfoBottomSheet","CreatedRoomWelcomeHeader","MessageOperationsBottomSheet","StickerPickerBottomSheet","typingMembers","timelineWindowPaginating","scrollPosition","currentSendShowSendButton","showContextMenuAnchor","chatContainerSize","showScrollToEnd","rrTimer","lastRR","showCreatedRoomWelcomeHeader","container","chatContainerResizer","clientHeight","stopRRTimer","onUserTyping","roomAliasOrId","fullyReadMarker","readEvent","count","opStyle","rectAnchor","rectChat","messageOperationsStrut","debugging","host","oldValue","onRoomNotJoined","hasMembershipState","user_id","onRoomJoined","createEvent","creatorId","getLocalAge","initialEventId","canPaginate","smoothScrollToEnd","touchX","touchY","touchStartX","touchStartY","touchTimer","touchTimerElapsed","touchCurrentX","touchCurrentY","tapTolerance","touchMoved","updateRecentEmojis","delta","membership","paginateBackIfNeeded","scrollHeight","bufferHeight","handleScrolledToTop","handleScrolledToBottom","restartRRTimer","scrollToSeeNew","forwardLooking","typing","sendMessage","attachment","click","files","reader","FileReader","readAsDataURL","onUploadProgress","total","loaded","scrollToEvent","scrollTo","sourceY","targetY","children","lastChild","requestAnimationFrame","scrollIntoView","behavior","block","inline","messageOperationsSheet","messageInput","focus","stickerShortCode","rrTimerElapsed","READ_RECEIPT_TIMEOUT","elFirst","elLast","eventIdLast","lastTimestamp","getTs","eventIdFirst","idx","file","$ci","emojiPicker","mapEmojis","VCardActions","VCardText","VCardTitle","VDialog","VDivider","VSpacer","VTextarea","waitingForInfo","waitingForMembership","handleLogin","showAvatarPickerList","selectedProfile","availableAvatars","selectAvatar","scopedSlots","_u","fn","nativeOn","$set","proxy","userDisplayName","handleJoin","loadingMessage","guestUser","onMyMembership","canEditProfile","userId","getLoginPromise","setCurrentRoomId","getRoomInfo","handleOpenApp","setProfileData","assign","input","VSelect","VTextField","pop","isValid","v","userErrorMessage","password","passErrorMessage","loggedIn","showBackArrow","canPop","created","deep","normalize","VForm","displayName","showEditPasswordDialog","editValue","showEditDisplaynameDialog","settingPassword","is_guest","newPassword1","newPassword2","passwordErrorMessage","closeEditPasswordDialog","passwordsMatch","setPassword","setDisplayName","getUser","avatarUrl","oldPassword","newPassword","success","step","steps","NAME_SET","goBack","CREATED","next","showAvatarPicker","CREATING","joinRules","active","_g","_b","icon","descr","copyRoomLink","getPublicLink","addPeople","handlePickedAvatar","roomAvatarFile","publicRoomLinkCopied","id","roomAvatarLetter","openRoom","createRoomDebug","createRoomOptions","room_alias_name","toLowerCase","preset","initial_state","$copyText","VueRouter","routes","path","Home","Chat","Profile","CreateRoom","Login","Join","router","beforeEach","to","from","publicPages","authRequired","localStorage","getItem","params","hash","sanitizeRoomId","app","origin","pathname","encodeURIComponent","parse","initialState","namespaced","actions","login","commit","mutations","loginSuccess","loginFailure","registerSuccess","registerFailure","Vuex","vuexPersist","VuexPersist","storage","reducer","Store","plugins","plugin","install","nextRoutes","zeroIndex","beforeResolve","ignoredfrom","navigationService","route","targetIndex","go","ignoredErr","RequestUi","campaignId","campaign","complete","period","nextTotalMeasurementPeriod","start","format","end","confirm","ConsentRequestUi","cleanInsightsService","ci","requestUi","analytics","enabled","CleanInsights","campaigns","invalid","category","action","requestConsentForCampaign","granted","measureEvent","defaultOptions","VueSanitize","disallowedTagsMode","allowedTags","productionTip","VueResize","VEmojiPicker","matrix","store","cleaninsights","VueClipboard","eventName","args","$parent","directive","inserted","el","onfocus","ev","blur","binding","ignoredvnode","longTapTimeout","parseInt","longTapCallbacks","longTapHandled","longTapTimer","classList","remove","longTapStartX","longTapStartY","add","longTapCurrentX","longTapCurrentY","Math","abs","longTapTouchStart","longTapTouchEnd","longTapTouchCancel","longTapTouchMove","unbind","navigation","vuetify","render","h","App","$mount","User","home_server","webpackContext","req","webpackContextResolve","webpackEmptyContext","global","Olm","LocalStorageCryptoStore","sdk","setCryptoStoreFactory","matrixService","matrixClientReady","rooms","joinedRooms","filter","_selfMembership","invites","promiseLogin","tempMatrixClient","createClient","homeServerUrl","access_token","randomUser","pass","randomPass","register","response","setItem","localPart","device_id","u","getMatrixClient","clearCryptoStore","toRemove","removeItem","removeMatrixClientListeners","stopClient","clearStores","initClient","reloadRooms","emit","getProfileInfo","ignoredreject","once","ignoredclient","matrixStore","MemoryStore","webStorageSessionStore","WebStorageSessionStore","homeServer","opts","baseUrl","sessionStore","deviceId","accessToken","timelineSupport","unstableClientRelationAggregation","initCrypto","addMatrixClientListeners","startClient","isInitialSyncComplete","ignoredprevState","ignoredres","client","onRoom","onSessionLoggedOut","onRoomMyMembership","updateNotificationCount","ignoredroom","recalculate","updatedRooms","getVisibleRooms","forEach","visibleRooms","getRooms","find","getAllFriends","ids","ret","getJoinedMembers","sort","a","b","aName","bName","localeCompare","getStateEvents","join_rule","leave","removeRoom","purgeRoom","TimelineWindow","getUnfilteredTimelineSet","sendStateEvent","guest_access","history_visibility","load","getMoreIfAvailable","_getMoreIfAvailable","EventTimeline","BACKWARDS","paginate","ignoredsuccess","redactionPromises","getEvents","isState","redactEvent","joined","getMembersWithMembership","invited","members","concat","kickPromises","kick","authDict","identifier","uploadFile","uploadContent","getPublicRoomInfo","clientPromise","server","defaultServer","tempUserString","tempUser","findOrGetMore","_findOrGetMore","canonical_alias","room_id","next_batch","publicRooms","limit","since","dayjs","sha256","aesjs","base64Url","localizedFormat","extend","duration","_browserCanRecordAudioF","legacyGetUserMedia","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","_browserCanRecordAudio","Util","progressCallback","axios","responseType","onDownloadProgress","progressEvent","percentCompleted","floor","decryptIfNeeded","bytes","createObjectURL","Blob","buffer","mimetype","finally","ignoredw","ignoredh","thumbnail_file","decode","k","iv","aesCtr","ModeOfOperation","ctr","Counter","Uint8Array","update","arrayBuffer","originalHash","hashes","Buffer","compare","decryptedBytes","decrypt","ContentHelpers","rel_type","prefix","eventType","sendEvent","setAsKnownPromises","devices","userDevices","deviceInfo","known","setDeviceKnown","resendEvent","fileContents","size","description","progressHandler","onlyContentUri","messageContent","filename","isRoomEncrypted","crypto","randomBytes","alloc","encryptedBytes","encrypt","jwk","kty","key_ops","alg","encode","ext","encryptedFile","toString","content_uri","readAsArrayBuffer","randomString","characters","charactersLength","charAt","random","match","visible","findVisibleElements","middle","findOneVisibleElement","nodes","isChildVisible","childNode","rect1","rect2","overlap","bottom","offsetTop","images","_importAll","avatarUri","headers","setAvatarUrl","t1","endOf","t2","diff","timestamp","now","dayDiff","ms","showDialog","lastRoom","onLeaveRoom","onlyJoinedToThisRoom"],"mappings":"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","file":"js/app.45ea9620.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-0f0ce3f1\":\"6d5ab5c7\",\"chunk-3bf6242b\":\"c94db1bb\",\"chunk-b8c12378\":\"f8877c94\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-0f0ce3f1\":1,\"chunk-3bf6242b\":1,\"chunk-b8c12378\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-0f0ce3f1\":\"2c696b8e\",\"chunk-3bf6242b\":\"89cc564d\",\"chunk-b8c12378\":\"ccfe4992\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([3,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/av_beta.41c39e4d.png\";","module.exports = __webpack_public_path__ + \"img/av_badger.d4acb400.png\";","module.exports = __webpack_public_path__ + \"img/av_octopus.5212bf6b.png\";","module.exports = __webpack_public_path__ + \"img/av_squirrel.d47c4b85.png\";","module.exports = __webpack_public_path__ + \"img/av_jellyfish.03a9c0d4.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactChanged.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateRoom.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_hedgehog.7cb0a229.png\";","module.exports = __webpack_public_path__ + \"img/av_tucan.30beb3d2.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperationsBottomSheet.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_macaw.a05c791e.png\";","module.exports = __webpack_public_path__ + \"img/av_puffin.9d99a93a.png\";","export default \"# List your sticker pack names here, one per line\\n\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomList.vue?vue&type=style&index=1&id=070dea70&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/av_peacock.bcef575d.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorderLock.vue?vue&type=style&index=0&lang=scss&\"","export default {\n  data() {\n    return {\n      roomJoinRule: null,\n      userCanChangeJoinRule: false,\n      userCanPurgeRoom: false\n    }\n  },\n  mounted() {\n    this.$matrix.on(\"Room.timeline\", this.roomInfoMixinOnEvent);\n    this.updatePermissions();\n  },\n\n  destroyed() {\n    this.$matrix.off(\"Room.timeline\", this.roomInfoMixinOnEvent);\n  },\n\n  computed: {\n    room() {\n      return this.$matrix.currentRoom;\n    },\n\n    roomName() {\n      if (this.room) {\n        return this.room.name;\n      }\n      return \"\";\n    },\n\n    roomTopic() {\n      if (this.room) {\n        return this.room.topic;\n      }\n      return \"\";\n    },\n\n    roomAvatar() {\n      if (this.room) {\n        return this.room.avatar;\n      }\n      return \"\";\n    },\n\n    publicRoomLink() {\n      if (this.room && this.roomJoinRule == \"public\") {\n        return this.$router.getRoomLink(\n          this.room.getCanonicalAlias() || this.room.roomId\n        );\n      }\n      return null;\n    },\n  },\n  watch: {\n    room: {\n      handler(ignoredNewVal, ignoredOldVal) {\n        this.updatePermissions();\n      },\n    },\n    roomJoinRule: {\n      handler(newVal, oldVal) {\n        if (newVal && oldVal && newVal != oldVal) {\n          this.setRoomJoinRule(newVal);\n        }\n      },\n    },\n  },\n  methods: {\n    getRoomJoinRule() {\n      return this.$matrix.getRoomJoinRule(this.room);\n    },\n\n    updatePermissions() {\n      if (this.room) {\n        this.roomJoinRule = this.getRoomJoinRule();\n        const canChangeAccess =\n          this.room.currentState.mayClientSendStateEvent(\n            \"m.room.join_rules\",\n            this.$matrix.matrixClient\n          ) &&\n          this.room.currentState.mayClientSendStateEvent(\n            \"m.room.guest_access\",\n            this.$matrix.matrixClient\n          );\n        this.userCanChangeJoinRule = canChangeAccess;\n        this.userCanPurgeRoom = canChangeAccess; //TODO - need different permissions here?\n      } else {\n        this.roomJoinRule = null;\n        this.userCanChangeJoinRule = false;\n        this.userCanPurgeRoom = false;\n      }\n    },\n\n    roomInfoMixinOnEvent(event) {\n      if (event.getRoomId() !== this.roomId) {\n        return; // Not for this room\n      }\n      if (\n        event.getType() == \"m.room.join_rules\" ||\n        event.getType() == \"m.room.guest_access\"\n      ) {\n        this.updatePermissions();\n      }\n    },\n  },\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactJoin.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTopicChanged.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_walrus.3a9e78aa.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingFile.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_zebra.2c4af008.png\";","module.exports = __webpack_public_path__ + \"img/av_leopard.60f857fd.png\";","module.exports = __webpack_public_path__ + \"img/av_pangolin.366738bb.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugEvent.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_polar bear.3e1fa612.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_snake.4e6fc2ae.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_eagle.ffb9de18.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-main',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-app>\n    <v-main>\n      <router-view />\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n  mounted() {\n    if (window.location.protocol == \"http\") {\n      // Redirect to HTTPS\n      window.location.href = window.location.href.replace(\"http:\", \"https:\");\n      return;\n    }\n    if (this.currentUser) {\n      this.$matrix\n        .login(this.currentUser)\n        .then(() => {\n          console.log(\"Matrix client ready\");\n        })\n        .catch((error) => {\n          console.log(\"Error creating client\", error);\n        });\n    }\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    title() {\n      var title = \"Keanu Weblite\";\n      if (this.$matrix.notificationCount > 0) {\n        title += \" [\" + this.$matrix.notificationCount + \"]\";\n      }\n      if (this.$route.meta.title) {\n        title += \"  - \" + this.$route.meta.title;\n      }\n      if (this.$route.meta.includeRoom) {\n        if (this.$matrix.currentRoom) {\n          title +=\n            \" - \" +\n            (this.$matrix.currentRoom.summary.info.title ||\n              this.$matrix.currentRoom.roomId);\n        } else if (this.$matrix.currentRoomId) {\n          title += \" - \" + this.$matrix.currentRoomId;\n        }\n      }\n      return title;\n    },\n  },\n  watch: {\n    title(title) {\n      document.title = title;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.copyright {\n  font-size: 10px;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2375592c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VMain } from 'vuetify/lib/components/VMain';\ninstallComponents(component, {VApp,VMain})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  icons: {\n    iconfont: 'md',\n  },\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pa-4\"},[_c('RoomList',{attrs:{\"showInvites\":\"\"}}),_c('v-btn',{staticClass:\"outlined-button\",attrs:{\"block\":\"\",\"depressed\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.logout($event)}}},[_vm._v(\"Logout\")]),(_vm.loading)?_c('v-container',{staticStyle:{\"position\":\"absolute\",\"background-color\":\"rgba(0,0,0,0.2)\"},attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"text-center\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-list',{staticClass:\"room-list\",attrs:{\"dense\":\"\"}},[(_vm.showInvites)?_c('div',{staticClass:\"h4\"},[_vm._v(_vm._s(_vm.invitesTitle))]):_vm._e(),(_vm.showInvites)?_c('v-list-item-group',{attrs:{\"color\":\"primary\"},model:{value:(_vm.currentRoomId),callback:function ($$v) {_vm.currentRoomId=$$v},expression:\"currentRoomId\"}},[_c('v-slide-y-transition',{attrs:{\"group\":\"\"}},_vm._l((_vm.$matrix.invites),function(room){return _c('v-list-item',{key:room.roomId,attrs:{\"disabled\":_vm.roomsProcessing[room.roomId],\"value\":room.roomId}},[_c('v-list-item-avatar',{attrs:{\"size\":\"40\",\"color\":\"#e0e0e0\"}},[_c('v-img',{attrs:{\"src\":room.avatar}})],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(room.name || room.summary.info.title))]),_c('v-list-item-subtitle',[_vm._v(_vm._s(room.topic))])],1),_c('v-list-item-action',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.acceptInvitation(room)}}},[_c('v-icon',[_vm._v(\"check_circle\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.rejectInvitation(room)}}},[_c('v-icon',[_vm._v(\"cancel\")])],1)],1)],1)}),1)],1):_vm._e(),_c('div',{staticClass:\"h4\"},[_vm._v(_vm._s(_vm.title))]),_c('v-list-item-group',{attrs:{\"color\":\"primary\"},model:{value:(_vm.currentRoomId),callback:function ($$v) {_vm.currentRoomId=$$v},expression:\"currentRoomId\"}},_vm._l((_vm.$matrix.joinedRooms),function(room){return _c('v-list-item',{key:room.roomId,attrs:{\"value\":room.roomId}},[_c('v-list-item-avatar',{attrs:{\"size\":\"40\",\"color\":\"#e0e0e0\"}},[_c('v-img',{attrs:{\"src\":room.avatar}})],1),_c('div',{staticClass:\"room-list-notification-count\"},[_vm._v(_vm._s(_vm.notificationCount(room)))]),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(room.summary.info.title))]),_c('v-list-item-subtitle',[_vm._v(_vm._s(room.topic))])],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-list dense class=\"room-list\">\n    <div v-if=\"showInvites\" class=\"h4\">{{invitesTitle}}</div>\n    <v-list-item-group v-if=\"showInvites\" v-model=\"currentRoomId\" color=\"primary\">\n      <v-slide-y-transition group>\n      <v-list-item :disabled=\"roomsProcessing[room.roomId]\" v-for=\"room in $matrix.invites\" :key=\"room.roomId\" :value=\"room.roomId\">\n        <v-list-item-avatar size=\"40\" color=\"#e0e0e0\">\n          <v-img :src=\"room.avatar\" />\n        </v-list-item-avatar>\n        <v-list-item-content>\n          <v-list-item-title>{{ room.name || room.summary.info.title }}</v-list-item-title>\n          <v-list-item-subtitle>{{ room.topic }}</v-list-item-subtitle>\n        </v-list-item-content>\n        <v-list-item-action>\n          <v-btn @click.stop=\"acceptInvitation(room)\" icon><v-icon>check_circle</v-icon></v-btn>\n          <v-btn @click.stop=\"rejectInvitation(room)\" icon><v-icon>cancel</v-icon></v-btn>\n        </v-list-item-action>\n      </v-list-item>\n      </v-slide-y-transition>\n    </v-list-item-group>\n    <div class=\"h4\">{{title}}</div>\n    <v-list-item-group v-model=\"currentRoomId\" color=\"primary\">\n      <v-list-item v-for=\"room in $matrix.joinedRooms\" :key=\"room.roomId\" :value=\"room.roomId\">\n        <v-list-item-avatar size=\"40\" color=\"#e0e0e0\">\n          <v-img :src=\"room.avatar\" />\n        </v-list-item-avatar>\n        <div class=\"room-list-notification-count\">{{ notificationCount(room) }}</div>\n        <v-list-item-content>\n          <v-list-item-title>{{ room.summary.info.title }}</v-list-item-title>\n          <v-list-item-subtitle>{{ room.topic }}</v-list-item-subtitle>\n        </v-list-item-content>\n      </v-list-item>\n    </v-list-item-group>\n  </v-list>\n</template>\n\n<script>\nimport util from \"../plugins/utils\";\nimport Vue from 'vue';\n\nexport default {\n  name: \"RoomList\",\n\n  props: {\n    title: {\n      type: String,\n      default: \"Rooms\"\n    },\n    invitesTitle: {\n      type: String,\n      default: \"Invites\"\n    },\n    showInvites: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data: () => ({\n    currentRoomId: null,\n    /** A list of rooms currently processing some operation, like \"join\" or \"reject\" */\n    roomsProcessing: {},\n  }),\n\n  methods: {\n    notificationCount(room) {\n      return room.getUnreadNotificationCount('total') || 0;\n    },\n\n    acceptInvitation(room) {\n      Vue.set(this.roomsProcessing, room.roomId, true);\n      this.$matrix.matrixClient.joinRoom(room.roomId)\n        .then((ignoredRoom) => {\n          this.$nextTick(() => {\n            this.$navigation.push(\n              {\n                name: \"Chat\",\n                params: { roomId: util.sanitizeRoomId(room.getCanonicalAlias() || room.roomId) },\n              },\n              -1\n            );\n          });\n        })\n        .catch((err) => {\n          console.error(\"Failed to accept invite: \", err);\n        })\n        .finally(() => {\n          Vue.delete(this.roomsProcessing, room.roomId);\n        });\n    },\n\n    rejectInvitation(room) {\n      Vue.set(this.roomsProcessing, room.roomId, true);\n      this.$matrix.leaveRoom(room.roomId)\n        .catch((err) => {\n          console.error(\"Failed to reject invite: \", err);\n        })\n        .finally(() => {\n          Vue.delete(this.roomsProcessing, room.roomId);\n        });\n    },\n  },\n\n  watch: {\n    currentRoomId() {\n      this.$emit(\"close\");\n      this.$navigation.push({name: 'Chat', params: { roomId: util.sanitizeRoomId(this.currentRoomId) }}, -1);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>\n\n<style lang=\"scss\" scoped>\n/** Align action buttons side to side */\n.v-list-item__action--stack {\n  flex-direction: row !important;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomList.vue?vue&type=template&id=070dea70&scoped=true&\"\nimport script from \"./RoomList.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomList.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./RoomList.vue?vue&type=style&index=1&id=070dea70&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"070dea70\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VSlideYTransition } from 'vuetify/lib/components/transitions';\ninstallComponents(component, {VBtn,VIcon,VImg,VList,VListItem,VListItemAction,VListItemAvatar,VListItemContent,VListItemGroup,VListItemSubtitle,VListItemTitle,VSlideYTransition})\n","<template>\n  <div class=\"pa-4\">\n    <RoomList showInvites />\n    <v-btn block depressed class=\"outlined-button\" @click.stop=\"logout\">Logout</v-btn>\n\n    <!-- Loading indicator -->\n    <v-container\n      fluid\n      fill-height\n      style=\"position: absolute;background-color:rgba(0,0,0,0.2)\"\n      v-if=\"loading\"\n    >\n      <v-row align=\"center\" justify=\"center\">\n        <v-col class=\"text-center\">\n          <v-progress-circular\n            indeterminate\n            color=\"primary\"\n          ></v-progress-circular>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport RoomList from '../components/RoomList';\n\nexport default {\n  components: {\n    RoomList\n  },\n  computed: {\n    loading() {\n      return !this.$matrix.ready;\n    }\n  },\n  methods: {\n    logout() {\n      //TODO - For guest accounts, show warning about not being able to rejoin.\n      this.$store.dispatch(\"auth/logout\");\n      this.$nextTick(() => {\n        this.$navigation.push({path: \"/login\"}, -1);\n      })\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\">\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=290c639c&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VProgressCircular,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-root fill-height d-flex flex-column\",attrs:{\"ma-0\":\"\",\"pa-0\":\"\"}},[_c('ChatHeader',{staticClass:\"chat-header flex-grow-0 flex-shrink-0\",on:{\"header-click\":function($event){return _vm.$refs.roomInfoSheet.open()}}}),_c('div',{ref:\"chatContainer\",staticClass:\"chat-content flex-grow-1 flex-shrink-1\",staticStyle:{\"overflow-x\":\"hidden\",\"overflow-y\":\"auto\"},on:{\"scroll\":_vm.onScroll,\"click\":_vm.closeContextMenuIfOpen}},[_c('div',{ref:\"messageOperationsStrut\",staticClass:\"message-operations-strut\"},[(_vm.selectedEvent && _vm.showContextMenu)?_c('message-operations',{ref:\"messageOperations\",style:(_vm.opStyle),attrs:{\"emojis\":_vm.recentEmojis,\"event\":_vm.selectedEvent},on:{\"close\":function($event){_vm.showContextMenu = false},\"addreaction\":_vm.addReaction,\"addquickreaction\":_vm.addQuickReaction,\"addreply\":function($event){return _vm.addReply(_vm.selectedEvent)},\"edit\":function($event){return _vm.edit(_vm.selectedEvent)},\"redact\":function($event){return _vm.redact(_vm.selectedEvent)},\"download\":function($event){return _vm.download(_vm.selectedEvent)},\"more\":_vm.showMoreMessageOperations}}):_vm._e()],1),_c('resize-observer',{ref:\"chatContainerResizer\",on:{\"notify\":_vm.handleChatContainerResize}}),(_vm.showCreatedRoomWelcomeHeader)?_c('CreatedRoomWelcomeHeader',{on:{\"close\":_vm.closeCreateRoomWelcomeHeader}}):_vm._e(),_vm._l((_vm.events),function(event,index){return _c('div',{key:event.getId(),attrs:{\"eventId\":event.getId()}},[(_vm.showDayMarkerBeforeEvent(event))?_c('div',{staticClass:\"day-marker\",attrs:{\"title\":_vm.dayForEvent(event)}}):_vm._e(),(\n          !event.isRelation() && !event.isRedacted() && !event.isRedaction()\n        )?_c('div',{ref:event.getId(),refInFor:true},[_c('div',{staticStyle:{\"position\":\"relative\",\"user-select\":\"none\"},on:{\"touchstart\":function (e) {\n              _vm.touchStart(e, event);\n            },\"touchend\":_vm.touchEnd,\"touchcancel\":_vm.touchCancel,\"touchmove\":_vm.touchMove}},[_c(_vm.componentForEvent(event),{tag:\"component\",attrs:{\"room\":_vm.room,\"event\":event,\"nextEvent\":_vm.events[index + 1],\"reactions\":_vm.timelineWindow._timelineSet.getRelationsForEvent(\n                event.getId(),\n                'm.annotation',\n                'm.reaction'\n              ),\"timelineSet\":_vm.timelineWindow._timelineSet},on:{\"send-quick-reaction\":_vm.sendQuickReaction,\"context-menu\":function($event){return _vm.showContextMenuForEvent($event)},\"own-avatar-clicked\":_vm.viewProfile,\"download\":function($event){return _vm.download(event)}}}),(event.getId() == _vm.readMarker && index < _vm.events.length - 1)?_c('div',{staticClass:\"read-marker\",attrs:{\"title\":\"Unread messages\"}}):_vm._e()],1)]):_vm._e()])})],2),(_vm.room)?_c('v-container',{staticClass:\"input-area-outer\",attrs:{\"fluid\":\"\"}},[_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showScrollToEnd),expression:\"showScrollToEnd\"}],staticClass:\"scroll-to-end\",attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"color\":\"black\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.scrollToEndOfTimeline($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"arrow_downward\")])],1),_c('v-row',{staticClass:\"ma-0 pa-0\"},[(_vm.replyToEvent)?_c('div',[_vm._v(\" REPLYING TO EVENT: \"+_vm._s(_vm.replyToEvent.getContent().body)+\" \")]):_vm._e(),_c('div',{staticClass:\"typing\"},[_vm._v(\" \"+_vm._s(_vm.typingMembersString)+\" \")])]),_c('v-row',{staticClass:\"input-area-inner align-center\"},[_c('v-col',{staticClass:\"flex-grow-1 flex-shrink-1 ma-0 pa-0\"},[_c('v-textarea',{ref:\"messageInput\",staticClass:\"input-area-text\",attrs:{\"height\":\"undefined\",\"full-width\":\"\",\"auto-grow\":\"\",\"rows\":\"1\",\"no-resize\":\"\",\"placeholder\":\"Your message...\",\"hide-details\":\"\",\"background-color\":\"white\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return (function () {\n              _vm.sendCurrentTextMessage();\n            })($event)}},model:{value:(_vm.currentInput),callback:function ($$v) {_vm.currentInput=$$v},expression:\"currentInput\"}})],1),(_vm.editedEvent || _vm.replyToEvent)?_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"color\":\"black\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelEditReply($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"cancel\")])],1)],1):_vm._e(),(!_vm.currentInput || _vm.currentInput.length == 0 || _vm.showRecorder)?_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('v-btn',{directives:[{name:\"blur\",rawName:\"v-blur\"},{name:\"longTap\",rawName:\"v-longTap:250\",value:([_vm.showRecordingUI, _vm.startRecording]),expression:\"[showRecordingUI, startRecording]\",arg:\"250\"}],ref:\"mic_button\",staticClass:\"mic-button\",staticStyle:{\"z-index\":\"10\"},attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"disabled\":!_vm.canRecordAudio}},[_c('v-icon',{attrs:{\"color\":_vm.showRecorder ? 'white' : 'black'}},[_vm._v(\"mic\")])],1)],1):_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"color\":\"black\",\"disabled\":_vm.sendButtonDisabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.sendCurrentTextMessage($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(_vm._s(_vm.editedEvent ? \"save\" : \"arrow_upward\"))])],1)],1),(_vm.config.useShortCodeStickers)?_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[(!_vm.showRecorder)?_c('v-btn',{attrs:{\"icon\":\"\",\"large\":\"\",\"color\":\"black\",\"disabled\":_vm.attachButtonDisabled},on:{\"click\":_vm.showStickerPicker}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"face\")])],1):_vm._e()],1):_vm._e(),_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('label',{ref:\"attachmentLabel\",attrs:{\"icon\":\"\",\"flat\":\"\"}},[(!_vm.showRecorder)?_c('v-btn',{attrs:{\"icon\":\"\",\"large\":\"\",\"color\":\"black\",\"disabled\":_vm.attachButtonDisabled},on:{\"click\":_vm.showAttachmentPicker}},[_c('v-icon',{attrs:{\"x-large\":\"\"}},[_vm._v(\"add_circle_outline\")])],1):_vm._e(),_c('input',{ref:\"attachment\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"name\":\"attachment\",\"accept\":\"image/*|audio/*|video/*|application/pdf\"},on:{\"change\":function($event){return _vm.handlePickedAttachment($event)}}})],1)])],1),_c('VoiceRecorder',{attrs:{\"micButtonRef\":_vm.$refs.mic_button,\"ptt\":_vm.showRecorderPTT,\"show\":_vm.showRecorder},on:{\"close\":function($event){_vm.showRecorder = false},\"file\":_vm.onVoiceRecording}})],1):_vm._e(),(_vm.currentImageInputPath)?_c('div',[_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.currentImageInputPath),callback:function ($$v) {_vm.currentImageInputPath=$$v},expression:\"currentImageInputPath\"}},[_c('v-card',{staticClass:\"ma-0 pa-0\"},[_c('v-card-text',{staticClass:\"ma-0 pa-0\"},[(_vm.currentImageInput)?_c('v-img',{staticStyle:{\"max-height\":\"50vh\"},attrs:{\"aspect-ratio\":1,\"src\":_vm.currentImageInput,\"contain\":\"\"}}):_vm._e(),(_vm.currentSendError)?_c('div',[_vm._v(_vm._s(_vm.currentSendError))]):_c('div',[_vm._v(_vm._s(_vm.currentSendProgress))])],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.cancelSendAttachment}},[_vm._v(\"Cancel\")]),(_vm.currentSendShowSendButton)?_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\",\"disabled\":_vm.currentSendOperation != null},on:{\"click\":_vm.sendAttachment}},[_vm._v(\"Send\")]):_vm._e()],1)],1)],1)],1):_vm._e(),_c('MessageOperationsBottomSheet',{ref:\"messageOperationsSheet\",attrs:{\"xv-show\":\"showEmojiPicker\"}},[(_vm.selectedEvent)?_c('MessageOperationsPicker',{attrs:{\"event\":_vm.selectedEvent},on:{\"close\":function($event){_vm.showEmojiPicker = false},\"addreaction\":_vm.addReaction,\"addquickreaction\":_vm.addQuickReaction,\"addreply\":function($event){return _vm.addReply(_vm.selectedEvent)},\"edit\":function($event){return _vm.edit(_vm.selectedEvent)},\"redact\":function($event){return _vm.redact(_vm.selectedEvent)},\"download\":function($event){return _vm.download(_vm.selectedEvent)}}}):_vm._e(),_c('VEmojiPicker',{ref:\"emojiPicker\",staticStyle:{\"width\":\"100%\"},on:{\"select\":_vm.emojiSelected}})],1),_c('StickerPickerBottomSheet',{ref:\"stickerPickerSheet\",staticStyle:{\"z-index\":\"10\"},on:{\"selectSticker\":_vm.sendSticker}}),_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.showNotAllowedForGuests),callback:function ($$v) {_vm.showNotAllowedForGuests=$$v},expression:\"showNotAllowedForGuests\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"You are logged in as a guest\")]),_c('v-card-text',[_c('div',[_vm._v(\"Unfortunately guests are not allowed to upload files.\")])]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.showNotAllowedForGuests = false}}},[_vm._v(\"Ok\")])],1)],1)],1),(!_vm.initialLoadDone || _vm.loading)?_c('v-container',{staticStyle:{\"position\":\"absolute\",\"background-color\":\"rgba(0,0,0,0.2)\"},attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"text-center\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1)],1)],1):_vm._e(),_c('RoomInfoBottomSheet',{ref:\"roomInfoSheet\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"bubble\"},[_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}}),(_vm.inReplyToText)?_c('div',{staticClass:\"original-message\"},[_c('div',{staticClass:\"original-message-sender\"},[_vm._v(\" \"+_vm._s(_vm.inReplyToSender || \"Someone\")+\" said: \")]),_c('div',{staticClass:\"original-message-text\",domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.inReplyToText)))}})]):_vm._e(),_c('div',{staticClass:\"message\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.messageText)))}}),(_vm.event.replacingEventId())?_c('span',{staticClass:\"edit-marker\"},[_vm._v(\"(edited)\")]):_vm._e()])],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reactions),expression:\"reactions\"}],staticClass:\"quick-reaction-container\"},_vm._l((_vm.reactionMap),function(value,name){return _c('span',{key:name,class:{'quick-reaction':true,'sent':value.includes(_vm.$matrix.currentUserId)},on:{\"mousedown\":function($event){return _vm.onClickEmoji(name)}}},[_vm._v(\" \"+_vm._s(name)+\" \"),_c('span',{staticClass:\"quick-reaction-count\"},[_vm._v(_vm._s(value.length))])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"quick-reaction-container\" v-show=\"reactions\">\n    <span :class=\"{'quick-reaction':true,'sent':value.includes($matrix.currentUserId)}\" v-for=\"(value, name) in reactionMap\" :key=\"name\" @mousedown=\"onClickEmoji(name)\">\n      {{ name }} <span class=\"quick-reaction-count\">{{ value.length }}</span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    event: {\n      type: Object,\n      default: function () {\n        return {}\n      }\n    },\n    reactions: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    }\n  },\n  data() {\n    return {\n      reactionMap: {}\n    }\n  },\n  beforeDestroy() {\n    if (this.reactions) {\n      this.reactions.off('Relations.add', this.onAddRelation);\n    }\n  },\n  methods: {\n    onClickEmoji(emoji) {\n      this.$bubble('send-quick-reaction', {reaction:emoji, event:this.event});\n    },\n    onAddRelation(ignoredevent) {\n      this.processReactions();\n    },\n    processReactions() {\n        var reactionMap = {};\n      if (this.reactions && this.reactions._eventsCount > 0) {\n        const relations = this.reactions.getRelations();\n        for (const r of relations) {\n          const emoji = r.getRelation().key;\n          const sender = r.getSender();\n          if (reactionMap[emoji]) {\n            const array = reactionMap[emoji];\n            if (!array.includes(sender)) {\n              array.push(sender)\n            }\n          } else {\n            reactionMap[emoji] = [sender];\n          }\n        }\n      }\n      this.reactionMap = reactionMap;\n    }\n  },\n  watch: {\n     reactions: {\n       handler(newValue, oldValue) {\n         if (oldValue) {\n           oldValue.off('Relations.add', this.onAddRelation);\n         }\n         if (newValue) {\n          newValue.on('Relations.add', this.onAddRelation);           \n         }\n         this.processReactions();\n      },\n      immediate: true\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuickReactions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuickReactions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QuickReactions.vue?vue&type=template&id=3b5eee3e&\"\nimport script from \"./QuickReactions.vue?vue&type=script&lang=js&\"\nexport * from \"./QuickReactions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QuickReactions.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import QuickReactions from './QuickReactions.vue';\nvar linkify = require('linkifyjs');\nvar linkifyHtml = require('linkifyjs/html');\nlinkify.options.defaults.className = \"link\";\nlinkify.options.defaults.target = null;\n\nexport default {\n  components: {\n    QuickReactions\n  },\n  props: {\n    room: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n    event: {\n      type: Object,\n      default: function () {\n        return {}\n      }\n    },\n    nextEvent: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n    reactions: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n    timelineSet: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n  },\n  data() {\n    return {\n      inReplyToEvent: null,\n      inReplyToSender: null\n    }\n  },\n  mounted() {\n    const relatesTo = this.event.getWireContent()['m.relates_to'];\n    if (relatesTo && relatesTo['m.in_reply_to'])\n    {\n      // Can we find the original message?\n      const originalEventId = relatesTo['m.in_reply_to'].event_id;\n      if (originalEventId && this.timelineSet) {\n        const originalEvent = this.timelineSet.findEventById(originalEventId);\n        if (originalEvent) {\n          this.inReplyToEvent = originalEvent;\n          this.inReplyToSender = this.messageEventDisplayName(originalEvent);\n        }\n      }\n    }\n  },\n  computed: {\n    incoming() {\n      return this.event && this.event.getSender() != this.$matrix.currentUserId;\n    },\n\n    /**\n     * Don't show sender and time if the next event is within 2 minutes and also from us (= back to back messages)\n     */\n    showSenderAndTime() {\n      if (this.nextEvent && this.nextEvent.getSender() == this.event.getSender()) {\n        const ts1 = this.nextEvent.event.origin_server_ts;\n        const ts2 = this.event.event.origin_server_ts;\n        return (ts1 - ts2) < (2 * 60 * 1000); // less than 2 minutes\n      }\n      return true;\n    },\n\n    inReplyToText() {\n      const relatesTo = this.event.getWireContent()['m.relates_to'];\n      if (relatesTo && relatesTo['m.in_reply_to'])\n      {\n        const content = this.event.getContent();\n\n        const lines = content.body.split('\\n').reverse();\n        while (lines.length && !lines[0].startsWith('> ')) lines.shift();\n        // Reply fallback has a blank line after it, so remove it to prevent leading newline\n        if (lines[0] === '') lines.shift();\n        const text = lines\n        .map((item) => { return item.replace(/^> (<.*> )?/g, ''); })\n        .reverse()\n        .join('\\n');\n        if (text) {\n          return text;\n        }\n\n        if (this.inReplyToEvent) {\n          var c = this.inReplyToEvent.getContent();\n          return c.body;\n        }\n\n        // We don't have the original text (at the moment at least)\n        return  \"<original text>\";\n      }\n      return null;\n    },\n\n    messageText() {\n      const relatesTo = this.event.getWireContent()['m.relates_to'];\n      if (relatesTo && relatesTo['m.in_reply_to'])\n      {\n        const content = this.event.getContent();\n\n        // Remove the new text and strip \"> \" from the old original text\n        const lines = content.body.split('\\n');\n        while (lines.length && lines[0].startsWith('> ')) lines.shift();\n        // Reply fallback has a blank line after it, so remove it to prevent leading newline\n        if (lines[0] === '') lines.shift();\n        return lines.join('\\n');\n      }\n      return this.event.getContent().body;\n    },\n\n    /**\n     * Classes to set for the message. Currently only for \"messageIn\", TODO: - detect messageIn or messageOut.\n     */\n  \n    messageClasses() {\n      return {'messageIn':true,'from-admin':this.senderIsAdminOrModerator(this.event)}\n    },\n\n    userAvatar() {\n      if (!this.$matrix.userAvatar) {\n        return null;\n      }\n      return this.$matrix.matrixClient.mxcUrlToHttp(\n        this.$matrix.userAvatar,\n        80,\n        80,\n        \"scale\",\n        true\n      );\n    },\n\n    userAvatarLetter() {\n      if (!this.$matrix.currentUser) {\n        return null;\n      }\n      return (this.$matrix.currentUserDisplayName || this.$matrix.currentUserId.substring(1)).substring(0, 1).toUpperCase();\n    }\n  },\n  methods: {\n    ownAvatarClicked() {\n      this.$emit(\"own-avatar-clicked\", {event: this.event});\n    },\n\n    showContextMenu(buttonRef) {\n      this.$emit(\"context-menu\", {event: this.event,anchor: buttonRef});\n    },\n\n    /**\n     * Get a display name given an event.\n     */\n    stateEventDisplayName(event) {\n      if (event.getSender() == this.$matrix.currentUserId) {\n        return \"You\";\n      }\n      if (this.room) {\n        const member = this.room.getMember(event.getSender());\n        if (member) {\n          return member.name;\n        }\n      }\n      return event.getContent().displayname || event.event.state_key;\n    },\n\n    messageEventDisplayName(event) {\n      return this.stateEventDisplayName(event);\n    },\n\n    messageEventAvatar(event) {\n      if (this.room) {\n        const member = this.room.getMember(event.getSender());\n        if (member) {\n          return member.getAvatarUrl(\n            this.$matrix.matrixClient.getHomeserverUrl(),\n            40,\n            40,\n            \"scale\",\n            true\n          );\n        }\n      }\n      return null;\n    },\n\n    /**\n     * Return true if the event sender has a powel level > 0, e.g. is moderator or admin of some sort.\n     */\n    senderIsAdminOrModerator(event) {\n      if (this.room) {\n        const member = this.room.getMember(event.getSender());\n        if (member) {\n          return member.powerLevel > 0;\n        }\n      }\n      return false;\n    },\n\n    formatTime(time) {\n      const date = new Date();\n      date.setTime(time);\n\n      const today = new Date();\n      if (\n        date.getDate() == today.getDate() &&\n        date.getMonth() == today.getMonth() &&\n        date.getFullYear() == today.getFullYear()\n      ) {\n        // For today, skip the date part\n        return date.toLocaleTimeString();\n      }\n      return date.toLocaleString();\n    },\n\n    linkify(text) {\n      return linkifyHtml(text);\n    }\n  },\n}","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n\n    <div class=\"bubble\">\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n      <div class=\"original-message\" v-if=\"inReplyToText\">\n        <div class=\"original-message-sender\">\n          {{ inReplyToSender || \"Someone\" }} said:\n        </div>\n        <div class=\"original-message-text\" v-html=\"linkify($sanitize(inReplyToText))\" />\n      </div>\n      <div class=\"message\">\n        <span v-html=\"linkify($sanitize(messageText))\" />\n        <span class=\"edit-marker\" v-if=\"event.replacingEventId()\"\n          >(edited)</span\n        >\n      </div>\n      <!-- <div>{{ JSON.stringify(event) }}</div> -->\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingText.vue?vue&type=template&id=7df95071&\"\nimport script from \"./MessageIncomingText.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingText.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingText.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"bubble\"},[_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}}),(_vm.inReplyToText)?_c('div',{staticClass:\"original-message\"},[_c('div',{staticClass:\"original-message-sender\"},[_vm._v(\" \"+_vm._s(_vm.inReplyToSender || \"Someone\")+\" said: \")]),_c('div',{staticClass:\"original-message-text\",domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.inReplyToText)))}})]):_vm._e(),_c('div',{staticClass:\"message\"},[_c('span',[_vm._v(\"File: \")]),_c('span',{staticStyle:{\"cursor\":\"pointer\"},domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.messageText)))},on:{\"click\":function($event){$event.stopPropagation();return _vm.$emit('download')}}}),(_vm.event.replacingEventId())?_c('span',{staticClass:\"edit-marker\"},[_vm._v(\"(edited)\")]):_vm._e()])],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n\n    <div class=\"bubble\">\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n      <div class=\"original-message\" v-if=\"inReplyToText\">\n        <div class=\"original-message-sender\">\n          {{ inReplyToSender || \"Someone\" }} said:\n        </div>\n        <div class=\"original-message-text\" v-html=\"linkify($sanitize(inReplyToText))\" />\n      </div>\n      <div class=\"message\">\n        <span>File: </span>\n        <span style=\"cursor:pointer\" @click.stop=\"$emit('download')\" v-html=\"linkify($sanitize(messageText))\" />\n        <span class=\"edit-marker\" v-if=\"event.replacingEventId()\"\n          >(edited)</span\n        >\n      </div>\n      <!-- <div>{{ JSON.stringify(event) }}</div> -->\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingFile.vue?vue&type=template&id=21edacef&\"\nimport script from \"./MessageIncomingFile.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingFile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingFile.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"bubble image-bubble\"},[_c('v-img',{ref:\"image\",attrs:{\"aspect-ratio\":16 / 9,\"src\":_vm.src,\"cover\":_vm.cover,\"contain\":_vm.contain}}),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n    <div class=\"bubble image-bubble\">\n      <v-img :aspect-ratio=\"16 / 9\" ref=\"image\" :src=\"src\" :cover=\"cover\" :contain=\"contain\" />\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport util from \"../../plugins/utils\";\n\nexport default {\n  mixins: [messageMixin],\n  data() {\n    return {\n      src: null,\n      cover: true,\n      contain: false,\n    };\n  },\n  mounted() {\n    //console.log(\"Mounted with event:\", JSON.stringify(this.event.getContent()));\n    const width = this.$refs.image.$el.clientWidth;\n    const height = (width * 9) / 16;\n    util\n      .getThumbnail(this.$matrix.matrixClient, this.event, width, height)\n      .then((url) => {\n        const info = this.event.getContent().info;\n        // JPEGs use cover, PNG and GIF ect contain. This is because PNG and GIF are expected to\n        // be stickers and small emoji type things.\n        if (info && info.mimetype && info.mimetype.startsWith(\"image/jp\")) {\n          this.cover = true;\n          this.contain = false;\n        } else {\n          this.cover = false;\n          this.contain = true;\n        }\n        this.src = url;\n      })\n      .catch((err) => {\n        console.log(\"Failed to fetch thumbnail: \", err);\n      });\n  },\n  beforeDestroy() {\n    if (this.src) {\n      const objectUrl = this.src;\n      this.src = null;\n      URL.revokeObjectURL(objectUrl);\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingImage.vue?vue&type=template&id=624355d1&\"\nimport script from \"./MessageIncomingImage.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingImage.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"audio-bubble\"},[_c('audio',{attrs:{\"controls\":\"\",\"src\":_vm.src}},[_vm._v(\"Audio file\")]),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import util from \"../../plugins/utils\";\n\nexport default {\n  data() {\n    return {\n      src: null,\n      downloadProgress: null\n    }\n  },\n  mounted() {\n    console.log(\"Mounted with event:\", JSON.stringify(this.event.getContent()))\n    util\n      .getAttachment(this.$matrix.matrixClient, this.event, (progress) => {\n        this.downloadProgress = progress;\n        console.log(\"Progress: \" + progress);\n      })\n      .then((url) => {\n        this.src = url;\n      })\n      .catch((err) => {\n        console.log(\"Failed to fetch attachment: \", err);\n      });\n  },\n  beforeDestroy() {\n    if (this.src) {\n      const objectUrl = this.src;\n      this.src = null;\n      URL.revokeObjectURL(objectUrl);\n    }\n  },\n}","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n    <div class=\"audio-bubble\">\n      <audio controls :src=\"src\">Audio file</audio>\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport attachmentMixin from \"./attachmentMixin\";\n\nexport default {\n  mixins: [messageMixin, attachmentMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingAudio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingAudio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingAudio.vue?vue&type=template&id=61f9f6fc&\"\nimport script from \"./MessageIncomingAudio.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingAudio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingAudio.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"bubble image-bubble\"},[_c('v-responsive',{attrs:{\"aspect-ratio\":16 / 9,\"src\":_vm.src}},[_c('video',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":_vm.src,\"controls\":\"\"}},[_vm._v(\"Video file\")]),(_vm.downloadProgress)?_c('div',{staticClass:\"download-overlay\"},[_c('div',{staticClass:\"text-center download-text\"},[_vm._v(_vm._s(_vm.downloadProgress)+\"% downloaded\")])]):_vm._e()]),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n    <div class=\"bubble image-bubble\">\n      <v-responsive :aspect-ratio=\"16 / 9\" :src=\"src\">\n        <video :src=\"src\" controls style=\"width:100%;height:100%\">Video file</video>\n        <div v-if=\"downloadProgress\" class=\"download-overlay\">\n          <div class=\"text-center download-text\">{{ downloadProgress }}% downloaded</div>\n        </div>\n      </v-responsive>\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport attachmentMixin from \"./attachmentMixin\";\n\nexport default {\n  mixins: [messageMixin, attachmentMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingVideo.vue?vue&type=template&id=8fa094c4&\"\nimport script from \"./MessageIncomingVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingVideo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VResponsive } from 'vuetify/lib/components/VResponsive';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VResponsive})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"bubble sticker-bubble\"},[_c('v-img',{ref:\"image\",attrs:{\"aspect-ratio\":16 / 9,\"src\":_vm.src,\"cover\":_vm.cover,\"contain\":_vm.contain}}),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const stickerPacks = {};\nstickerPacks.ordering = [];\nconst stickerCodeMap = {};\n\ntry {\n    const stickerPackInfo = require(\"!!raw-loader!@/assets/stickers/order.txt\").default;\n    const packInfo = stickerPackInfo.split(\"\\n\");\n    for (let i = 0; i < packInfo.length; i++) {\n        const pack = packInfo[i];\n        if (pack && pack.length > 0 && !pack.startsWith('#')) {\n            stickerPacks[pack] = [];\n            stickerPacks.ordering.push(pack);\n        }\n    }\n} catch (ignorederr) {\n    //\n}\n\nfunction importAll(r) {\n    return r.keys().map(res => {\n        // Remove\"./\"\n        const parts = res.split(\"/\");\n        const pack = parts[1];\n        const sticker = parts[2].split(\".\")[0];\n        const image = r(res);\n        if (stickerPacks[pack] !== undefined) {\n            stickerPacks[pack].push({ image: image, name: sticker });\n            stickerCodeMap[\":\" + pack + \"-\" + sticker + \":\"] = image;\n        }\n    });\n}\nimportAll(require.context('@/assets/stickers/', true, /\\.png$/));\n\nclass Stickers {\n    constructor() {\n    }\n\n    isStickerShortcode(messageBody) {\n        if (messageBody && messageBody.startsWith(\":\") && messageBody.startsWith(\":\") && messageBody.length >= 5) {\n            const image = this.getStickerImage(messageBody);\n            return image != undefined && image != null;\n        }\n        return false;\n    }\n\n    getStickerShortcode(pack, sticker) {\n        return \":\" + pack + \"-\" + sticker.name + \":\";\n    }\n\n    getPacks() {\n        return stickerPacks.ordering;\n    }\n\n    getStickerImage(messageBody) {\n        if (!messageBody) return null;\n        if (messageBody.length < 5 || !messageBody.startsWith(\":\") || !messageBody.endsWith(\":\")) return null;\n        return stickerCodeMap[messageBody];\n    }\n\n    stickersInPack(pack) {\n        return stickerPacks[pack];\n    }\n}\n\nvar gStickers = new Stickers();\nexport default gStickers;\n","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n    <div class=\"bubble sticker-bubble\">\n      <v-img :aspect-ratio=\"16 / 9\" ref=\"image\" :src=\"src\" :cover=\"cover\" :contain=\"contain\" />\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport stickers from \"../../plugins/stickers\";\n\nexport default {\n  mixins: [messageMixin],\n  data() {\n    return {\n      src: null,\n      cover: false,\n      contain: true,\n    };\n  },\n  mounted() {\n    //console.log(\"Mounted with event:\", JSON.stringify(this.event.getContent()));\n    this.src = stickers.getStickerImage(this.event.getContent().body)\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingSticker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingSticker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingSticker.vue?vue&type=template&id=1220df1a&\"\nimport script from \"./MessageIncomingSticker.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingSticker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingSticker.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"bubble\"},[_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}}),(_vm.inReplyToText)?_c('div',{staticClass:\"original-message\"},[_c('div',{staticClass:\"original-message-sender\"},[_vm._v(\" \"+_vm._s(_vm.inReplyToSender || \"Someone\")+\" said: \")]),_c('div',{staticClass:\"original-message-text\",domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.inReplyToText)))}})]):_vm._e(),_c('div',{staticClass:\"message\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.messageText)))}}),(_vm.event.replacingEventId())?_c('span',{staticClass:\"edit-marker\"},[_vm._v(\"(edited)\")]):_vm._e()])],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")]),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"bubble\">\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n      <div class=\"original-message\" v-if=\"inReplyToText\">\n        <div class=\"original-message-sender\">\n          {{ inReplyToSender || \"Someone\" }} said:\n        </div>\n        <div class=\"original-message-text\" v-html=\"linkify($sanitize(inReplyToText))\" />\n      </div>\n\n      <div class=\"message\">\n        <span v-html=\"linkify($sanitize(messageText))\" />\n        <span class=\"edit-marker\" v-if=\"event.replacingEventId()\"\n          >(edited)</span\n        >\n      </div>\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n    <div class=\"senderAndTime\">\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n      <div class=\"status\">{{ event.status }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingText.vue?vue&type=template&id=0c3d1b40&\"\nimport script from \"./MessageOutgoingText.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingText.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingText.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"bubble\"},[_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}}),(_vm.inReplyToText)?_c('div',{staticClass:\"original-message\"},[_c('div',{staticClass:\"original-message-sender\"},[_vm._v(\" \"+_vm._s(_vm.inReplyToSender || \"Someone\")+\" said: \")]),_c('div',{staticClass:\"original-message-text\",domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.inReplyToText)))}})]):_vm._e(),_c('div',{staticClass:\"message\"},[_c('span',[_vm._v(\"File: \")]),_c('span',{staticStyle:{\"cursor\":\"pointer\"},domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.messageText)))},on:{\"click\":function($event){$event.stopPropagation();return _vm.$emit('download')}}}),(_vm.event.replacingEventId())?_c('span',{staticClass:\"edit-marker\"},[_vm._v(\"(edited)\")]):_vm._e()])],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")]),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"bubble\">\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n      <div class=\"original-message\" v-if=\"inReplyToText\">\n        <div class=\"original-message-sender\">\n          {{ inReplyToSender || \"Someone\" }} said:\n        </div>\n        <div class=\"original-message-text\" v-html=\"linkify($sanitize(inReplyToText))\" />\n      </div>\n\n      <div class=\"message\">\n        <span>File: </span>\n        <span style=\"cursor:pointer\" @click.stop=\"$emit('download')\" v-html=\"linkify($sanitize(messageText))\" />\n        <span class=\"edit-marker\" v-if=\"event.replacingEventId()\"\n          >(edited)</span\n        >\n      </div>\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n    <div class=\"senderAndTime\">\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n      <div class=\"status\">{{ event.status }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingFile.vue?vue&type=template&id=315d8ae0&\"\nimport script from \"./MessageOutgoingFile.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingFile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingFile.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"bubble image-bubble\"},[_c('v-img',{ref:\"image\",attrs:{\"aspect-ratio\":16 / 9,\"src\":_vm.src,\"cover\":_vm.cover,\"contain\":_vm.contain}}),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \"),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"bubble image-bubble\">\n      <v-img :aspect-ratio=\"16 / 9\" ref=\"image\" :src=\"src\" :cover=\"cover\" :contain=\"contain\" />\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <div class=\"senderAndTime\">\n      <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n        <div class=\"status\">{{ event.status }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport util from \"../../plugins/utils\";\n\nexport default {\n  mixins: [messageMixin],\n  data() {\n    return {\n      src: null,\n      cover: true,\n      contain: false,\n    };\n  },\n  mounted() {\n    const width = this.$refs.image.$el.clientWidth;\n    const height = (width * 9) / 16;\n    util\n      .getThumbnail(this.$matrix.matrixClient, this.event, width, height)\n      .then((url) => {\n        const info = this.event.getContent().info;\n        // JPEGs use cover, PNG and GIF ect contain. This is because PNG and GIF are expected to\n        // be stickers and small emoji type things.\n        if (info && info.mimetype && info.mimetype.startsWith(\"image/jp\")) {\n          this.cover = true;\n          this.contain = false;\n        } else {\n          this.cover = false;\n          this.contain = true;\n        }\n        this.src = url;\n      })\n      .catch((err) => {\n        console.log(\"Failed to fetch thumbnail: \", err);\n      });\n  },\n  beforeDestroy() {\n    if (this.src) {\n      const objectUrl = this.src;\n      this.src = null;\n      URL.revokeObjectURL(objectUrl);\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingImage.vue?vue&type=template&id=4f8f9d77&\"\nimport script from \"./MessageOutgoingImage.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingImage.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"audio-bubble\"},[_c('audio',{attrs:{\"controls\":\"\",\"src\":_vm.src}},[_vm._v(\"Audio file\")]),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")]),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"audio-bubble\">\n      <audio controls :src=\"src\">Audio file</audio>\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <div class=\"senderAndTime\">\n      <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n      <div class=\"status\">{{ event.status }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport attachmentMixin from \"./attachmentMixin\";\n\nexport default {\n  mixins: [messageMixin, attachmentMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingAudio.vue?vue&type=template&id=0bfa7e3d&\"\nimport script from \"./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingAudio.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"bubble image-bubble\"},[_c('v-responsive',{staticClass:\"ma-0 pa-0\",attrs:{\"aspect-ratio\":16 / 9}},[_c('video',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":_vm.src,\"controls\":\"\"}},[_vm._v(\"Video file\")])]),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")]),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"bubble image-bubble\">\n      <v-responsive :aspect-ratio=\"16 / 9\" class=\"ma-0 pa-0\">\n        <video :src=\"src\" controls style=\"width:100%;height:100%\">Video file</video>\n      </v-responsive>\n            <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <div class=\"senderAndTime\">\n      <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n      <div class=\"status\">{{ event.status }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport attachmentMixin from \"./attachmentMixin\";\n\nexport default {\n  mixins: [messageMixin, attachmentMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingVideo.vue?vue&type=template&id=7d90c47d&\"\nimport script from \"./MessageOutgoingVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingVideo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VResponsive } from 'vuetify/lib/components/VResponsive';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VResponsive})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"bubble sticker-bubble\"},[_c('v-img',{ref:\"image\",attrs:{\"aspect-ratio\":16 / 9,\"src\":_vm.src,\"cover\":_vm.cover,\"contain\":_vm.contain}}),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \"),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"bubble sticker-bubble\">\n      <v-img :aspect-ratio=\"16 / 9\" ref=\"image\" :src=\"src\" :cover=\"cover\" :contain=\"contain\" />\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <div class=\"senderAndTime\">\n      <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n        <div class=\"status\">{{ event.status }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport stickers from \"../../plugins/stickers\";\n\nexport default {\n  mixins: [messageMixin],\n  data() {\n    return {\n      src: null,\n      cover: false,\n      contain: true,\n    };\n  },\n  mounted() {\n    this.src = stickers.getStickerImage(this.event.getContent().body)\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingSticker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingSticker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingSticker.vue?vue&type=template&id=8fe77b90&\"\nimport script from \"./MessageOutgoingSticker.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingSticker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingSticker.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" joined the chat \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact joined the chat -->\n  <div class=\"messageJoin\">\n    {{ stateEventDisplayName(event) }} joined the chat\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactJoin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactJoin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactJoin.vue?vue&type=template&id=04879178&\"\nimport script from \"./ContactJoin.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactJoin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactJoin.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" left the chat \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact left the chat -->\n  <div class=\"messageJoin\">\n    {{ stateEventDisplayName(event) }} left the chat\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactLeave.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactLeave.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactLeave.vue?vue&type=template&id=7c4af88a&\"\nimport script from \"./ContactLeave.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactLeave.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactLeave.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[_vm._v(\" \"+_vm._s(_vm.event.getContent().displayname || _vm.stateEventDisplayName(_vm.event))+\" was invited to the chat... \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact invited to the chat -->\n  <div class=\"messageJoin\">\n    {{ event.getContent().displayname || stateEventDisplayName(event) }} was invited to the chat...\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactInvited.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactInvited.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactInvited.vue?vue&type=template&id=9ab69346&\"\nimport script from \"./ContactInvited.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactInvited.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactInvited.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[(_vm.displayNameChange)?_c('div',[_vm._v(\" \"+_vm._s(_vm.changer)+\" changed display name to \"+_vm._s(_vm.event.getContent().displayname)+\" \")]):_vm._e(),(_vm.avatarChange)?_c('div',[_vm._v(\" \"+_vm._s(_vm.changer)+\" changed the avatar \")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact joined the chat -->\n  <div class=\"messageJoin\">\n    <div v-if=\"displayNameChange\">\n    {{ changer }} changed display name to {{ event.getContent().displayname }}\n    </div>\n    <div v-if=\"avatarChange\">\n    {{ changer }} changed the avatar\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n  computed: {\n    displayNameChange() {\n      const content = this.event.getContent();\n      const prevContent = this.event.getPrevContent();\n      return content.displayname != prevContent.displayname;\n    },\n    avatarChange() {\n      const content = this.event.getContent();\n      const prevContent = this.event.getPrevContent();\n      return content.avatar_url != prevContent.avatar_url;\n    },\n    changer() {\n      if (this.event.getSender() == this.$matrix.currentUserId) {\n        return \"You\";\n      }\n      if (this.displayNameChange) {\n        return this.event.getPrevContent().displayname;\n      }\n      return this.stateEventDisplayName(this.event);\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactChanged.vue?vue&type=template&id=1c6fc18c&\"\nimport script from \"./ContactChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" changed room name to \"+_vm._s(_vm.event.getContent().name)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM NAME CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} changed room name to\n    {{ event.getContent().name }}\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomNameChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomNameChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomNameChanged.vue?vue&type=template&id=3cc25dd6&\"\nimport script from \"./RoomNameChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomNameChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomNameChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" changed topic to \"+_vm._s(_vm.event.getContent().topic)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM TOPIC CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} changed topic to\n    {{ event.getContent().topic }}\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTopicChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTopicChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomTopicChanged.vue?vue&type=template&id=5a4aeb60&\"\nimport script from \"./RoomTopicChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomTopicChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomTopicChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" changed the room avatar \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM AVATAR CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} changed the room avatar\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomAvatarChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomAvatarChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomAvatarChanged.vue?vue&type=template&id=cae4f458&\"\nimport script from \"./RoomAvatarChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomAvatarChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomAvatarChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" made room history \"+_vm._s(_vm.history(_vm.event))+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM AVATAR CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} made room history {{ history(event) }}\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n  methods: {\n    history(event) {\n      const visibility = event.getContent().history_visibility;\n      switch (visibility) {\n        case \"world_readable\":\n          return \"readable by anyone\";\n        case \"shared\":\n          return \"readable to all members in the room\";\n        case \"invited\":\n          return \"readable to members from when they were invited\";\n        case \"joined\":\n          return \"readable to members from when they joined\";\n      }\n      return visibility;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomHistoryVisibility.vue?vue&type=template&id=92da6c20&\"\nimport script from \"./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomHistoryVisibility.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" made the room \"+_vm._s(_vm.joinRule(_vm.event))+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM JOIN RULES CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} made the room {{ joinRule(event) }}\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n  methods: {\n    joinRule(event) {\n      const joinRule = event.getContent().join_rule;\n      switch (joinRule) {\n        case \"invite\":\n          return \"invite only\";\n        case \"public\":\n          return \"public\";\n      }\n      return joinRule;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomJoinRules.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomJoinRules.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomJoinRules.vue?vue&type=template&id=ac533194&\"\nimport script from \"./RoomJoinRules.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomJoinRules.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomJoinRules.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\"Event: \"+_vm._s(_vm.event.getType()))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"statusEvent\">Event: {{ event.getType() }}</div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugEvent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugEvent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DebugEvent.vue?vue&type=template&id=535427f5&\"\nimport script from \"./DebugEvent.vue?vue&type=script&lang=js&\"\nexport * from \"./DebugEvent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DebugEvent.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'message-operations':true,'incoming':_vm.incoming,'outgoing':!_vm.incoming}},[_vm._l((_vm.emojis),function(item,index){return [(index < _vm.maxRecents)?_c('v-btn',{key:item.data,staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addQuickReaction(item.data)}}},[_c('span',{staticClass:\"recent-emoji\"},[_vm._v(_vm._s(item.data))])]):_vm._e()]}),(_vm.incoming)?_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addReply($event)}}},[_c('v-icon',[_vm._v(\"reply\")])],1):_vm._e(),_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.more($event)}}},[_c('v-icon',[_vm._v(\"more_horiz\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nexport default {\n  computed: {\n    isEditable() {\n      return !this.incoming && this.event.getContent().msgtype == \"m.text\";\n    },\n    isDownloadable() {\n      const msgtype = this.event.getContent().msgtype;\n      return ['m.video','m.audio','m.image','m.file'].includes(msgtype);\n    },\n    isRedactable() {\n      const room = this.$matrix.matrixClient.getRoom(this.event.getRoomId());\n      if (room && room.currentState && room.currentState.maySendRedactionForEvent(this.event, this.$matrix.currentUserId)) {\n        return true;\n      }\n      return false;\n    }\n  },\n  methods: {\n    addReaction() {\n      this.$emit(\"close\");\n      this.$emit(\"addreaction\", {event:this.event});\n    },\n    addQuickReaction(emoji) {\n      this.$emit(\"close\");\n      this.$emit(\"addquickreaction\", {event:this.event,emoji:emoji});\n    },\n    addReply() {\n      this.$emit(\"close\");\n      this.$emit(\"addreply\", {event:this.event});\n    },\n    edit() {\n      this.$emit(\"close\");\n      this.$emit(\"edit\", {event:this.event});\n    },\n    redact() {\n      this.$emit(\"close\");\n      this.$emit(\"redact\", {event:this.event});\n    },\n    download() {\n      this.$emit(\"close\");\n      this.$emit(\"download\", {event:this.event});\n    },\n    more() {\n      this.$emit(\"close\");\n      this.$emit(\"more\", {event:this.event});\n    },\n  }\n}","<template>\n  <div :class=\"{'message-operations':true,'incoming':incoming,'outgoing':!incoming}\">\n    <template v-for=\"(item,index) in emojis\">\n      <v-btn v-if=\"index < maxRecents\" :key=\"item.data\" icon @click.stop=\"addQuickReaction(item.data)\" class=\"ma-0 pa-0\">\n        <span class=\"recent-emoji\" >{{ item.data }}</span>\n      </v-btn>\n    </template>\n    <v-btn v-if=\"incoming\" icon @click.stop=\"addReply\" class=\"ma-0 pa-0\">\n      <v-icon>reply</v-icon>\n    </v-btn>\n    <v-btn icon @click.stop=\"more\" class=\"ma-0 pa-0\">\n      <v-icon>more_horiz</v-icon>\n    </v-btn>  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport messageOperationsMixin from \"./messageOperationsMixin\";\n\nexport default {\n  mixins: [messageMixin, messageOperationsMixin],\n  data() {\n    return {\n      maxRecents: 5\n    }\n  },\n  props: {\n    emojis: {\n      type: Array,\n      default: function () {\n        return []\n      }\n    }\n  },\n  \n  watch: {\n    emojis: {\n      immediate: true,\n      handler(newVal, oldVal) {\n        console.log(\"Emojis changed\", newVal, oldVal);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n\n// .recent-emoji {\n//   width: 30px;\n// }\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperations.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperations.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOperations.vue?vue&type=template&id=25f0e1b0&\"\nimport script from \"./MessageOperations.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOperations.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOperations.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n    'message-operations-picker': true,\n    incoming: _vm.incoming,\n    outgoing: !_vm.incoming,\n  }},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',[(_vm.incoming)?_c('v-col',[_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addReply($event)}}},[_c('v-icon',[_vm._v(\"reply\")])],1),_c('div',[_vm._v(\"Reply\")])],1):_vm._e(),(_vm.isEditable)?_c('v-col',[_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.edit($event)}}},[_c('v-icon',[_vm._v(\"edit\")])],1),_c('div',[_vm._v(\"Edit\")])],1):_vm._e(),(_vm.isRedactable)?_c('v-col',[_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.redact($event)}}},[_c('v-icon',[_vm._v(\"delete\")])],1),_c('div',[_vm._v(\"Delete\")])],1):_vm._e(),(_vm.isDownloadable)?_c('v-col',[_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.download($event)}}},[_c('v-icon',[_vm._v(\"get_app\")])],1),_c('div',[_vm._v(\"Download\")])],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    :class=\"{\n      'message-operations-picker': true,\n      incoming: incoming,\n      outgoing: !incoming,\n    }\"\n  >\n    <v-container fluid>\n      <v-row>\n        <v-col v-if=\"incoming\">\n          <v-btn icon @click.stop=\"addReply\" class=\"ma-0 pa-0\">\n            <v-icon>reply</v-icon>\n          </v-btn>\n          <div>Reply</div>\n        </v-col>\n        <v-col v-if=\"isEditable\">\n          <v-btn icon @click.stop=\"edit\" class=\"ma-0 pa-0\">\n            <v-icon>edit</v-icon>\n          </v-btn>\n          <div>Edit</div>\n        </v-col>\n        <v-col v-if=\"isRedactable\">\n          <v-btn icon @click.stop=\"redact\" class=\"ma-0 pa-0\">\n            <v-icon>delete</v-icon>\n          </v-btn>\n          <div>Delete</div>\n        </v-col>\n        <v-col v-if=\"isDownloadable\">\n          <v-btn icon @click.stop=\"download\" class=\"ma-0 pa-0\">\n            <v-icon>get_app</v-icon>\n          </v-btn>\n          <div>Download</div>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport messageOperationsMixin from \"./messageOperationsMixin\";\n\nexport default {\n  mixins: [messageMixin, messageOperationsMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperationsPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperationsPicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOperationsPicker.vue?vue&type=template&id=6c8d3f62&\"\nimport script from \"./MessageOperationsPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOperationsPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOperationsPicker.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VIcon,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.room)?_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"chat-header-row flex-nowrap\"},[_c('v-col',{staticClass:\"chat-header-members text-start ma-0 pa-0\",staticStyle:{\"overflow\":\"hidden\",\"cursor\":\"pointer\"},attrs:{\"cols\":\"auto\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onHeaderClicked($event)}}},[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"size\":\"40\"}},[_c('v-img',{attrs:{\"src\":_vm.room.avatar}})],1)],1),_c('v-col',{staticClass:\"ma-0 pa-0 flex-shrink-1 flex-nowrap\",staticStyle:{\"overflow\":\"hidden\",\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onHeaderClicked($event)}}},[_c('div',{staticClass:\"d-flex flex-nowrap room-name-inline\"},[_vm._v(_vm._s(_vm.room.summary.info.title)+\" \")]),_c('div',{staticClass:\"num-members\"},[_vm._v(_vm._s(_vm.memberCount)+_vm._s(_vm.memberCount > 1 ? \" members\" : \" member\"))])]),_c('v-col',{staticClass:\"text-end ma-0 pa-0\",attrs:{\"cols\":\"auto\"}},[_c('v-btn',{staticClass:\"leave-button\",attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.leaveRoom($event)}}},[_vm._v(\"Leave\")])],1)],1),_c('LeaveRoomDialog',{attrs:{\"show\":_vm.showLeaveConfirmation,\"room\":_vm.room},on:{\"close\":function($event){_vm.showLeaveConfirmation = false}}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid v-if=\"room\">\n    <v-row class=\"chat-header-row flex-nowrap\">\n      <v-col\n      cols=\"auto\"\n        class=\"chat-header-members text-start ma-0 pa-0\"\n        style=\"overflow:hidden;cursor:pointer\" @click.stop=\"onHeaderClicked\"\n      >\n        <v-avatar size=\"40\" class=\"mr-2\">\n          <v-img :src=\"room.avatar\" />\n        </v-avatar>\n      </v-col>\n\n      <v-col class=\"ma-0 pa-0 flex-shrink-1 flex-nowrap\" style=\"overflow:hidden;cursor:pointer\" @click.stop=\"onHeaderClicked\">\n        <div class=\"d-flex flex-nowrap room-name-inline\">{{ room.summary.info.title }} <!--<v-icon>expand_more</v-icon>--></div>\n        <div class=\"num-members\">{{ memberCount }}{{ memberCount > 1 ? \" members\" : \" member\" }}</div>\n      </v-col>\n      <v-col cols=\"auto\" class=\"text-end ma-0 pa-0\">\n        <v-btn text class=\"leave-button\" @click.stop=\"leaveRoom\">Leave</v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- \"REALLY LEAVE?\" dialog -->\n    <LeaveRoomDialog :show=\"showLeaveConfirmation\" :room=\"room\" @close=\"showLeaveConfirmation = false\" />\n\n  </v-container>\n</template>\n\n<script>\nimport LeaveRoomDialog from '../components/LeaveRoomDialog';\n\nexport default {\n  name: \"ChatHeader\",\n  components: {\n    LeaveRoomDialog\n  },\n  data() {\n    return {\n      memberCount: null,\n      showLeaveConfirmation: false\n    };\n  },\n  mounted() {\n    this.$matrix.on(\"Room.timeline\", this.onEvent);\n    this.updateMemberCount();\n  },\n\n  destroyed() {\n    this.$matrix.off(\"Room.timeline\", this.onEvent);\n  },\n\n  computed: {\n    room() {\n      return this.$matrix.currentRoom;\n    },\n  },\n\n  watch: {\n    room: {\n      handler(newVal, ignoredOldVal) {\n        if (newVal) {\n          this.memberCount = newVal.getJoinedMemberCount();\n        } else {\n          this.memberCount = null;\n        }\n      },\n    },\n  },\n\n  methods: {\n    onEvent(event) {\n      if (event.getRoomId() !== this.roomId) {\n        return; // Not for this room\n      }\n      if (event.getType() == \"m.room.member\") {\n        this.updateMemberCount();\n      }\n    },\n    \n    onHeaderClicked() {\n      this.$emit(\"header-click\", {event: this.event});\n    },\n\n    updateMemberCount() {\n      if (!this.room) {\n        this.memberCount = 0;\n      } else {\n        this.memberCount = this.room.getJoinedMemberCount();\n      }\n    },\n\n    leaveRoom() {\n      this.showLeaveConfirmation = true;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatHeader.vue?vue&type=template&id=66fc0f5a&\"\nimport script from \"./ChatHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatHeader.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VBtn,VCol,VContainer,VImg,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"grow\",\"mode\":\"out-in\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],ref:\"vrroot\",class:{ 'voice-recorder': true, ptt: _vm.ptt, row: !_vm.ptt }},[(!_vm.ptt)?_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{staticClass:\"mt-3\",attrs:{\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"4\",\"align\":\"center\"}},[_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == _vm.states.RECORDED),expression:\"state == states.RECORDED\"}],attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.redo($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"undo\")])],1)],1),_c('v-col',{attrs:{\"cols\":\"4\",\"align\":\"center\"}},[(_vm.state == _vm.states.RECORDING)?_c('v-btn',{staticStyle:{\"background-color\":\"white\",\"padding\":\"30px\"},attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.pauseRecording($event)}}},[_c('v-icon',{attrs:{\"color\":\"black\"}},[_vm._v(\"stop\")])],1):(_vm.state == _vm.states.RECORDED)?_c('v-btn',{staticStyle:{\"background-color\":\"#3ae17d\",\"padding\":\"30px\"},attrs:{\"icon\":\"\",\"disabled\":!_vm.recordedFile},on:{\"click\":function($event){$event.stopPropagation();return _vm.send($event)}}},[_c('v-icon',{attrs:{\"color\":\"black\"}},[_vm._v(\"arrow_upward\")])],1):_c('v-btn',{staticStyle:{\"background-color\":\"red\",\"padding\":\"30px\"},attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.startRecording($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"fiber_manual_record\")])],1)],1),_c('v-col',{attrs:{\"cols\":\"4\",\"align\":\"center\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelRecording($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"close\")])],1)],1)],1)],1):_vm._e(),_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('div',{staticClass:\"recording-time\"},[_vm._v(\" \"+_vm._s(_vm.recordingTime)+\" \")])]),(_vm.ptt)?_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"swipe-info\"},[_vm._v(\"<< Swipe to cancel\")])]):_vm._e()],1)],1),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(_vm.willCancel)?_c('div',{staticClass:\"will-cancel\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\"}},[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"delete_outline\")])],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"swipe-info\"},[_vm._v(\"Release to cancel\")])])],1)],1)],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(_vm.recordingLocked)?_c('div',{staticClass:\"locked\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\"}},[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('div',{staticClass:\"recording-time\"},[_vm._v(\" \"+_vm._s(_vm.recordingTime)+\" \")])]),_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-btn',{staticClass:\"swipe-info\",attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelRecording($event)}}},[_vm._v(\"Cancel\")])],1),_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-btn',{staticClass:\"swipe-info\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.stopRecording($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"stop\")])],1)],1)],1)],1)],1):_vm._e()]),(_vm.state == _vm.states.ERROR)?_c('div',{staticClass:\"error\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\"}},[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',[_c('div',{staticClass:\"swipe-info\"},[_vm._v(\" \"+_vm._s(_vm.errorMessage || \"Failed to record audio\")+\" \")])]),_c('v-col',{attrs:{\"align\":\"right\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelRecording($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"close\")])],1)],1)],1)],1)],1):_vm._e(),_c('VoiceRecorderLock',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == _vm.states.RECORDING && _vm.ptt),expression:\"state == states.RECORDING && ptt\"}],style:(_vm.lockButtonStyle),attrs:{\"isLocked\":_vm.recordingLocked}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"vr_lock\",class:{ 'voice-recorder-lock': true, 'locked': _vm.isLocked }},[_c('div',{class:{ 'thumb': true, 'locked': _vm.isLocked }})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <div\n    :class=\"{ 'voice-recorder-lock': true, 'locked': isLocked }\"\n    ref=\"vr_lock\"\n  >\n  <div :class=\"{ 'thumb': true, 'locked': isLocked }\" />\n  </div>\n</div>\n</template>\n<script>\n\nexport default {\n  name: \"VoiceRecorderLock\",\n  props: {\n    isLocked: {\n      type: Boolean,\n      default: function () {\n        return false;\n      },\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorderLock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorderLock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VoiceRecorderLock.vue?vue&type=template&id=47f4b479&\"\nimport script from \"./VoiceRecorderLock.vue?vue&type=script&lang=js&\"\nexport * from \"./VoiceRecorderLock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VoiceRecorderLock.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <transition name=\"grow\" mode=\"out-in\">\n    <div\n      v-show=\"show\"\n      :class=\"{ 'voice-recorder': true, ptt: ptt, row: !ptt }\"\n      ref=\"vrroot\"\n    >\n      <!-- <div style=\"background-color:red;height:60px;width:100%\"/> -->\n      <v-container v-if=\"!ptt\" fluid fill-height>\n        <v-row align=\"center\" class=\"mt-3\">\n          <v-col cols=\"4\" align=\"center\">\n            <v-btn v-show=\"state == states.RECORDED\" icon @click.stop=\"redo\">\n              <v-icon color=\"white\">undo</v-icon>\n            </v-btn>\n          </v-col>\n          <v-col cols=\"4\" align=\"center\">\n            <v-btn\n              v-if=\"state == states.RECORDING\"\n              style=\"background-color: white; padding: 30px\"\n              icon\n              @click.stop=\"pauseRecording\"\n            >\n              <v-icon color=\"black\">stop</v-icon>\n            </v-btn>\n            <v-btn\n              v-else-if=\"state == states.RECORDED\"\n              style=\"background-color: #3ae17d; padding: 30px\"\n              icon\n              :disabled=\"!recordedFile\"\n              @click.stop=\"send\"\n            >\n              <v-icon color=\"black\">arrow_upward</v-icon>\n            </v-btn>\n            <v-btn\n              v-else\n              style=\"background-color: red; padding: 30px\"\n              icon\n              @click.stop=\"startRecording\"\n            >\n              <v-icon color=\"white\">fiber_manual_record</v-icon>\n            </v-btn>\n          </v-col>\n          <v-col cols=\"4\" align=\"center\">\n            <v-btn icon @click.stop=\"cancelRecording\">\n              <v-icon color=\"white\">close</v-icon>\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-container>\n\n      <v-container fluid fill-height>\n        <v-row align=\"center\">\n          <v-col cols=\"3\">\n            <div class=\"recording-time\">\n              {{ recordingTime }}\n            </div>\n          </v-col>\n          <v-col cols=\"6\" v-if=\"ptt\">\n            <div class=\"swipe-info\">&lt;&lt; Swipe to cancel</div>\n          </v-col>\n        </v-row>\n      </v-container>\n      <transition name=\"fade\" mode=\"out-in\">\n        <div\n          v-if=\"willCancel\"\n          class=\"will-cancel\"\n          style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0\"\n        >\n          <v-container fluid fill-height>\n            <v-row align=\"center\">\n              <v-col cols=\"3\">\n                <v-icon color=\"white\">delete_outline</v-icon>\n              </v-col>\n              <v-col cols=\"6\">\n                <div class=\"swipe-info\">Release to cancel</div>\n              </v-col>\n            </v-row>\n          </v-container>\n        </div>\n      </transition>\n\n      <transition name=\"fade\" mode=\"out-in\">\n        <div\n          v-if=\"recordingLocked\"\n          class=\"locked\"\n          style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0\"\n        >\n          <v-container fluid fill-height>\n            <v-row align=\"center\">\n              <v-col cols=\"3\">\n                <div class=\"recording-time\">\n                  {{ recordingTime }}\n                </div>\n              </v-col>\n              <v-col cols=\"3\">\n                <v-btn @click.stop=\"cancelRecording\" text class=\"swipe-info\"\n                  >Cancel</v-btn\n                >\n              </v-col>\n              <v-col cols=\"3\">\n                <v-btn @click.stop=\"stopRecording\" icon class=\"swipe-info\"\n                  ><v-icon color=\"white\">stop</v-icon></v-btn\n                >\n              </v-col>\n            </v-row>\n          </v-container>\n        </div>\n      </transition>\n\n      <div\n        v-if=\"state == states.ERROR\"\n        class=\"error\"\n        style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0\"\n      >\n        <v-container fluid fill-height>\n          <v-row align=\"center\">\n            <v-col>\n              <div class=\"swipe-info\">\n                {{ errorMessage || \"Failed to record audio\" }}\n              </div>\n            </v-col>\n            <v-col align=\"right\">\n              <v-btn icon @click.stop=\"cancelRecording\">\n                <v-icon color=\"white\">close</v-icon>\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-container>\n      </div>\n\n      <VoiceRecorderLock\n        v-show=\"state == states.RECORDING && ptt\"\n        :style=\"lockButtonStyle\"\n        :isLocked=\"recordingLocked\"\n      />\n    </div>\n  </transition>\n</template>\n<script>\nconst State = {\n  INITIAL: \"intial\",\n  RECORDING: \"recording\",\n  RECORDED: \"recorded\",\n  ERROR: \"error\",\n};\nimport util from \"../plugins/utils\";\nimport VoiceRecorderLock from \"./VoiceRecorderLock\";\nrequire(\"md-gum-polyfill\");\nimport RecordRTC from \"recordrtc\";\nimport ysFixWebmDuration from \"fix-webm-duration\";\n\nexport default {\n  name: \"VoiceRecorder\",\n  components: {\n    VoiceRecorderLock,\n  },\n  props: {\n    show: {\n      type: Boolean,\n      default: function () {\n        return false;\n      },\n    },\n    ptt: {\n      type: Boolean,\n      default: function () {\n        return false;\n      },\n    },\n    micButtonRef: {\n      type: Object,\n      default: function () {\n        return null;\n      },\n    },\n  },\n  data() {\n    return {\n      willCancel: false,\n      /** Starting X coordinate of dragging operations */\n      startCoordinateX: null,\n      startCoordinateY: null,\n      states: State,\n      state: State.INITIAL,\n      recordStartedAt: null,\n      recordingTime: String.fromCharCode(160), // nbsp!\n      recordTimer: null,\n      recordingLocked: false,\n      recordedFile: null,\n      errorMessage: null,\n    };\n  },\n  watch: {\n    micButtonRef(buttonRef) {\n      if (buttonRef) {\n        var r = buttonRef.$el.getBoundingClientRect();\n        var left = r.left;\n        var width = r.right - r.left;\n        r = this.$refs.vrroot.parentElement.getBoundingClientRect();\n        var widthParent = r.right - r.left;\n        document.documentElement.style.setProperty(\n          \"--v-mic-button-left\",\n          left + \"px\"\n        );\n        document.documentElement.style.setProperty(\n          \"--v-mic-button-width\",\n          width + \"px\"\n        );\n        document.documentElement.style.setProperty(\n          \"--v-mic-button-container-width\",\n          widthParent + \"px\"\n        );\n        var initialScale = width / widthParent;\n        document.documentElement.style.setProperty(\n          \"--v-mic-button-initial-scale\",\n          initialScale\n        );\n        var initialTranslate = left + width / 2 - widthParent / 2;\n        document.documentElement.style.setProperty(\n          \"--v-mic-button-initial-translate\",\n          initialTranslate + \"px\"\n        );\n      }\n    },\n    show(val) {\n      if (val) {\n        // Add listeners\n        this.state = State.INITIAL;\n        this.errorMessage = null;\n        this.recordedFile = null;\n        if (this.ptt) {\n          document.addEventListener(\"mouseup\", this.mouseUp, false);\n          document.addEventListener(\"mousemove\", this.mouseMove, false);\n          document.addEventListener(\"touchend\", this.mouseUp, false);\n          document.addEventListener(\"touchmove\", this.mouseMove, false);\n          this.startRecording();\n        } else {\n          console.log(\"Not PTT\");\n          this.micButtonRef.$el.style.display = \"none\";\n        }\n      } else {\n        // Remove listeners\n        document.removeEventListener(\"mouseup\", this.mouseUp, false);\n        document.removeEventListener(\"mousemove\", this.mouseMove, false);\n        document.removeEventListener(\"touchend\", this.mouseUp, false);\n        document.removeEventListener(\"touchmove\", this.mouseMove, false);\n        this.startCoordinateX = null;\n        this.startCoordinateY = null;\n        this.willCancel = false;\n        this.startCoordinateX = null;\n        this.startCoordinateY = null;\n        this.recordingLocked = false;\n        this.micButtonRef.$el.style.display = \"block\";\n      }\n    },\n  },\n  computed: {\n    lockButtonStyle() {\n      /**\n        Calculate where to show the lock button (it should be at the same X-coord as the)\n        mic button (given as a reference!)\n      */\n      var left = 0;\n      var width = 20;\n      if (this.micButtonRef) {\n        var r = this.micButtonRef.$el.getBoundingClientRect();\n        left = r.left;\n        width = r.right - r.left;\n      }\n      const s =\n        \"position:absolute;top:-50px;left:\" +\n        left +\n        \"px;width:\" +\n        width +\n        \"px;height:40px\";\n      return s;\n    },\n  },\n  methods: {\n    close() {\n      this.stopRecordTimer();\n      this.recordingTime = String.fromCharCode(160); // nbsp;\n      this.$emit(\"close\");\n    },\n    mouseUp(ignoredEvent) {\n      document.removeEventListener(\"mouseup\", this.mouseUp, false);\n      document.removeEventListener(\"mousemove\", this.mouseMove, false);\n      document.removeEventListener(\"touchend\", this.mouseUp, false);\n      document.removeEventListener(\"touchmove\", this.mouseMove, false);\n      //document.body.style.cursor = \"\";\n      if (this.state == State.RECORDING) {\n        if (!this.recordingLocked) {\n          if (this.willCancel) {\n            this.cancelRecording();\n          } else {\n            this.stopRecording();\n          }\n        }\n      } else {\n        this.cancelRecording();\n      }\n    },\n    mouseMove(event) {\n      var x = event.clientX;\n      var y = event.clientY;\n      if (event.touches && event.touches.length > 0) {\n        x = event.touches[0].clientX;\n        y = event.touches[0].clientY;\n      }\n      if (!this.startCoordinateX) {\n        // First move, set it!\n        this.startCoordinateX = x;\n        this.startCoordinateY = y;\n      }\n      //document.body.style.cursor = \"ns-resize\";\n      this.willCancel = x < this.startCoordinateX - 30;\n      if (y < this.startCoordinateY - 30 && !this.willCancel) {\n        this.recordingLocked = true;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n    },\n\n    startRecording() {\n      var constraints = {\n        audio: {\n          channelCount: 1,\n          sampleRate: 16000,\n          echoCancellation: false,\n          autoGainControl: true,\n          noiseSuppression: true,\n          volume: 1.0,\n        },\n        video: false,\n      };\n      navigator.mediaDevices\n        .getUserMedia(constraints)\n        .then((stream) => {\n          this.recorder = RecordRTC(stream, {\n            type: \"audio\",\n            mimeType: \"audio/webm\",\n            sampleRate: 16000,\n            desiredSampRate: 16000,\n            numberOfAudioChannels: 1\n          });\n          this.recorder.startRecording();\n          this.state = State.RECORDING;\n          this.recordStartedAt = Date.now();\n          this.startRecordTimer();\n        })\n        .catch((e) => {\n          console.error(e);\n          if (e && e.name == \"NotAllowedError\") {\n            this.errorMessage = e.message;\n          }\n          this.state = State.ERROR;\n        });\n    },\n    cancelRecording() {\n      this.state = State.INITIAL;\n      if (this.recorder) {\n        this.recorder.stopRecording();\n        this.recorder.destroy();\n        this.recorder = null;\n      }\n      this.stopRecordTimer();\n      this.recordingTime = String.fromCharCode(160); // nbsp;\n      this.close();\n    },\n    pauseRecording() {\n      this.state = State.RECORDED;\n      this.stopRecordTimer();\n      this.getFile(false);\n    },\n    stopRecording() {\n      this.state = State.RECORDED;\n      this.stopRecordTimer();\n      this.recordingTime = String.fromCharCode(160); // nbsp;\n      this.close();\n      this.getFile(true);\n    },\n    redo() {\n      this.state = State.INITIAL;\n      this.recordedFile = null;\n      this.recordingTime = String.fromCharCode(160); // nbsp;\n    },\n    send() {\n      this.$emit(\"file\", { file: this.recordedFile });\n    },\n    getFile(send) {\n      const duration = Date.now() - this.recordStartedAt;\n      this.recorder.stopRecording(() => {\n        this.correctMetadata(this.recorder.getBlob(), duration).then((blob) => {\n          this.recordedFile = new File(\n            [blob],\n            util.formatRecordStartTime(this.recordStartedAt) + \".webm\",\n            {\n              type: blob.type,\n              lastModified: Date.now(),\n            }\n          );\n          //const player = new Audio(URL.createObjectURL(this.recordedFile));\n          //player.play();\n          if (send) {\n            //console.log(\"send\");\n            this.send();\n          }\n        });\n      });\n    },\n    startRecordTimer() {\n      this.stopRecordTimer();\n      this.recordingTime = String.fromCharCode(160); // nbsp;\n      this.recordTimer = setInterval(() => {\n        const now = Date.now();\n        this.recordingTime = util.formatRecordDuration(\n          now - this.recordStartedAt\n        );\n      }, 500);\n    },\n    stopRecordTimer() {\n      if (this.recordTimer) {\n        clearInterval(this.recordTimer);\n        this.recordTimer = null;\n      }\n    },\n\n    /*\n     * There is an issue with browsers not setting correct metadata in the generated webm file.\n     * See here: https://bugs.chromium.org/p/chromium/issues/detail?id=642012\n     * Use fix-webm-duration package to try to update the cues section.\n     */\n    async correctMetadata(blob, duration) {\n      return new Promise((resolve, reject) => {\n        try {\n          ysFixWebmDuration(blob, duration, function (fixedBlob) {\n            const b = new Blob([fixedBlob], { type: blob.type });\n            resolve(b);\n          });\n        } catch (err) {\n          console.error(err);\n          reject(err);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>\n<style>\n.grow-enter-active,\n.grow-leave-active {\n  transition-timing-function: ease-out;\n  transition: opacity 0.3s, border-radius 0.5s, transform 0.5s;\n}\n.grow-enter,\n.grow-leave-to {\n  transform: translateX(var(--v-mic-button-initial-translate))\n    scaleX(var(--v-mic-button-initial-scale));\n  opacity: 0;\n  border-radius: 25px !important;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VoiceRecorder.vue?vue&type=template&id=969ea830&\"\nimport script from \"./VoiceRecorder.vue?vue&type=script&lang=js&\"\nexport * from \"./VoiceRecorder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VoiceRecorder.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./VoiceRecorder.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VIcon,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BottomSheet',{ref:\"sheet\",staticClass:\"room-info-bottom-sheet\"},[_c('div',{ref:\"roomInfoSheetContent\",staticClass:\"room-info-sheet\"},[_c('div',{staticClass:\"text-center current-room\"},[_c('v-avatar',{staticClass:\"room-avatar\"},[(_vm.roomAvatar)?_c('v-img',{attrs:{\"src\":_vm.roomAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.roomName.substring(0, 1).toUpperCase()))])],1),_c('div',{staticClass:\"h4\"},[_vm._v(\"This group\")]),_c('div',{staticClass:\"h2\"},[_vm._v(_vm._s(_vm.roomName))]),_c('v-btn',{staticClass:\"filled-button\",attrs:{\"height\":\"20px\",\"color\":\"black\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showDetails($event)}}},[_vm._v(\"View details\")])],1),_c('room-list',{attrs:{\"title\":'Other groups'},on:{\"close\":_vm.close}}),_c('v-btn',{staticClass:\"outlined-button\",attrs:{\"height\":\"20px\",\"color\":\"black\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.createRoom($event)}}},[_vm._v(\"Create group\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"sheet\",staticClass:\"bottom-sheet\",style:(_vm.state == 'closed' ? { 'pointer-events': 'none' } : {})},[_c('v-fade-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state != 'closed'),expression:\"state != 'closed'\"}],staticClass:\"bottom-sheet-bg\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onBackgroundClick($event)}}})]),_c('div',{ref:\"pan\",staticClass:\"bottom-sheet-content\",style:({ top: ((_vm.isMove ? _vm.y : _vm.calcY()) + \"px\") }),attrs:{\"data-state\":_vm.isMove ? 'move' : _vm.state}},[_vm._m(0),_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"20px\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\",\"overflow-y\":\"auto\",\"padding\":\"20px\"}},[_vm._t(\"default\")],2)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bottom-sheet-handle\"},[_c('div',{staticClass:\"bottom-sheet-handle-decoration\"})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"bottom-sheet\"\n    ref=\"sheet\"\n    :style=\"state == 'closed' ? { 'pointer-events': 'none' } : {}\"\n  >\n    <v-fade-transition>\n      <div\n        class=\"bottom-sheet-bg\"\n        v-show=\"state != 'closed'\"\n        @click.stop=\"onBackgroundClick\"\n      />\n    </v-fade-transition>\n    <div\n      class=\"bottom-sheet-content\"\n      :data-state=\"isMove ? 'move' : state\"\n      ref=\"pan\"\n      :style=\"{ top: `${isMove ? y : calcY()}px` }\"\n    >\n      <div class=\"bottom-sheet-handle\"><div class=\"bottom-sheet-handle-decoration\" /></div>\n      <div style=\"position:absolute;top:20px;left:0;right:0;bottom:0;overflow-y:auto;padding:20px\">\n        <slot></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Hammer from \"hammerjs\";\n\nexport default {\n  props: {\n    openY: {\n      type: Number,\n      default: 0.1,\n    },\n    halfY: {\n      type: Number,\n      default: 0.5,\n    },\n    defaultState: {\n      type: String,\n      default: \"closed\",\n    },\n  },\n  data() {\n    return {\n      mc: null,\n      y: 0,\n      startY: 0,\n      isMove: false,\n      state: this.defaultState,\n      rect: {},\n    };\n  },\n  mounted() {\n    window.onresize = () => {\n      this.rect = this.$refs.sheet.getBoundingClientRect();\n    };\n    this.rect = this.$refs.sheet.getBoundingClientRect();\n\n    this.mc = new Hammer(this.$refs.pan);\n    this.mc.get(\"pan\").set({ direction: Hammer.DIRECTION_ALL });\n\n    const self = this;\n\n    this.mc.on(\"panup pandown\", (evt) => {\n      self.y = evt.center.y - 16;\n    });\n\n    this.mc.on(\"panstart\", (evt) => {\n      self.startY = evt.center.y;\n      self.isMove = true;\n    });\n\n    this.mc.on(\"panend\", (evt) => {\n      self.isMove = false;\n\n      switch (self.state) {\n        case \"small\":\n          if (self.startY - evt.center.y > 120) {\n            self.state = \"open\";\n          }\n\n          if (self.startY - evt.center.y < -50) {\n            self.state = \"closed\";\n          }\n          break;\n        case \"open\":\n          if (self.startY - evt.center.y < -120) {\n            self.state = \"small\";\n          }\n          break;\n      }\n    });\n  },\n  beforeDestroy() {\n    this.mc.destroy();\n    window.onresize = null;\n  },\n  methods: {\n    calcY() {\n      switch (this.state) {\n        case \"closed\":\n          return this.rect.height;\n        case \"open\":\n          return this.rect.height * this.openY;\n        case \"small\":\n          return this.rect.height * this.halfY;\n        default:\n          return this.y;\n      }\n    },\n    open() {\n      this.setState(\"small\");\n    },\n    close() {\n      this.setState(\"closed\");\n    },\n    setState(state) {\n      this.state = state;\n    },\n    onBackgroundClick() {\n      if (this.state == \"open\") {\n        this.setState(\"small\");\n      } else {\n        this.setState(\"closed\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.bottom-sheet {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  z-index: 10;\n}\n\n.bottom-sheet-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(black, 0.4);\n}\n\n.bottom-sheet-handle {\n  height: 20px;\n  background-color: white;\n  position: relative;\n  .bottom-sheet-handle-decoration {\n    background-color: #cccccc;\n    height: 2px;\n    position: absolute;\n    top: 50%;\n    left: 30%;\n    right: 30%;\n  }\n}\n\n.bottom-sheet-content {\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  left: 0;\n  right: 0;\n  border-radius: 10px 10px 0px 0px;\n  background-color: white;\n  overflow: hidden;\n}\n\n.bottom-sheet-content[data-state=\"small\"],\n.bottom-sheet-content[data-state=\"open\"],\n.bottom-sheet-content[data-state=\"closed\"] {\n  transition: top 0.3s ease-out;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomSheet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomSheet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BottomSheet.vue?vue&type=template&id=3693185f&scoped=true&\"\nimport script from \"./BottomSheet.vue?vue&type=script&lang=js&\"\nexport * from \"./BottomSheet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BottomSheet.vue?vue&type=style&index=0&id=3693185f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3693185f\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFadeTransition } from 'vuetify/lib/components/transitions';\ninstallComponents(component, {VFadeTransition})\n","<template>\n  <BottomSheet\n    class=\"room-info-bottom-sheet\"\n    ref=\"sheet\"\n  >\n    <div class=\"room-info-sheet\" ref=\"roomInfoSheetContent\">\n      <div class=\"text-center current-room\">\n        <v-avatar class=\"room-avatar\">\n          <v-img v-if=\"roomAvatar\" :src=\"roomAvatar\" />\n          <span v-else class=\"white--text headline\">{{\n            roomName.substring(0, 1).toUpperCase()\n          }}</span>\n        </v-avatar>\n        <div class=\"h4\">This group</div>\n        <div class=\"h2\">{{ roomName }}</div>\n        <v-btn\n          height=\"20px\"\n          color=\"black\"\n          class=\"filled-button\"\n          @click.stop=\"showDetails\"\n          >View details</v-btn\n        >\n      </div>\n      <room-list :title=\"'Other groups'\" v-on:close=\"close\" />\n      <v-btn\n          height=\"20px\"\n          color=\"black\"\n          class=\"outlined-button\"\n          @click.stop=\"createRoom\"\n          >Create group</v-btn\n        >\n    </div>\n  </BottomSheet>\n</template>\n\n<script>\nimport BottomSheet from \"./BottomSheet\";\nimport RoomList from \"./RoomList.vue\";\nimport roomInfoMixin from \"./roomInfoMixin\";\n\nexport default {\n  name: \"RoomInfoBottomSheet\",\n  mixins: [roomInfoMixin],\n  components: {\n    BottomSheet,\n    RoomList,\n  },\n  methods: {\n    open() {\n      this.$refs.sheet.open();\n    },\n\n    close() {\n      this.$refs.sheet.close();\n    },\n\n    showDetails() {\n      this.close();\n      this.$navigation.push({ name: \"RoomInfo\" });\n    },\n\n    createRoom() {\n      this.close();\n      this.$navigation.push({ name: \"CreateRoom\" });\n    }\n\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomInfoBottomSheet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomInfoBottomSheet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomInfoBottomSheet.vue?vue&type=template&id=3e2c04e1&\"\nimport script from \"./RoomInfoBottomSheet.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomInfoBottomSheet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomInfoBottomSheet.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VBtn,VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"created-room-welcome-header\"},[_c('div',{staticClass:\"h4\"},[_vm._v(\"Welcome!\")]),_c('div',{staticClass:\"mt-2\"},[_vm._v(\"Here are a few things to know about your group:\")]),(_vm.roomJoinRule == 'public')?_c('div',{staticClass:\"mt-2\"},[_vm._v(\"Anyone can join by opening this link: \"+_vm._s(_vm.publicRoomLink))]):(_vm.roomJoinRule == 'invite')?_c('div',{staticClass:\"mt-2\"},[_vm._v(\"Only people you invite can join.\")]):_vm._e(),_c('div',{staticClass:\"mt-2\"},[_vm._v(\"You can change 'join permissions' and 'message history' at any time in the group settings.\")]),_c('div',{staticClass:\"text-right\"},[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$emit('close')}}},[_vm._v(\"Got it\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"created-room-welcome-header\">\n    <div class=\"h4\">Welcome!</div>\n    <div class=\"mt-2\">Here are a few things to know about your group:</div>\n    <div class=\"mt-2\" v-if=\"roomJoinRule == 'public'\">Anyone can join by opening this link: {{ publicRoomLink }}</div>\n    <div class=\"mt-2\" v-else-if=\"roomJoinRule == 'invite'\">Only people you invite can join.</div>\n    <div class=\"mt-2\">You can change 'join permissions' and 'message history' at any time in the group settings.</div>\n    <div class=\"text-right\">\n      <v-btn text @click.stop=\"$emit('close')\">Got it</v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\nimport roomInfoMixin from \"./roomInfoMixin\";\n\nexport default {\n  name: \"CreatedRoomWelcomeHeader\",\n  mixins: [roomInfoMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreatedRoomWelcomeHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreatedRoomWelcomeHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreatedRoomWelcomeHeader.vue?vue&type=template&id=e1e6f3a2&\"\nimport script from \"./CreatedRoomWelcomeHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./CreatedRoomWelcomeHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreatedRoomWelcomeHeader.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\ninstallComponents(component, {VBtn})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-operations-bottom-sheet\"},[_c('v-fade-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.closed),expression:\"!closed\"}],staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"bottom\":\"0\",\"right\":\"0\",\"background-color\":\"rgba(0, 0, 0, 0.3)\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.backgroundClick($event)}}})]),_c('SwipeableBottomSheet',{ref:\"sheet\",staticClass:\"bottom-sheet ma-0 pa-0\",attrs:{\"halfY\":0.5,\"openY\":0.2,\"data-closed\":_vm.closed ? 1 : 0}},[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"message-operations-bottom-sheet\">\n    <v-fade-transition>\n      <div\n        v-show=\"!closed\"\n        @click.stop=\"backgroundClick\"\n        style=\"\n          position: absolute;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n        \"\n      />\n    </v-fade-transition>\n    <SwipeableBottomSheet\n      class=\"bottom-sheet ma-0 pa-0\"\n      ref=\"sheet\"\n      :halfY=\"0.5\"\n      :openY=\"0.2\"\n      :data-closed=\"closed ? 1 : 0\"\n    >\n      <slot></slot>\n    </SwipeableBottomSheet>\n  </div>\n</template>\n\n<script>\nimport SwipeableBottomSheet from \"vue-swipeable-bottom-sheet/src/components/SwipeableBottomSheet\";\nexport default {\n  name: \"MessageOperationsBottomSheet\",\n  components: {\n    SwipeableBottomSheet,\n  },\n  data() {\n    return {\n      closed: true,\n    };\n  },\n  mounted() {\n    this.$watch(\"$refs.sheet.state\", (new_value, ignored_old_value) => {\n      this.closed = new_value == \"close\";\n    });\n  },\n  methods: {\n    open() {\n      if (this.$refs.sheet.state == \"half\") {\n        this.$refs.sheet.setState(\"close\");\n      } else {\n        // Reset scroll before opening!\n        this.$refs.sheet.setState(\"half\");\n      }\n    },\n\n    close() {\n      this.$refs.sheet.setState(\"close\");\n    },\n\n    backgroundClick() {\n      if (this.$refs.sheet.state == \"half\") {\n        this.$refs.sheet.setState(\"close\");\n      } else {\n        this.$refs.sheet.setState(\"half\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n\n/* Default implementation only dims background when fully open,\n so we use our own flag (data-closed) here to that we can\n dim also when it is just half open */\n.bottom-sheet[data-closed=\"0\"] .bg {\n  display: none;\n  transition: all 0.3s;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: transparent !important;\n}\n\n.message-operations-bottom-sheet {\n  .pan-area {\n    padding-bottom: 0px;\n  }\n  .card {\n    padding: 0px !important;\n  }\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperationsBottomSheet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperationsBottomSheet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOperationsBottomSheet.vue?vue&type=template&id=4ea35bee&\"\nimport script from \"./MessageOperationsBottomSheet.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOperationsBottomSheet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOperationsBottomSheet.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFadeTransition } from 'vuetify/lib/components/transitions';\ninstallComponents(component, {VFadeTransition})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BottomSheet',{ref:\"sheet\",staticClass:\"sticker-picker\"},[_c('v-tabs',{staticClass:\"tabs\",attrs:{\"centered\":\"\",\"show-arrows\":\"\"},model:{value:(_vm.currentStickerPack),callback:function ($$v) {_vm.currentStickerPack=$$v},expression:\"currentStickerPack\"}},[_c('v-tabs-slider'),_vm._l((_vm.packs),function(pack){return _c('v-tab',{key:pack},[_vm._v(\" \"+_vm._s(pack)+\" \"),_c('v-icon',[_vm._v(\"mdi-phone\")])],1)})],2),_c('v-tabs-items',{staticClass:\"tab-items\",model:{value:(_vm.currentStickerPack),callback:function ($$v) {_vm.currentStickerPack=$$v},expression:\"currentStickerPack\"}},_vm._l((_vm.packs),function(pack){return _c('v-tab-item',{key:pack},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',_vm._l((_vm.stickersInPack(pack)),function(sticker){return _c('v-col',{key:pack + sticker.name,attrs:{\"cols\":\"2\"}},[_c('v-img',{attrs:{\"src\":sticker.image,\"contain\":\"\"},on:{\"click\":function($event){return _vm.selectSticker(pack, sticker)}}})],1)}),1)],1)],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <BottomSheet ref=\"sheet\" class=\"sticker-picker\">\n    <v-tabs\n      v-model=\"currentStickerPack\"\n      centered\n      class=\"tabs\"\n      show-arrows\n    >\n      <v-tabs-slider></v-tabs-slider>\n\n      <v-tab v-for=\"pack in packs\" :key=\"pack\">\n        {{ pack }}\n        <v-icon>mdi-phone</v-icon>\n      </v-tab>\n    </v-tabs>\n\n    <v-tabs-items v-model=\"currentStickerPack\" class=\"tab-items\">\n      <v-tab-item v-for=\"pack in packs\" :key=\"pack\">\n        <v-card flat>\n          <v-container fluid>\n            <v-row>\n              <v-col cols=\"2\" v-for=\"sticker in stickersInPack(pack)\" :key=\"pack + sticker.name\">\n                <v-img @click=\"selectSticker(pack, sticker)\" :src=\"sticker.image\" contain />\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card>\n      </v-tab-item>\n    </v-tabs-items>\n  </BottomSheet>\n</template>\n\n<script>\nimport BottomSheet from \"./BottomSheet\";\nimport stickers from '../plugins/stickers';\n\nexport default {\n  components: {\n    BottomSheet,\n  },\n  data() {\n    return {\n      currentStickerPack: 'tab-0',\n    };\n  },\n  computed: {\n    packs() {\n      return stickers.getPacks();\n    }\n  },\n  mounted() {},\n  methods: {\n    open() {\n      this.$refs.sheet.open();\n    },\n    stickersInPack(pack) {\n      return stickers.stickersInPack(pack);\n    },\n    selectSticker(pack, sticker) {\n      this.$refs.sheet.close();\n      this.$emit('selectSticker', stickers.getStickerShortcode(pack, sticker));\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>\n\n<style lang=\"scss\">\n.sticker-picker .tabs {\n  position: sticky;\n  top: 0px;\n  z-index: 1;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StickerPickerBottomSheet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StickerPickerBottomSheet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StickerPickerBottomSheet.vue?vue&type=template&id=a2273cf0&\"\nimport script from \"./StickerPickerBottomSheet.vue?vue&type=script&lang=js&\"\nexport * from \"./StickerPickerBottomSheet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StickerPickerBottomSheet.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./StickerPickerBottomSheet.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VTabsSlider } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VCard,VCol,VContainer,VIcon,VImg,VRow,VTab,VTabItem,VTabs,VTabsItems,VTabsSlider})\n","<template>\n  <div class=\"chat-root fill-height d-flex flex-column\" ma-0 pa-0>\n    <ChatHeader\n      class=\"chat-header flex-grow-0 flex-shrink-0\"\n      v-on:header-click=\"$refs.roomInfoSheet.open()\"\n    />\n    <div\n      class=\"chat-content flex-grow-1 flex-shrink-1\"\n      ref=\"chatContainer\"\n      style=\"overflow-x: hidden; overflow-y: auto\"\n      v-on:scroll=\"onScroll\"\n      @click=\"closeContextMenuIfOpen\"\n    >\n      <div ref=\"messageOperationsStrut\" class=\"message-operations-strut\">\n        <message-operations\n          ref=\"messageOperations\"\n          :style=\"opStyle\"\n          :emojis=\"recentEmojis\"\n          v-on:close=\"showContextMenu = false\"\n          v-if=\"selectedEvent && showContextMenu\"\n          v-on:addreaction=\"addReaction\"\n          v-on:addquickreaction=\"addQuickReaction\"\n          v-on:addreply=\"addReply(selectedEvent)\"\n          v-on:edit=\"edit(selectedEvent)\"\n          v-on:redact=\"redact(selectedEvent)\"\n          v-on:download=\"download(selectedEvent)\"\n          v-on:more=\"showMoreMessageOperations\"\n          :event=\"selectedEvent\"\n        />\n      </div>\n\n      <!-- Handle resizes, e.g. when soft keyboard is shown/hidden -->\n      <resize-observer\n        ref=\"chatContainerResizer\"\n        @notify=\"handleChatContainerResize\"\n      />\n\n      <CreatedRoomWelcomeHeader v-if=\"showCreatedRoomWelcomeHeader\" v-on:close=\"closeCreateRoomWelcomeHeader\" />\n\n      <div\n        v-for=\"(event, index) in events\"\n        :key=\"event.getId()\"\n        :eventId=\"event.getId()\"\n      >\n        <!-- DAY Marker, shown for every new day in the timeline -->\n        <div\n          v-if=\"showDayMarkerBeforeEvent(event)\"\n          class=\"day-marker\"\n          :title=\"dayForEvent(event)\"\n        />\n\n        <div\n          v-if=\"\n            !event.isRelation() && !event.isRedacted() && !event.isRedaction()\n          \"\n          :ref=\"event.getId()\"\n        >\n          <div\n            style=\"position: relative; user-select: none\"\n            v-on:touchstart=\"\n              (e) => {\n                touchStart(e, event);\n              }\n            \"\n            v-on:touchend=\"touchEnd\"\n            v-on:touchcancel=\"touchCancel\"\n            v-on:touchmove=\"touchMove\"\n          >\n            <component\n              :is=\"componentForEvent(event)\"\n              :room=\"room\"\n              :event=\"event\"\n              :nextEvent=\"events[index + 1]\"\n              :reactions=\"\n                timelineWindow._timelineSet.getRelationsForEvent(\n                  event.getId(),\n                  'm.annotation',\n                  'm.reaction'\n                )\n              \"\n              :timelineSet=\"timelineWindow._timelineSet\"\n              v-on:send-quick-reaction=\"sendQuickReaction\"\n              v-on:context-menu=\"showContextMenuForEvent($event)\"\n              v-on:own-avatar-clicked=\"viewProfile\"\n              v-on:download=\"download(event)\"\n            />\n            <!-- <div v-if=\"debugging\" style=\"user-select:text\">EventID: {{ event.getId() }}</div> -->\n            <!-- <div v-if=\"debugging\" style=\"user-select:text\">Event: {{ JSON.stringify(event) }}</div> -->\n            <div\n              v-if=\"event.getId() == readMarker && index < events.length - 1\"\n              class=\"read-marker\"\n              title=\"Unread messages\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Input area -->\n    <v-container v-if=\"room\" fluid class=\"input-area-outer\">\n      <!-- \"Scroll to end\"-button -->\n      <v-btn\n        class=\"scroll-to-end\"\n        v-show=\"showScrollToEnd\"\n        fab\n        small\n        elevation=\"0\"\n        color=\"black\"\n        @click.stop=\"scrollToEndOfTimeline\"\n      >\n        <v-icon color=\"white\">arrow_downward</v-icon>\n      </v-btn>\n\n      <v-row class=\"ma-0 pa-0\">\n        <div v-if=\"replyToEvent\">\n          REPLYING TO EVENT: {{ replyToEvent.getContent().body }}\n        </div>\n\n        <!-- CONTACT IS TYPING -->\n        <div class=\"typing\">\n          {{ typingMembersString }}\n        </div>\n      </v-row>\n      <v-row class=\"input-area-inner align-center\">\n        <v-col class=\"flex-grow-1 flex-shrink-1 ma-0 pa-0\">\n          <v-textarea\n            height=\"undefined\"\n            ref=\"messageInput\"\n            full-width\n            auto-grow\n            rows=\"1\"\n            v-model=\"currentInput\"\n            no-resize\n            class=\"input-area-text\"\n            placeholder=\"Your message...\"\n            hide-details\n            background-color=\"white\"\n            v-on:keydown.enter.prevent=\"\n              () => {\n                sendCurrentTextMessage();\n              }\n            \"\n          />\n        </v-col>\n\n        <v-col\n          class=\"input-area-button text-center flex-grow-0 flex-shrink-1\"\n          v-if=\"editedEvent || replyToEvent\"\n        >\n          <v-btn\n            fab\n            small\n            elevation=\"0\"\n            color=\"black\"\n            @click.stop=\"cancelEditReply\"\n          >\n            <v-icon color=\"white\">cancel</v-icon>\n          </v-btn>\n        </v-col>\n\n        <v-col\n          class=\"input-area-button text-center flex-grow-0 flex-shrink-1\"\n          v-if=\"!currentInput || currentInput.length == 0 || showRecorder\"\n        >\n          <v-btn\n            class=\"mic-button\"\n            ref=\"mic_button\"\n            fab\n            small\n            elevation=\"0\"\n            v-blur\n            style=\"z-index: 10\"\n            :disabled=\"!canRecordAudio\"\n            v-longTap:250=\"[showRecordingUI, startRecording]\"\n          >\n            <v-icon :color=\"showRecorder ? 'white' : 'black'\">mic</v-icon>\n          </v-btn>\n        </v-col>\n\n        <v-col\n          class=\"input-area-button text-center flex-grow-0 flex-shrink-1\"\n          v-else\n        >\n          <v-btn\n            fab\n            small\n            elevation=\"0\"\n            color=\"black\"\n            @click.stop=\"sendCurrentTextMessage\"\n            :disabled=\"sendButtonDisabled\"\n          >\n            <v-icon color=\"white\">{{\n              editedEvent ? \"save\" : \"arrow_upward\"\n            }}</v-icon>\n          </v-btn>\n        </v-col>\n\n        <v-col v-if=\"config.useShortCodeStickers\" class=\"input-area-button text-center flex-grow-0 flex-shrink-1\">\n            <v-btn\n              v-if=\"!showRecorder\"\n              icon\n              large\n              color=\"black\"\n              @click=\"showStickerPicker\"\n              :disabled=\"attachButtonDisabled\"\n            >\n              <v-icon large>face</v-icon>\n            </v-btn>\n        </v-col>\n\n        <v-col class=\"input-area-button text-center flex-grow-0 flex-shrink-1\">\n          <label icon flat ref=\"attachmentLabel\">\n            <v-btn\n              v-if=\"!showRecorder\"\n              icon\n              large\n              color=\"black\"\n              @click=\"showAttachmentPicker\"\n              :disabled=\"attachButtonDisabled\"\n            >\n              <v-icon x-large>add_circle_outline</v-icon>\n            </v-btn>\n            <input\n              ref=\"attachment\"\n              type=\"file\"\n              name=\"attachment\"\n              @change=\"handlePickedAttachment($event)\"\n              accept=\"image/*|audio/*|video/*|application/pdf\"\n              style=\"display: none\"\n            />\n          </label>\n        </v-col>\n      </v-row>\n      <VoiceRecorder\n        :micButtonRef=\"$refs.mic_button\"\n        :ptt=\"showRecorderPTT\"\n        :show=\"showRecorder\"\n        v-on:close=\"showRecorder = false\"\n        v-on:file=\"onVoiceRecording\"\n      />\n    </v-container>\n\n    <div v-if=\"currentImageInputPath\">\n      <v-dialog v-model=\"currentImageInputPath\" class=\"ma-0 pa-0\" width=\"50%\">\n        <v-card class=\"ma-0 pa-0\">\n          <v-card-text class=\"ma-0 pa-0\">\n            <v-img\n              v-if=\"currentImageInput\"\n              :aspect-ratio=\"1\"\n              :src=\"currentImageInput\"\n              contain\n              style=\"max-height: 50vh\"\n            />\n            <div v-if=\"currentSendError\">{{ currentSendError }}</div>\n            <div v-else>{{ currentSendProgress }}</div>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"cancelSendAttachment\"\n              >Cancel</v-btn\n            >\n            <v-btn\n              color=\"primary\"\n              text\n              @click=\"sendAttachment\"\n              v-if=\"currentSendShowSendButton\"\n              :disabled=\"currentSendOperation != null\"\n              >Send</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n\n    <MessageOperationsBottomSheet ref=\"messageOperationsSheet\" xv-show=\"showEmojiPicker\">\n      <MessageOperationsPicker\n          v-on:close=\"showEmojiPicker = false\"\n          v-if=\"selectedEvent\"\n          v-on:addreaction=\"addReaction\"\n          v-on:addquickreaction=\"addQuickReaction\"\n          v-on:addreply=\"addReply(selectedEvent)\"\n          v-on:edit=\"edit(selectedEvent)\"\n          v-on:redact=\"redact(selectedEvent)\"\n          v-on:download=\"download(selectedEvent)\"\n          :event=\"selectedEvent\"\n          />\n      <VEmojiPicker ref=\"emojiPicker\" style=\"width: 100%\" @select=\"emojiSelected\" />\n    </MessageOperationsBottomSheet>\n\n    <StickerPickerBottomSheet ref=\"stickerPickerSheet\" style=\"z-index:10\" v-on:selectSticker=\"sendSticker\" />\n\n    <!-- \"NOT ALLOWED FOR GUEST ACCOUNTS\" dialog -->\n    <v-dialog v-model=\"showNotAllowedForGuests\" class=\"ma-0 pa-0\" width=\"50%\">\n      <v-card>\n        <v-card-title>You are logged in as a guest</v-card-title>\n        <v-card-text>\n          <div>Unfortunately guests are not allowed to upload files.</div>\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"showNotAllowedForGuests = false\"\n            >Ok</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- Loading indicator -->\n    <v-container\n      fluid\n      fill-height\n      style=\"position: absolute;background-color:rgba(0,0,0,0.2)\"\n      v-if=\"!initialLoadDone || loading\"\n    >\n      <v-row align=\"center\" justify=\"center\">\n        <v-col class=\"text-center\">\n          <v-progress-circular\n            indeterminate\n            color=\"primary\"\n          ></v-progress-circular>\n        </v-col>\n      </v-row>\n    </v-container>\n\n    <RoomInfoBottomSheet ref=\"roomInfoSheet\" />\n  </div>\n</template>\n\n<script>\nimport { TimelineWindow, EventTimeline } from \"matrix-js-sdk\";\nimport MessageIncomingText from \"./messages/MessageIncomingText\";\nimport MessageIncomingFile from \"./messages/MessageIncomingFile\";\nimport MessageIncomingImage from \"./messages/MessageIncomingImage.vue\";\nimport MessageIncomingAudio from \"./messages/MessageIncomingAudio.vue\";\nimport MessageIncomingVideo from \"./messages/MessageIncomingVideo.vue\";\nimport MessageIncomingSticker from \"./messages/MessageIncomingSticker.vue\";\nimport MessageOutgoingText from \"./messages/MessageOutgoingText\";\nimport MessageOutgoingFile from \"./messages/MessageOutgoingFile\";\nimport MessageOutgoingImage from \"./messages/MessageOutgoingImage.vue\";\nimport MessageOutgoingAudio from \"./messages/MessageOutgoingAudio.vue\";\nimport MessageOutgoingVideo from \"./messages/MessageOutgoingVideo.vue\";\nimport MessageOutgoingSticker from \"./messages/MessageOutgoingSticker.vue\";\nimport ContactJoin from \"./messages/ContactJoin.vue\";\nimport ContactLeave from \"./messages/ContactLeave.vue\";\nimport ContactInvited from \"./messages/ContactInvited.vue\";\nimport ContactChanged from \"./messages/ContactChanged.vue\";\nimport RoomNameChanged from \"./messages/RoomNameChanged.vue\";\nimport RoomTopicChanged from \"./messages/RoomTopicChanged.vue\";\nimport RoomAvatarChanged from \"./messages/RoomAvatarChanged.vue\";\nimport RoomHistoryVisibility from \"./messages/RoomHistoryVisibility.vue\";\nimport RoomJoinRules from \"./messages/RoomJoinRules.vue\";\nimport DebugEvent from \"./messages/DebugEvent.vue\";\nimport util from \"../plugins/utils\";\nimport MessageOperations from \"./messages/MessageOperations.vue\";\nimport MessageOperationsPicker from \"./messages/MessageOperationsPicker.vue\";\nimport ChatHeader from \"./ChatHeader\";\nimport VoiceRecorder from \"./VoiceRecorder\";\nimport RoomInfoBottomSheet from \"./RoomInfoBottomSheet\";\nimport CreatedRoomWelcomeHeader from \"./CreatedRoomWelcomeHeader\";\nimport MessageOperationsBottomSheet from './MessageOperationsBottomSheet';\nimport stickers from '../plugins/stickers';\nimport StickerPickerBottomSheet from './StickerPickerBottomSheet';\nimport BottomSheet from './BottomSheet.vue';\nimport config from \"../assets/config\";\n\nconst READ_RECEIPT_TIMEOUT = 5000; /* How long a message must have been visible before the read marker is updated */\nconst WINDOW_BUFFER_SIZE = 0.3 /** Relative window height of when we start paginating. Always keep this much loaded before and after our scroll position!  */\n\n// from https://kirbysayshi.com/2013/08/19/maintaining-scroll-position-knockoutjs-list.html\nfunction ScrollPosition(node) {\n  this.node = node;\n  this.previousScrollHeightMinusTop = 0;\n  this.previousScrollTop = 0;\n  this.readyFor = \"up\";\n}\n\nScrollPosition.prototype.restore = function () {\n  if (this.readyFor === \"up\") {\n    this.node.scrollTop =\n      this.node.scrollHeight - this.previousScrollHeightMinusTop;\n  } else {\n    this.node.scrollTop = this.previousScrollTop;\n  }\n};\n\nScrollPosition.prototype.prepareFor = function (direction) {\n  this.readyFor = direction || \"up\";\n  if (this.readyFor === \"up\") {\n    this.previousScrollHeightMinusTop =\n      this.node.scrollHeight - this.node.scrollTop;\n  } else {\n    this.previousScrollTop = this.node.scrollTop;\n  }\n};\n\nexport default {\n  name: \"Chat\",\n\n  components: {\n    ChatHeader,\n    MessageIncomingText,\n    MessageIncomingFile,\n    MessageIncomingImage,\n    MessageIncomingAudio,\n    MessageIncomingVideo,\n    MessageIncomingSticker,\n    MessageOutgoingText,\n    MessageOutgoingFile,\n    MessageOutgoingImage,\n    MessageOutgoingAudio,\n    MessageOutgoingVideo,\n    MessageOutgoingSticker,\n    ContactJoin,\n    ContactLeave,\n    ContactInvited,\n    ContactChanged,\n    RoomNameChanged,\n    RoomTopicChanged,\n    RoomAvatarChanged,\n    RoomHistoryVisibility,\n    RoomJoinRules,\n    DebugEvent,\n    MessageOperations,\n    MessageOperationsPicker,\n    VoiceRecorder,\n    RoomInfoBottomSheet,\n    CreatedRoomWelcomeHeader,\n    MessageOperationsBottomSheet,\n    StickerPickerBottomSheet,\n    BottomSheet,\n  },\n\n  data() {\n      return {\n      config: config,\n      events: [],\n      currentInput: \"\",\n      typingMembers: [],\n      timelineWindow: null,\n      \n      /** true if we are currently paginating */ \n      timelineWindowPaginating: false,\n\n      scrollPosition: null,\n      currentImageInput: null,\n      currentImageInputPath: null,\n      currentSendOperation: null,\n      currentSendProgress: null,\n      currentSendShowSendButton: true,\n      currentSendError: null,\n      showEmojiPicker: false,\n      selectedEvent: null,\n      editedEvent: null,\n      replyToEvent: null,\n      showContextMenu: false,\n      showContextMenuAnchor: null,\n      initialLoadDone: false,\n      loading: false, // Set this to true during long operations to show a \"spinner\" overlay\n      showRecorder: false,\n      showRecorderPTT: false, // True to open the voice recorder in push-to-talk mode.\n\n      /**\n       * Current chat container size. We need to keep track of this so that if and when\n       * a soft keyboard is shown/hidden we can restore the scroll position correctly.\n       * If we don't, the keyboard will simply overflow the message we are answering to etc.\n       */\n      chatContainerSize: 0,\n\n      /**\n       * True if we should show the \"scroll to end\" marker in the chat. For now at least, we use a simple\n       * method here, basically just \"if we can scroll, show it\".\n       */\n      showScrollToEnd: false,\n\n      /** Shows a dialog with info about an operation being disallowed for guests */\n      showNotAllowedForGuests: false,\n\n      /** A timer for read receipts. */\n      rrTimer: null,\n\n      /** Last event we sent a Read Receipt/Read Marker for */\n      lastRR: null,\n\n      /** If we just created this room, show a small welcome header with info */\n      showCreatedRoomWelcomeHeader: false,\n\n      /** An array of recent emojis. Used in the \"message operations\" popup. */\n      recentEmojis: []\n    };\n  },\n\n  mounted() {\n    const container = this.$refs.chatContainer;\n    this.scrollPosition = new ScrollPosition(container);\n    this.chatContainerSize = this.$refs.chatContainerResizer.$el.clientHeight;\n  },\n\n  beforeDestroy() {\n    this.stopRRTimer();\n  },\n\n  destroyed() {\n    this.$matrix.off(\"Room.timeline\", this.onEvent);\n    this.$matrix.off(\"RoomMember.typing\", this.onUserTyping);\n  },\n\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    room() {\n      return this.$matrix.currentRoom;\n    },\n    roomId() {\n      if (!this.$matrix.ready && this.currentUser) {\n        // If we have a user already, wait for ready state. If not, we\n        // dont want to return here, because we want to redirect to \"join\".\n        return null; // Not ready yet...\n      }\n      if (this.room) {\n        return this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n    roomAliasOrId() {\n      if (this.room) {\n        return this.room.getCanonicalAlias() || this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n    readMarker() {\n      if (this.lastRR) {\n        // If we have sent a RR, use that as read marker (so we don't have to wait for server round trip)\n        return this.lastRR.getId();\n      }\n      return (\n        this.fullyReadMarker ||\n        this.room.getEventReadUpTo(this.$matrix.currentUserId, false)\n      );\n    },\n    fullyReadMarker() {\n      const readEvent = this.room.getAccountData(\"m.fully_read\");\n      if (readEvent) {\n        return readEvent.getContent().event_id;\n      }\n      return null;\n    },\n    attachButtonDisabled() {\n      return (\n        this.editedEvent != null ||\n        this.replyToEvent != null ||\n        this.currentInput.length > 0\n      );\n    },\n    sendButtonDisabled() {\n      return this.currentInput.length == 0;\n    },\n    typingMembersString() {\n      const count = this.typingMembers.length;\n      if (count > 1) {\n        return \"\" + count + \" members are typing\";\n      } else if (count > 0) {\n        return this.typingMembers[0].name + \" is typing\";\n      } else {\n        return \"\";\n      }\n    },\n    opStyle() {\n      // Calculate where to show the context menu.\n      //\n      const ref = this.selectedEvent && this.$refs[this.selectedEvent.getId()];\n      var top = 0;\n      var left = 0;\n      if (ref && ref[0]) {\n        if (this.showContextMenuAnchor) {\n          var rectAnchor = this.showContextMenuAnchor.getBoundingClientRect();\n          var rectChat = this.$refs.messageOperationsStrut.getBoundingClientRect();\n          top = rectAnchor.top - rectChat.top;\n          left = rectAnchor.left - rectChat.left;\n          if (left + 250 > rectChat.right) {\n            left = rectChat.right - 250; // Pretty ugly, but we want to make sure it does not escape the screen, and we don't have the exakt width of it (yet)!\n          }\n        }\n      }\n      return \"top:\" + top + \"px;left:\" + left + \"px\";\n    },\n    canRecordAudio() {\n      return util.browserCanRecordAudio();\n    },\n    debugging() {\n      return (window.location.host || \"\").startsWith(\"localhost\");\n    }\n  },\n\n  watch: {\n    roomId: {\n      immediate: true,\n      handler(value, oldValue) {\n        if (value && value == oldValue) {\n          return; // No change.\n        }\n        console.log(\n          \"Chat: Current room changed to \" + (value ? value : \"null\")\n        );\n\n        // Clear old events\n        this.$matrix.off(\"Room.timeline\", this.onEvent);\n        this.$matrix.off(\"RoomMember.typing\", this.onUserTyping);\n\n        this.events = [];\n        this.timelineWindow = null;\n        this.typingMembers = [];\n        this.initialLoadDone = false;\n\n        // Stop RR timer\n        this.stopRRTimer();\n        this.lastRR = null;\n\n        if (!this.room) {\n          // Public room?\n          if (this.roomId && this.roomId.startsWith(\"#\")) {\n            this.onRoomNotJoined();\n          } else if (this.roomId) {\n            this.onRoomNotJoined(); // Private room we are not joined to. What to do? We redirect to join\n            // screen, maybe the user has an invite already?\n          }\n          this.initialLoadDone = true;\n          return; // no room\n        }\n\n        // Joined?\n        if (this.room.hasMembershipState(this.currentUser.user_id, \"join\")) {\n          // Yes, load everything\n          this.onRoomJoined(this.readMarker);\n        } else {\n          this.onRoomNotJoined();\n        }\n      },\n    },\n  },\n\n  methods: {\n    onRoomJoined(initialEventId) {\n\n      // Was this room just created (by you)? Show a small info header in\n      // that case!\n      const createEvent = this.room.currentState.getStateEvents(\"m.room.create\",\"\");\n      if (createEvent) {\n        const creatorId = createEvent.getContent().creator;\n        if (creatorId == this.$matrix.currentUserId && createEvent.getLocalAge() < (5 * 60000) /* 5 minutes */) {\n          this.showCreatedRoomWelcomeHeader = true;\n        }\n      }\n\n      // Listen to events\n      this.$matrix.on(\"Room.timeline\", this.onEvent);\n      this.$matrix.on(\"RoomMember.typing\", this.onUserTyping);\n\n      console.log(\"Read up to \" + initialEventId);\n\n      //initialEventId = null;\n\n      this.timelineWindow = new TimelineWindow(\n        this.$matrix.matrixClient,\n        this.room.getUnfilteredTimelineSet(),\n        {}\n      );\n      const self = this;\n      this.timelineWindow\n        .load(initialEventId, 20)\n        .then(() => {\n          console.log(\"This is\", self);\n          self.events = self.timelineWindow.getEvents();\n\n          const getMoreIfNeeded = function _getMoreIfNeeded() {\n            const container = self.$refs.chatContainer;\n            if (\n              container.scrollHeight <= (1 + 2 * WINDOW_BUFFER_SIZE) * container.clientHeight &&\n              self.timelineWindow &&\n              self.timelineWindow.canPaginate(EventTimeline.BACKWARDS)\n            ) {\n              return self.timelineWindow\n                .paginate(EventTimeline.BACKWARDS, 10, true, 5)\n                .then((success) => {\n                  self.events = self.timelineWindow.getEvents();\n                  if (success) {\n                    return _getMoreIfNeeded.call(self);\n                  } else {\n                    return Promise.reject(\"Failed to paginate\");\n                  }\n                });\n            } else {\n              return Promise.resolve(\"Done\");\n            }\n          }.bind(self);\n\n          getMoreIfNeeded()\n            .catch((err) => {\n              console.log(\"ERROR \" + err);\n            })\n            .finally(() => {\n              self.initialLoadDone = true;\n              if (initialEventId && !this.showCreatedRoomWelcomeHeader) {\n                self.scrollToEvent(initialEventId);\n              } else if (this.showCreatedRoomWelcomeHeader) {\n                self.onScroll();\n              }\n              self.restartRRTimer();\n            });\n        })\n        .catch((err) => {\n          console.log(\"Error fetching events!\", err, this);\n          if (err.errcode == \"M_UNKNOWN\" && initialEventId) {\n            // Try again without initial event!\n            this.onRoomJoined(null);\n          } else {\n            // Error. Done loading.\n            this.events = this.timelineWindow.getEvents();\n            this.initialLoadDone = true;\n          }\n        });\n    },\n\n    onRoomNotJoined() {\n      this.$navigation.push(\n        {\n          name: \"Join\",\n          params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n        },\n        0\n      );\n    },\n\n    scrollToEndOfTimeline() {\n      if (this.timelineWindow && this.timelineWindow.canPaginate(EventTimeline.FORWARDS)) {\n        this.loading = true;\n          // Instead of paging though ALL history, just reload a timeline at the live marker...\n          var timelineWindow = new TimelineWindow(this.$matrix.matrixClient, this.room.getUnfilteredTimelineSet(), {});\n          const self = this;\n          timelineWindow\n            .load(null, 20)\n            .then(() => {\n              self.timelineWindow = timelineWindow;\n              self.events = self.timelineWindow.getEvents();\n            })\n            .finally(() => {\n              this.loading = false;\n            });\n      } else {\n        // Can't paginate, just scroll to bottom of window!\n        this.smoothScrollToEnd();\n      }\n    },\n\n    touchX(event) {\n      if (event.type.indexOf(\"mouse\") !== -1) {\n        return event.clientX;\n      }\n      return event.touches[0].clientX;\n    },\n    touchY(event) {\n      if (event.type.indexOf(\"mouse\") !== -1) {\n        return event.clientY;\n      }\n      return event.touches[0].clientY;\n    },\n    touchStart(e, event) {\n      if (this.selectedEvent != event) {\n        this.showContextMenu = false;\n      }\n      this.selectedEvent = event;\n      this.touchStartX = this.touchX(e);\n      this.touchStartY = this.touchY(e);\n      this.touchTimer = setTimeout(this.touchTimerElapsed, 500);\n    },\n    touchEnd() {\n      this.touchTimer && clearTimeout(this.touchTimer);\n    },\n    touchCancel() {\n      this.touchTimer && clearTimeout(this.touchTimer);\n    },\n    touchMove(e) {\n      this.touchCurrentX = this.touchX(e);\n      this.touchCurrentY = this.touchY(e);\n      var tapTolerance = 4;\n      var touchMoved =\n        Math.abs(this.touchStartX - this.touchCurrentX) > tapTolerance ||\n        Math.abs(this.touchStartY - this.touchCurrentY) > tapTolerance;\n      if (touchMoved) {\n        this.touchTimer && clearTimeout(this.touchTimer);\n      }\n    },\n\n    /**\n     * Triggered when our \"long tap\" timer hits.\n     */\n    touchTimerElapsed() {\n      this.updateRecentEmojis();\n      this.showContextMenu = true;\n    },\n\n    /**\n     * If chat container is shrunk (probably because soft keyboard is shown) adjust\n     * the scroll position so that e.g. if we were looking at the last message when\n     * moving focus to the input field, we would still see the last message. Otherwise\n     * if would be hidden behind the keyboard.\n     */\n    handleChatContainerResize({ ignoredWidth, height }) {\n      const delta = height - this.chatContainerSize;\n      this.chatContainerSize = height;\n      const container = this.$refs.chatContainer;\n      if (delta < 0) {\n        container.scrollTop -= delta;\n      }\n    },\n\n    componentForEvent(event) {\n      switch (event.getType()) {\n        case \"m.room.member\":\n          if (event.getContent().membership == \"join\") {\n            if (\n              event.getPrevContent() &&\n              event.getPrevContent().membership == \"join\"\n            ) {\n              // We we already joined, so this must be a display name and/or avatar update!\n              return ContactChanged;\n            } else {\n              return ContactJoin;\n            }\n          } else if (event.getContent().membership == \"leave\") {\n            return ContactLeave;\n          } else if (event.getContent().membership == \"invite\") {\n            return ContactInvited;\n          }\n          break;\n\n        case \"m.room.message\":\n          if (event.getSender() != this.$matrix.currentUserId) {\n            if (event.getContent().msgtype == \"m.image\") {\n              return MessageIncomingImage;\n            } else if (event.getContent().msgtype == \"m.audio\") {\n              return MessageIncomingAudio;\n            } else if (event.getContent().msgtype == \"m.video\") {\n              return MessageIncomingVideo;\n            } else if (event.getContent().msgtype == \"m.file\") {\n              return MessageIncomingFile;\n            } else if (stickers.isStickerShortcode(event.getContent().body)) {\n              return MessageIncomingSticker;\n            }\n            return MessageIncomingText;\n          } else {\n            if (event.getContent().msgtype == \"m.image\") {\n              return MessageOutgoingImage;\n            } else if (event.getContent().msgtype == \"m.audio\") {\n              return MessageOutgoingAudio;\n            } else if (event.getContent().msgtype == \"m.video\") {\n              return MessageOutgoingVideo;\n            } else if (event.getContent().msgtype == \"m.file\") {\n              return MessageOutgoingFile;\n            } else if (stickers.isStickerShortcode(event.getContent().body)) {\n              return MessageOutgoingSticker;\n            }\n            return MessageOutgoingText;\n          }\n\n        case \"m.room.name\":\n          return RoomNameChanged;\n\n        case \"m.room.topic\":\n          return RoomTopicChanged;\n\n        case \"m.room.avatar\":\n          return RoomAvatarChanged;\n\n        case \"m.room.history_visibility\":\n          return RoomHistoryVisibility;\n\n        case \"m.room.join_rules\":\n          return RoomJoinRules;\n      }\n      return this.debugging ? DebugEvent : null;\n    },\n\n    paginateBackIfNeeded() {\n      this.$nextTick(() => {\n        const container = this.$refs.chatContainer;\n        if (container.scrollHeight <= container.clientHeight) {\n          this.handleScrolledToTop();\n        }\n      });\n    },\n    onScroll(ignoredevent) {\n      const container = this.$refs.chatContainer;\n      if (!container) {\n        return;\n      }\n      const bufferHeight = container.clientHeight * WINDOW_BUFFER_SIZE;\n      if (container.scrollTop <= bufferHeight) {\n        // Scrolled to top\n        this.handleScrolledToTop();\n      } else if (\n        container.scrollHeight - container.scrollTop.toFixed(0) - container.clientHeight <= bufferHeight\n      ) {\n        this.handleScrolledToBottom(false);\n      }\n      this.showScrollToEnd =\n        container.scrollHeight - container.scrollTop.toFixed(0) >\n        container.clientHeight || (this.timelineWindow &&\n        this.timelineWindow.canPaginate(EventTimeline.FORWARDS));\n\n      this.restartRRTimer();\n    },\n    onEvent(event) {\n      console.log(\"OnEvent\", JSON.stringify(event));\n      if (event.getRoomId() !== this.roomId) {\n        return; // Not for this room\n      }\n\n      if (this.initialLoadDone) {\n        this.paginateBackIfNeeded();\n      }\n\n      // If we are at bottom, scroll to see new events...\n      const container = this.$refs.chatContainer;\n      var scrollToSeeNew = event.getSender() == this.$matrix.currentUserId; // When we sent, scroll\n      if (\n        container.scrollHeight - container.scrollTop.toFixed(0) ==\n        container.clientHeight\n      ) {\n        scrollToSeeNew = true;\n      }\n      if (this.initialLoadDone && event.forwardLooking && !event.isRelation()) {\n        this.handleScrolledToBottom(scrollToSeeNew);\n      }\n    },\n\n    onUserTyping(event, member) {\n      if (member.roomId !== this.roomId) {\n        return; // Not for this room\n      }\n      if (member.typing) {\n        if (!this.typingMembers.includes(member)) {\n          this.typingMembers.push(member);\n        }\n      } else {\n        const index = this.typingMembers.indexOf(member);\n        if (index > -1) {\n          this.typingMembers.splice(index, 1);\n        }\n      }\n      console.log(\"Typing: \", this.typingMembers);\n    },\n\n    sendCurrentTextMessage() {\n      // DOn't have \"enter\" send messages while in recorder.\n      if (this.currentInput.length > 0 && !this.showRecorder) {\n        this.sendMessage(this.currentInput);\n        this.currentInput = \"\";\n        this.editedEvent = null; //TODO - Is this a good place to reset this?\n        this.replyToEvent = null;\n      }\n    },\n\n    sendMessage(text) {\n      if (text && text.length > 0) {\n        util\n          .sendTextMessage(\n            this.$matrix.matrixClient,\n            this.roomId,\n            text,\n            this.editedEvent,\n            this.replyToEvent\n          )\n          .then(() => {\n            console.log(\"Sent message\");\n          })\n          .catch((err) => {\n            console.log(\"Failed to send:\", err);\n          });\n      }\n    },\n\n    /**\n     * Show attachment picker to select file\n     */\n    showAttachmentPicker() {\n      // Guests not currently allowed to send attachments (=actually upload them)\n      // See https://matrix.org/docs/spec/client_server/r0.2.0#guest-access\n      // if (this.$matrix.currentUser && this.$matrix.currentUser.is_guest) {\n      //   this.showNotAllowedForGuests = true;\n      //   return;\n      // }\n      this.$refs.attachment.click();\n    },\n\n    /**\n     * Handle picked attachment\n     */\n    handlePickedAttachment(event) {\n      if (event.target.files && event.target.files[0]) {\n        var reader = new FileReader();\n        reader.onload = (e) => {\n          this.currentSendShowSendButton = true;\n          this.currentImageInput = e.target.result;\n          this.currentImageInputPath = event.target.files[0];\n        };\n        reader.readAsDataURL(event.target.files[0]);\n      }\n    },\n\n    showStickerPicker() {\n       this.$refs.stickerPickerSheet.open();\n    },\n\n    onUploadProgress(p) {\n      if (p.total) {\n        this.currentSendProgress =\n          \"Uploaded \" + (p.loaded || 0) + \" of \" + p.total;\n      } else {\n        this.currentSendProgress = \"Uploaded \" + (p.loaded || 0);\n      }\n    },\n\n    sendAttachment(withText) {\n      if (this.currentImageInputPath) {\n        this.currentSendProgress = null;\n        this.currentSendOperation = util.sendImage(\n          this.$matrix.matrixClient,\n          this.roomId,\n          this.currentImageInputPath,\n          this.onUploadProgress\n        );\n        this.currentSendOperation\n          .then(() => {\n            this.currentSendOperation = null;\n            this.currentImageInput = null;\n            this.currentImageInputPath = null;\n            this.currentSendProgress = null;\n            if (withText) {\n              this.sendMessage(withText);\n            }\n          })\n          .catch((err) => {\n            this.currentSendError = err.toLocaleString();\n            this.currentSendOperation = null;\n            this.currentSendProgress = null;\n          });\n      }\n    },\n\n    cancelSendAttachment() {\n      if (this.currentSendOperation) {\n        this.currentSendOperation.reject(\"Canceled\");\n      }\n      this.currentSendOperation = null;\n      this.currentImageInput = null;\n      this.currentImageInputPath = null;\n      this.currentSendProgress = null;\n      this.currentSendError = null;\n    },\n\n    handleScrolledToTop() {\n      console.log(\"@top\");\n      if (\n        this.timelineWindow &&\n        this.timelineWindow.canPaginate(EventTimeline.BACKWARDS) &&\n        !this.timelineWindowPaginating\n      ) {\n        this.timelineWindowPaginating = true;\n        this.timelineWindow\n          .paginate(EventTimeline.BACKWARDS, 10, true)\n          .then((success) => {\n            if (success) {\n              this.scrollPosition.prepareFor(\"up\");\n              this.events = this.timelineWindow.getEvents();\n              this.$nextTick(() => {\n                // restore scroll position!\n                console.log(\"Restore scroll!\");\n                this.scrollPosition.restore();\n              });\n            }\n          })\n          .finally(() => {\n            this.timelineWindowPaginating = false;\n          });\n      }\n    },\n\n    handleScrolledToBottom(scrollToEnd) {\n      console.log(\"@bottom\");\n      if (\n        this.timelineWindow &&\n        this.timelineWindow.canPaginate(EventTimeline.FORWARDS) &&\n        !this.timelineWindowPaginating\n      ) {\n        this.timelineWindowPaginating = true;\n        this.timelineWindow\n          .paginate(EventTimeline.FORWARDS, 10, true)\n          .then((success) => {\n            if (success) {\n              this.scrollPosition.prepareFor(\"down\");\n              this.events = this.timelineWindow.getEvents();\n              this.$nextTick(() => {\n                // restore scroll position!\n                console.log(\"Restore scroll!\");\n                this.scrollPosition.restore();\n                if (scrollToEnd) {\n                  this.smoothScrollToEnd();\n                }\n              });\n            }\n          })\n          .finally(() => {\n            this.timelineWindowPaginating = false;\n          });\n      }\n    },\n\n    /**\n     * Scroll so that the given event is at the middle of the chat view (if more events) or else at the bottom.\n     */\n    scrollToEvent(eventId) {\n      const container = this.$refs.chatContainer;\n      const ref = this.$refs[eventId];\n      if (container && ref) {\n        const targetY = container.clientHeight / 2;\n        const sourceY = ref[0].offsetTop;\n        container.scrollTo(0, sourceY - targetY);\n      }\n    },\n\n    smoothScrollToEnd() {\n      this.$nextTick(function () {\n        const container = this.$refs.chatContainer;\n        if (container.children.length > 0) {\n          const lastChild = container.children[container.children.length - 1];\n          console.log(\"Scroll into view\", lastChild);\n          window.requestAnimationFrame(() => {\n            lastChild.scrollIntoView({\n              behavior: \"smooth\",\n              block: \"start\",\n              inline: \"nearest\",\n            });\n          });\n        }\n      });\n    },\n\n    showMoreMessageOperations(e) {\n      this.addReaction(e);\n    },\n    \n    addReaction(e) {\n      const event = e.event;\n      // Store the event we are reacting to, so that we know where to\n      // send when the picker closes.\n      this.selectedEvent = event;\n      this.$refs.messageOperationsSheet.open();\n      this.showEmojiPicker = true;\n    },\n\n    addQuickReaction(e) {\n      this.sendQuickReaction({ reaction: e.emoji, event: e.event });\n    },\n\n    addReply(event) {\n      this.replyToEvent = event;\n      this.$refs.messageInput.focus();\n    },\n\n    edit(event) {\n      this.editedEvent = event;\n      this.currentInput = event.getContent().body;\n      this.$refs.messageInput.focus();\n    },\n\n    redact(event) {\n      this.$matrix.matrixClient\n        .redactEvent(event.getRoomId(), event.getId())\n        .then(() => {\n          console.log(\"Message redacted\");\n        })\n        .catch((err) => {\n          console.log(\"Redaction failed: \", err);\n        });\n    },\n\n    download(event) {\n      util\n        .getAttachment(this.$matrix.matrixClient, event)\n        .then((url) => {\n          const link = document.createElement(\"a\");\n          link.href = url;\n          link.target = \"_blank\";\n          link.download = event.getContent().body || \"Download\";\n          link.click();\n          URL.revokeObjectURL(url);\n        })\n        .catch((err) => {\n          console.log(\"Failed to fetch attachment: \", err);\n        });\n    },\n\n    cancelEditReply() {\n      this.currentInput = \"\";\n      this.editedEvent = null;\n      this.replyToEvent = null;\n    },\n\n    emojiSelected(e) {\n      this.showEmojiPicker = false;\n      if (this.selectedEvent) {\n        const event = this.selectedEvent;\n        this.selectedEvent = null;\n        this.sendQuickReaction({ reaction: e.data, event: event });\n      }\n    },\n\n    sendQuickReaction(e) {\n      util\n        .sendQuickReaction(\n          this.$matrix.matrixClient,\n          this.roomId,\n          e.reaction,\n          e.event\n        )\n        .then(() => {\n          console.log(\"Quick reaction message\");\n        })\n        .catch((err) => {\n          console.log(\"Failed to send quick reaction:\", err);\n        });\n    },\n\n    sendSticker(stickerShortCode) {\n      this.sendMessage(stickerShortCode);\n    },\n\n    showContextMenuForEvent(e) {\n      const event = e.event;\n      const ref = this.$refs[event.getId()];\n      if (ref) {\n        console.log(\"Got the ref\", ref);\n      }\n      this.selectedEvent = event;\n      this.updateRecentEmojis();\n      this.showContextMenu = true;\n      this.showContextMenuAnchor = e.anchor;\n    },\n\n    viewProfile() {\n      this.$navigation.push({ name: \"Profile\" }, 1);\n    },\n\n    closeContextMenuIfOpen(e) {\n      if (this.showContextMenu) {\n        this.showContextMenu = false;\n        e.preventDefault();\n      }\n    },\n\n    /** Stop Read Receipt timer */\n    stopRRTimer() {\n      if (this.rrTimer) {\n        clearTimeout(this.rrTimer);\n        this.rrTimer = null;\n      }\n    },\n\n    /**\n     * Start/restart the timer to Read Receipts.\n     */\n    restartRRTimer() {\n      this.stopRRTimer();\n      this.rrTimer = setTimeout(this.rrTimerElapsed, READ_RECEIPT_TIMEOUT);\n    },\n\n    rrTimerElapsed() {\n      this.rrTimer = null;\n\n      const container = this.$refs.chatContainer;\n      const elFirst = util.getFirstVisibleElement(container);\n      const elLast = util.getLastVisibleElement(container);\n      if (elFirst && elLast) {\n        const eventIdFirst = elFirst.getAttribute(\"eventId\");\n        const eventIdLast = elLast.getAttribute(\"eventId\");\n        if (eventIdLast && this.room) {\n          var event = this.room.findEventById(eventIdLast);\n          const index = this.events.indexOf(event);\n\n          // Walk backwards through visible events to the first one that is incoming\n          //\n          var lastTimestamp = 0;\n          if (this.lastRR) {\n            lastTimestamp = this.lastRR.getTs();\n          }\n\n          for (var i = index; i >= 0; i--) {\n            event = this.events[i];\n            if (event == this.lastRR || event.getTs() <= lastTimestamp) {\n              // Already sent this or too old...\n              break;\n            }\n            // Make sure it's not a local echo event...\n            if (!event.getId().startsWith(\"~\")) {\n              // Send read receipt\n              this.$matrix.matrixClient\n                .sendReadReceipt(event)\n                .then(() => {\n                  this.$matrix.matrixClient.setRoomReadMarkers(\n                    this.room.roomId,\n                    event.getId()\n                  );\n                })\n                .then(() => {\n                  console.log(\"RR sent for event: \" + event.getId());\n                  this.lastRR = event;\n                })\n                .catch((err) => {\n                  console.log(\"Failed to update read marker: \", err);\n                })\n                .finally(() => {\n                  this.restartRRTimer();\n                });\n              return; // Bail out here\n            }\n\n            // Stop iterating at first visible\n            if (event.getId() == eventIdFirst) {\n              break;\n            }\n          }\n        }\n      }\n      this.restartRRTimer();\n    },\n\n    showDayMarkerBeforeEvent(event) {\n      const idx = this.events.indexOf(event);\n      if (idx <= 0) {\n        return true;\n      }\n      const previousEvent = this.events[idx - 1];\n      return util.dayDiff(previousEvent.getTs(), event.getTs()) > 0;\n    },\n\n    dayForEvent(event) {\n      return util.formatDay(event.getTs());\n    },\n\n    showRecordingUI() {\n      this.showRecorderPTT = false;\n      this.showRecorder = true;\n    },\n\n    startRecording() {\n      this.showRecorderPTT = true;\n      this.showRecorder = true;\n    },\n\n    onVoiceRecording(event) {\n      this.currentSendShowSendButton = false;\n      this.currentImageInputPath = event.file;\n      var text = undefined;\n      if (this.currentInput && this.currentInput.length > 0) {\n        text = this.currentInput;\n        this.currentInput = \"\";\n      }\n      this.sendAttachment(text);\n      this.showRecorder = false;\n\n      // Log event to Clean Insights\n      this.$ci.event(\"Audio\", \"Voice message sent\");\n    },\n\n    closeCreateRoomWelcomeHeader() {\n      this.showCreatedRoomWelcomeHeader = false;\n      this.$nextTick(() => {\n        // We change the layout when removing the welcome header, so call\n        // onScroll here to handle updates (e.g. remove the \"scroll to last\" if we now\n        // can see all messages).\n        this.onScroll();\n      });\n    },\n\n    updateRecentEmojis() {\n      if (this.$refs.emojiPicker) {\n        this.recentEmojis = this.$refs.emojiPicker.mapEmojis[\"Frequently\"];\n        return;\n      }\n      this.recentEmojis = [];\n    }\n\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=616a636d&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VDivider,VIcon,VImg,VProgressCircular,VRow,VSpacer,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"join-root\"},[(!_vm.waitingForInfo && !_vm.waitingForMembership)?_c('div',{staticClass:\"text-center\"},[(!_vm.currentUser)?_c('v-btn',{staticClass:\"btn-login\",attrs:{\"text\":\"\",\"small\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleLogin($event)}}},[_vm._v(\"Login\")]):_vm._e(),_c('v-avatar',{staticClass:\"join-avatar\"},[(_vm.roomAvatar)?_c('v-img',{attrs:{\"src\":_vm.roomAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.roomName.substring(0, 1).toUpperCase()))])],1),_c('div',{staticClass:\"join-title\"},[_vm._v(\"Welcome to \"+_vm._s(_vm.roomName))]),_c('div',{staticClass:\"join-message\"}),_c('v-container',{staticClass:\"join-user-info\"},[(_vm.canEditProfile)?_c('v-row',[_c('v-col',{staticClass:\"flex-grow-0 flex-shrink-0\"},[_c('v-avatar',{on:{\"click\":_vm.showAvatarPickerList}},[(_vm.selectedProfile)?_c('v-img',{attrs:{\"src\":_vm.selectedProfile.image}}):_vm._e()],1)],1),_c('v-col',{staticClass:\"flex-shrink-1 flex-grow-1\"},[_c('v-select',{ref:\"avatar\",attrs:{\"items\":_vm.availableAvatars,\"cache-items\":\"\",\"label\":\"User name\",\"outlined\":\"\",\"dense\":\"\",\"value\":_vm.availableAvatars[0],\"single-line\":\"\"},on:{\"change\":_vm.selectAvatar},scopedSlots:_vm._u([{key:\"selection\",fn:function(){return [_c('v-text-field',{attrs:{\"background-color\":\"transparent\",\"solo\":\"\",\"flat\":\"\",\"hide-details\":\"\"},nativeOn:{\"click\":function($event){$event.stopPropagation();{\n                  }}},model:{value:(_vm.selectedProfile.name),callback:function ($$v) {_vm.$set(_vm.selectedProfile, \"name\", $$v)},expression:\"selectedProfile.name\"}})]},proxy:true},{key:\"item\",fn:function(data){return [_c('v-avatar',{attrs:{\"size\":\"32\"}},[_c('v-img',{attrs:{\"src\":data.item.image}})],1),_c('div',{staticClass:\"ml-2\"},[_vm._v(_vm._s(data.item.name))])]}}],null,false,1874003059)})],1)],1):_c('v-row',[_c('v-col',[_vm._v(\" You are joining as: \"),_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('v-avatar',{attrs:{\"color\":\"#e0e0e0\"}},[(_vm.userAvatar)?_c('v-img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])],1)],1),_vm._v(\" \"+_vm._s(_vm.userDisplayName)+\" \")])],1)],1),(!_vm.currentUser)?_c('v-btn',{staticClass:\"btn-dark\",attrs:{\"large\":\"\",\"block\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleJoin($event)}}},[_vm._v(\"Join as guest\")]):_c('v-btn',{staticClass:\"btn-dark\",attrs:{\"large\":\"\",\"block\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleJoin($event)}}},[_vm._v(\"Join room\")]),(_vm.loadingMessage)?_c('div',[_vm._v(_vm._s(_vm.loadingMessage))]):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"join-root\">\n    <div v-if=\"!waitingForInfo && !waitingForMembership\" class=\"text-center\">\n      <v-btn\n        class=\"btn-login\"\n        text\n        small\n        @click.stop=\"handleLogin\"\n        :loading=\"loading\"\n        v-if=\"!currentUser\"\n        >Login</v-btn\n      >\n\n      <v-avatar class=\"join-avatar\">\n        <v-img v-if=\"roomAvatar\" :src=\"roomAvatar\" />\n        <span v-else class=\"white--text headline\">{{\n          roomName.substring(0, 1).toUpperCase()\n        }}</span>\n      </v-avatar>\n      <div class=\"join-title\">Welcome to {{ roomName }}</div>\n      <div class=\"join-message\">\n        <!-- Join the group chat in a web browser or with the Keanu app. -->\n      </div>\n      <v-container class=\"join-user-info\">\n        <v-row v-if=\"canEditProfile\">\n          <v-col class=\"flex-grow-0 flex-shrink-0\">\n            <v-avatar @click=\"showAvatarPickerList\">\n              <v-img v-if=\"selectedProfile\" :src=\"selectedProfile.image\" />\n            </v-avatar>\n          </v-col>\n          <v-col class=\"flex-shrink-1 flex-grow-1\">\n            <v-select\n              ref=\"avatar\"\n              :items=\"availableAvatars\"\n              cache-items\n              label=\"User name\"\n              outlined\n              dense\n              @change=\"selectAvatar\"\n              :value=\"availableAvatars[0]\"\n              single-line\n            >\n              <template v-slot:selection>\n                <v-text-field\n                  background-color=\"transparent\"\n                  solo\n                  flat\n                  hide-details\n                  @click.native.stop=\"\n                    {\n                    }\n                  \"\n                  v-model=\"selectedProfile.name\"\n                ></v-text-field>\n              </template>\n              <template v-slot:item=\"data\">\n                <v-avatar size=\"32\">\n                  <v-img :src=\"data.item.image\" />\n                </v-avatar>\n                <div class=\"ml-2\">{{ data.item.name }}</div>\n              </template>\n            </v-select>\n          </v-col>\n        </v-row>\n        <v-row v-else>\n          <v-col>\n            You are joining as:\n            <div style=\"display: inline-block\">\n              <v-avatar color=\"#e0e0e0\" style=\"\">\n                <v-img v-if=\"userAvatar\" :src=\"userAvatar\" />\n                <span v-else class=\"white--text headline\">{{\n                  userAvatarLetter\n                }}</span>\n              </v-avatar>\n            </div>\n            {{ userDisplayName }}\n          </v-col>\n        </v-row>\n      </v-container>\n\n      <!--<v-btn\n        class=\"btn-light\"\n        large\n        block\n        @click.stop=\"handleOpenApp\"\n        :loading=\"loading\"\n        >Open Keanu app</v-btn\n      >\n\n      <div class=\"join-or-divider\">OR</div> -->\n\n      <v-btn\n        class=\"btn-dark\"\n        large\n        block\n        @click.stop=\"handleJoin\"\n        :loading=\"loading\"\n        v-if=\"!currentUser\"\n        >Join as guest</v-btn\n      >\n      <v-btn\n        class=\"btn-dark\"\n        large\n        block\n        @click.stop=\"handleJoin\"\n        :loading=\"loading\"\n        v-else\n        >Join room</v-btn\n      >\n\n      <!-- <div class=\"join-privacy\">\n        Enhance your physical privacy. <a href=\"#\">Learn how</a>\n      </div> -->\n\n      <div v-if=\"loadingMessage\">{{ loadingMessage }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport User from \"../models/user\";\nimport util from \"../plugins/utils\";\nimport config from \"../assets/config\";\n\nexport default {\n  name: \"Join\",\n  data() {\n    return {\n      roomName: null,\n      roomAvatar: null,\n      guestUser: new User(config.defaultServer, \"\", \"\", true),\n      loading: false,\n      loadingMessage: null,\n      waitingForInfo: true,\n      waitingForMembership: false,\n      availableAvatars: [],\n      selectedProfile: null,\n    };\n  },\n  mounted() {\n    this.$matrix.on(\"Room.myMembership\", this.onMyMembership);\n    this.availableAvatars = util.getDefaultAvatars();\n    this.selectAvatar(this.availableAvatars[\n      Math.floor(Math.random() * this.availableAvatars.length)\n    ]);\n  },\n  destroyed() {\n    this.$matrix.off(\"Room.myMembership\", this.onMyMembership);\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    room() {\n      return this.$matrix.currentRoom;\n    },\n    roomId() {\n      if (this.room) {\n        return this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n    roomAliasOrId() {\n      if (this.room) {\n        return this.room.getCanonicalAlias() || this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n\n    canEditProfile() {\n      // If we have an account already, we can't edit profile here (need to go into profile view)\n      if (this.currentUser) {\n        return false;\n      }\n      return true;\n    },\n\n    userDisplayName() {\n      return this.$matrix.currentUserDisplayName;\n    },\n\n    userAvatar() {\n      if (!this.$matrix.userAvatar) {\n        return null;\n      }\n      return this.$matrix.matrixClient.mxcUrlToHttp(\n        this.$matrix.userAvatar,\n        80,\n        80,\n        \"scale\",\n        true\n      );\n    },\n\n    userAvatarLetter() {\n      if (!this.currentUser || !this.currentUser.userId) {\n        return null;\n      }\n      return (this.currentUserDisplayName || this.currentUser.userId.substring(1))\n        .substring(0, 1)\n        .toUpperCase();\n    },\n  },\n  watch: {\n    roomId: {\n      immediate: true,\n      handler(value, oldVal) {\n        if (!value || (value && value == oldVal)) {\n          return; // No change.\n        }\n        console.log(\n          \"Join: Current room changed to \" + (value ? value : \"null\")\n        );\n        this.roomName = this.roomId;\n\n        this.waitingForInfo = true;\n        const self = this;\n          this.waitingForMembership = true;\n        if (this.currentUser) {\n          this.getLoginPromise()\n          .then(() => {\n            self.$matrix.setCurrentRoomId(self.roomAliasOrId); // Go to this room, now or when joined.\n            const room = self.$matrix.getRoom(self.roomAliasOrId);\n\n            // Already joined?\n            if (\n              room &&\n              room.hasMembershipState(self.currentUser.user_id, \"join\")\n            ) {\n              // Yes, go to room\n              self.$navigation.push(\n                {\n                  name: \"Chat\",\n                  params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n                },\n                -1\n              );\n              return;\n            }\n          })\n          .catch(err => {\n            console.log(\"Error logging in: \", err)\n          })\n          .finally(() => {\n            this.waitingForMembership = false;\n            this.getRoomInfo();\n          });\n        } else {\n          this.waitingForMembership = false;\n          this.getRoomInfo();\n        }\n      }\n    },\n  },\n\n  methods: {\n    /**\n     * Returns a promise that will log us into the Matrix.\n     * \n     * Will use a real account, if we have one, otherwise will create\n     * a random account.\n     */\n    getLoginPromise() {\n      if (this.$matrix.ready) {\n        return Promise.resolve(this.$matrix.currentUser);\n      }\n      return this.$store.dispatch(\"auth/login\", this.currentUser || this.guestUser);\n    },\n\n    getRoomInfo() {\n      if (this.roomId.startsWith(\"#\")) {\n        this.$matrix\n          .getPublicRoomInfo(this.roomId)\n          .then((room) => {\n            console.log(\"Found room:\", room);\n            this.roomName = room.name;\n            this.roomAvatar = room.avatar;\n          })\n          .catch((err) => {\n            console.log(\"Could not find room info\", err);\n          })\n          .finally(() => {\n            this.waitingForInfo = false;\n          });\n      } else {\n        // Private room, try to get name\n        const room = this.$matrix.getRoom(this.roomId);\n        if (room) {\n          this.roomName = room.name || this.roomName;\n        }\n        this.waitingForInfo = false;\n      }\n    },\n\n    onMyMembership(room, membership, ignoredprevMembership) {\n      if (room && room.roomId == this.roomId && membership == \"join\") {\n        this.$nextTick(() => {\n          this.$navigation.push(\n            {\n              name: \"Chat\",\n              params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n            },\n            -1\n          );\n        });\n      }\n    },\n\n    handleLogin() {\n      this.$navigation.push({path: \"/login\"}, 1);\n    },\n\n    handleOpenApp() {\n      console.log(\"Open app...\"); //TODO\n    },\n\n    handleJoin() {\n      this.loading = true;\n      this.loadingMessage = \"Logging in...\";\n      const hasUser = this.currentUser ? true : false;\n      var setProfileData = false;\n      return this.getLoginPromise()\n        .then(\n          function (user) {\n            if (user.is_guest && !hasUser) {\n              // Newly created account, joining first room.\n              // Set avatar and display name to either the randomly chosen ones, or the\n              // ones the users has changed to.\n              setProfileData = true;\n\n              // Set display name and avatar directly on the matrix object.\n              if (this.selectedProfile.name && this.selectedProfile.name.length > 0) {\n                this.$matrix.userDisplayName = this.selectedProfile.name;\n              }\n            }\n\n            if (!setProfileData || !this.selectedProfile.name || this.selectedProfile.name.length == 0) {\n              return Promise.resolve(user);\n            } else {\n              console.log(\"Join: Set display name to: \" + this.selectedProfile.name);\n              return this.$matrix.matrixClient.setDisplayName(\n                this.selectedProfile.name,\n                undefined\n              );\n            }\n          }.bind(this)\n        )\n        .then(\n          function () {\n            if (!setProfileData || !this.selectedProfile.image) {\n              console.log(\"Join: No avatar change\");\n              return Promise.resolve(\"no avatar\");\n            } else {\n              console.log(\"Join: Updating avatar\");\n              return util.setAvatar(\n                this.$matrix,\n                this.selectedProfile.image,\n                function (progress) {\n                  console.log(\"Progress: \" + JSON.stringify(progress));\n                }\n              );\n            }\n          }.bind(this)\n        )\n        .then(\n          function (ignoreduser) {\n            console.log(\"Join: joining room\");\n            this.loadingMessage = \"Joining room...\";\n            return this.$matrix.matrixClient.joinRoom(this.roomId);\n          }.bind(this)\n        )\n        .then((ignoredRoom) => {\n          this.loading = false;\n          this.loadingMessage = null;\n          this.$nextTick(() => {\n            this.$navigation.push(\n              {\n                name: \"Chat\",\n                params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n              },\n              -1\n            );\n          });\n        })\n        .catch((err) => {\n          // TODO - handle error\n          console.log(\"Failed to join room\", err);\n          this.loading = false;\n          this.loadingMessage = err.toString();\n        });\n    },\n\n    selectAvatar(value) {\n      this.selectedProfile = Object.assign({}, value); // Make a copy, so editing does not destroy data\n    },\n\n    showAvatarPickerList() {\n      this.$refs.avatar.$refs.input.click();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/join.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Join.vue?vue&type=template&id=08b9c7ad&\"\nimport script from \"./Join.vue?vue&type=script&lang=js&\"\nexport * from \"./Join.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Join.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCol,VContainer,VImg,VRow,VSelect,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-root\"},[(_vm.showBackArrow)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$navigation.pop($event)}}},[_c('v-icon',[_vm._v(\"arrow_back\")])],1):_vm._e(),_c('div',{staticClass:\"text-center\",attrs:{\"color\":\"rgba(255,255,255,0.1)\"}},[_c('div',{staticClass:\"h2\"},[_vm._v(\"Login\")]),_c('v-form',{model:{value:(_vm.isValid),callback:function ($$v) {_vm.isValid=$$v},expression:\"isValid\"}},[_c('v-text-field',{attrs:{\"label\":\"Username\",\"color\":\"black\",\"background-color\":\"white\",\"outlined\":\"\",\"rules\":[function (v) { return !!v || 'Username is required'; }],\"error\":_vm.userErrorMessage != null,\"error-messages\":_vm.userErrorMessage,\"required\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.$refs.password.focus()}},model:{value:(_vm.user.user_id),callback:function ($$v) {_vm.$set(_vm.user, \"user_id\", $$v)},expression:\"user.user_id\"}}),_c('v-text-field',{ref:\"password\",attrs:{\"label\":\"Password\",\"color\":\"black\",\"background-color\":\"white\",\"outlined\":\"\",\"type\":\"password\",\"rules\":[function (v) { return !!v || 'Password is required'; }],\"error\":_vm.passErrorMessage != null,\"error-messages\":_vm.passErrorMessage,\"required\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return (function () { if (_vm.isValid && !_vm.loading) { _vm.handleLogin() }})($event)}},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('v-btn',{attrs:{\"disabled\":!_vm.isValid || _vm.loading,\"primary\":\"\",\"large\":\"\",\"block\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleLogin($event)}}},[_vm._v(\"Login\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login-root\">\n    <v-btn v-if=\"showBackArrow\" icon @click.stop=\"$navigation.pop\">\n      <v-icon>arrow_back</v-icon>\n    </v-btn>\n\n    <div color=\"rgba(255,255,255,0.1)\" class=\"text-center\">\n      <div class=\"h2\">Login</div>\n      <v-form v-model=\"isValid\">\n        <v-text-field\n          v-model=\"user.user_id\"\n          label=\"Username\"\n          color=\"black\"\n          background-color=\"white\"\n          outlined\n          :rules=\"[(v) => !!v || 'Username is required']\"\n          :error=\"userErrorMessage != null\"\n          :error-messages=\"userErrorMessage\"\n          required\n          v-on:keyup.enter=\"$refs.password.focus()\"\n        ></v-text-field>\n        <v-text-field\n          ref=\"password\"\n          v-model=\"user.password\"\n          label=\"Password\"\n          color=\"black\"\n          background-color=\"white\"\n          outlined\n          type=\"password\"\n          :rules=\"[(v) => !!v || 'Password is required']\"\n          :error=\"passErrorMessage != null\"\n          :error-messages=\"passErrorMessage\"\n          required\n          v-on:keyup.enter=\"() => { if (isValid && !loading) { handleLogin() }}\"\n        ></v-text-field>\n          <v-btn\n            :disabled=\"!isValid || loading\"\n            primary\n            large\n            block\n            @click.stop=\"handleLogin\"\n            :loading=\"loading\"\n            >Login</v-btn\n          >\n      </v-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport User from \"../models/user\";\nimport util from \"../plugins/utils\";\nimport config from \"../assets/config\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      user: new User(config.defaultServer, \"\", \"\"),\n      isValid: true,\n      loading: false,\n      message: \"\",\n      userErrorMessage: null,\n      passErrorMessage: null,\n    };\n  },\n  computed: {\n    loggedIn() {\n      return this.$store.state.auth.status.loggedIn;\n    },\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    showBackArrow() {\n      return this.$navigation && this.$navigation.canPop();\n    }\n  },\n  created() {\n    if (this.loggedIn) {\n      this.$navigation.push({name: \"Chat\", params: { roomId: util.sanitizeRoomId(this.$matrix.currentRoomId) }}, -1);\n    }\n  },\n  watch: {\n    user: {\n      handler() {\n        // Reset manual errors\n        this.userErrorMessage = null;\n        this.passErrorMessage = null;\n      },\n      deep: true,\n    },\n    message() {\n      if (\n        this.message &&\n        this.message.toLowerCase().includes(\"user\")\n      ) {\n        this.userErrorMessage = this.message;\n      } else {\n        this.userErrorMessage = null;\n      }\n      if (\n        this.message &&\n        this.message.toLowerCase().includes(\"pass\")\n      ) {\n        this.passErrorMessage = this.message;\n      } else {\n        this.passErrorMessage = null;\n      }\n    },\n  },\n  methods: {\n    handleLogin() {\n      if (this.user.user_id && this.user.password) {\n\n      // Reset errors\n      this.message = null;\n\n        // Is it a full matrix user id? Modify a copy, so that the UI will still show the full ID.\n        var user = Object.assign({}, this.user);\n        user.normalize();\n\n        this.loading = true;\n        this.$store.dispatch(\"auth/login\", user).then(\n          () => {\n            if (this.$matrix.currentRoomId) {\n              this.$navigation.push({name: \"Chat\", params: { roomId: util.sanitizeRoomId(this.$matrix.currentRoomId) }}, -1);\n            } else {\n              this.$navigation.push({name: \"Home\"}, -1);            \n            }\n          },\n          (error) => {\n            this.loading = false;\n            this.message =\n              (error.data && error.data.error) ||\n              error.message ||\n              error.toString();\n            console.log(\"Message set to \", this.message);\n          }\n        );\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/login.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=5981c334&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VForm,VIcon,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user)?_c('div',{staticClass:\"profile\"},[_c('div',{staticClass:\"chat-header\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"room-name\"},[_vm._v(\"My Profile\")]),_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$navigation && _vm.$navigation.canPop()),expression:\"$navigation && $navigation.canPop()\"}],staticClass:\"header-button-right\",attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$navigation.pop($event)}}},[_c('v-icon',[_vm._v(\"close\")])],1)],1)],1),_c('v-container',{staticClass:\"user-info\"},[_c('v-row',[_c('v-col',{staticClass:\"flex-grow-0 flex-shrink-0\"},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"48\",\"color\":\"#e0e0e0\"}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])])],1),_c('v-col',{staticClass:\"flex-shrink-1 flex-grow-1\"},[_c('div',{staticClass:\"h1\"},[_vm._v(_vm._s(_vm.displayName))]),_c('div',{staticClass:\"text-center\"},[_vm._v(_vm._s(_vm.$matrix.currentUser.user_id))]),(_vm.$matrix.currentUser.is_guest)?_c('div',[_vm._v(\" This identity is temporary. Set a password to use it again. \")]):_vm._e(),_c('v-btn',{staticClass:\"outlined-button\",attrs:{\"depressed\":\"\",\"block\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.logout($event)}}},[_vm._v(\"Logout\")])],1)],1)],1),_c('div',{staticClass:\"action\",on:{\"click\":function($event){_vm.showEditPasswordDialog = true}}},[_c('v-icon',[_vm._v(\"lock\")]),_c('span',[_vm._v(\"Set password\")])],1),_c('div',{staticClass:\"action\",on:{\"click\":function($event){_vm.editValue = _vm.displayName;_vm.showEditDisplaynameDialog = true}}},[_c('v-icon',[_vm._v(\"edit\")]),_c('span',[_vm._v(\"Change name\")])],1),_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.showEditPasswordDialog),callback:function ($$v) {_vm.showEditPasswordDialog=$$v},expression:\"showEditPasswordDialog\"}},[_c('v-card',{attrs:{\"disabled\":_vm.settingPassword}},[_c('v-card-title',[_vm._v(\"Change password\")]),_c('v-card-text',[(!_vm.$matrix.currentUser.is_guest)?_c('v-text-field',{attrs:{\"label\":\"Old password\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}):_vm._e(),_c('v-text-field',{attrs:{\"label\":\"New password\",\"type\":\"password\"},model:{value:(_vm.newPassword1),callback:function ($$v) {_vm.newPassword1=$$v},expression:\"newPassword1\"}}),_c('v-text-field',{attrs:{\"label\":\"Repeat new password\",\"type\":\"password\"},model:{value:(_vm.newPassword2),callback:function ($$v) {_vm.newPassword2=$$v},expression:\"newPassword2\"}}),(_vm.passwordErrorMessage)?_c('div',{staticClass:\"red--text\"},[_vm._v(_vm._s(_vm.passwordErrorMessage))]):_vm._e()],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.closeEditPasswordDialog}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"disabled\":!_vm.passwordsMatch,\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){return _vm.setPassword(_vm.$matrix.currentUser.is_guest ? _vm.$matrix.currentUser.password : _vm.password, _vm.newPassword1);}}},[_vm._v(\"Ok\")])],1)],1)],1),_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.showEditDisplaynameDialog),callback:function ($$v) {_vm.showEditDisplaynameDialog=$$v},expression:\"showEditDisplaynameDialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Display name\")]),_c('v-card-text',[_c('v-text-field',{model:{value:(_vm.editValue),callback:function ($$v) {_vm.editValue=$$v},expression:\"editValue\"}})],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.showEditDisplaynameDialog = false}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.setDisplayName(_vm.editValue);\n            _vm.showEditDisplaynameDialog = false;}}},[_vm._v(\"Ok\")])],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"user\" class=\"profile\">\n    <div class=\"chat-header\">\n      <v-container fluid>\n        <div class=\"room-name\">My Profile</div>\n            <v-btn\n              text\n              class=\"header-button-right\"\n              v-show=\"$navigation && $navigation.canPop()\"\n              @click.stop=\"$navigation.pop\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n\n      </v-container>\n    </div>\n\n\n    <v-container class=\"user-info\">\n        <v-row>\n          <v-col class=\"flex-grow-0 flex-shrink-0\">\n                <v-avatar class=\"avatar\" size=\"48\" color=\"#e0e0e0\">\n          <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n            <span v-else class=\"white--text headline\">{{\n              userAvatarLetter\n            }}</span>\n          </v-avatar>\n          </v-col>\n          <v-col class=\"flex-shrink-1 flex-grow-1\">\n            <div class=\"h1\">{{ displayName }}</div>\n            <div class=\"text-center\">{{ $matrix.currentUser.user_id }}</div>\n            <div v-if=\"$matrix.currentUser.is_guest\">\n              This identity is temporary. Set a password to use it again.\n            </div>\n            <v-btn depressed block class=\"outlined-button\" @click.stop=\"logout\">Logout</v-btn>\n          </v-col>\n        </v-row>\n      </v-container>\n\n    <div class=\"action\" @click=\"showEditPasswordDialog = true\"><v-icon>lock</v-icon><span>Set password</span></div>\n    <div class=\"action\" @click=\"editValue = displayName;showEditDisplaynameDialog = true\"><v-icon>edit</v-icon><span>Change name</span></div>\n\n    <!-- edit password dialog -->\n    <v-dialog v-model=\"showEditPasswordDialog\" class=\"ma-0 pa-0\" width=\"50%\">\n      <v-card :disabled=\"settingPassword\">\n        <v-card-title>Change password</v-card-title>\n        <v-card-text>\n          <v-text-field v-if=\"!$matrix.currentUser.is_guest\" v-model=\"password\" label=\"Old password\" type=\"password\" />\n          <v-text-field v-model=\"newPassword1\" label=\"New password\" type=\"password\" />\n          <v-text-field v-model=\"newPassword2\" label=\"Repeat new password\" type=\"password\" />\n          <div class=\"red--text\" v-if=\"passwordErrorMessage\">{{ passwordErrorMessage }}</div>\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"closeEditPasswordDialog\">Cancel</v-btn>\n          <v-btn\n            :disabled=\"!passwordsMatch\"\n            color=\"primary\"\n            text\n            @click=\"\n              setPassword($matrix.currentUser.is_guest ? $matrix.currentUser.password : password, newPassword1);\n            \"\n            >Ok</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- edit display name dialog -->\n    <v-dialog v-model=\"showEditDisplaynameDialog\" class=\"ma-0 pa-0\" width=\"50%\">\n      <v-card>\n        <v-card-title>Display name</v-card-title>\n        <v-card-text>\n          <v-text-field v-model=\"editValue\" />\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"showEditDisplaynameDialog = false\">Cancel</v-btn>\n          <v-btn\n            color=\"primary\"\n            text\n            @click=\"\n              setDisplayName(editValue);\n              showEditDisplaynameDialog = false;\n            \"\n            >Ok</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Profile\",\n  data() {\n    return {\n      showEditPasswordDialog: false,\n      showEditDisplaynameDialog: false,\n      editValue: null,\n      password: null,\n      newPassword1: null,\n      newPassword2: null,\n      settingPassword: false,\n      passwordErrorMessage: null\n    };\n  },\n\n  computed: {\n    user() {\n      if (!this.$matrix.matrixClient) {\n        return null;\n      }\n      return this.$matrix.matrixClient.getUser(this.$matrix.currentUserId);\n    },\n\n    displayName() {\n      if (!this.user) {\n        return null;\n      }\n      return (this.user.displayName || this.user.userId);\n    },\n\n    userAvatar() {\n      if (!this.user || !this.user.avatarUrl) {\n        return null;\n      }\n      return this.$matrix.matrixClient.mxcUrlToHttp(this.user.avatarUrl, 80, 80, 'scale', true);\n    },\n\n    userAvatarLetter() {\n      if (!this.user) {\n        return null;\n      }\n      return (this.user.displayName || this.user.userId.substring(1)).substring(0, 1).toUpperCase();\n    },\n\n    passwordsMatch() {\n      return this.newPassword1 && this.newPassword2 && this.newPassword1 == this.newPassword2;\n    }\n  },\n\n  methods: {\n    logout() {\n      //TODO - For guest accounts, show warning about not being able to rejoin.\n      this.$store.dispatch(\"auth/logout\");\n      this.$nextTick(() => {\n        this.$navigation.push({path: \"/login\"}, -1);\n      })\n    },\n\n    setDisplayName(name) {\n      this.$matrix.matrixClient.setDisplayName(name);\n    },\n\n    setPassword(oldPassword, newPassword) {\n      this.settingPassword = true;\n      this.passwordErrorMessage = null;\n      this.$matrix.setPassword(oldPassword, newPassword)\n      .then(success => {\n        console.log(success ? \"Password changed\" : \"Failed to change password\");\n        this.closeEditPasswordDialog();\n      })\n      .catch(error => {\n        this.passwordErrorMessage = error.message;\n      })\n      .finally(() => {\n        this.settingPassword = false;\n      });\n    },\n\n    closeEditPasswordDialog() {\n      this.passwordErrorMessage = null;\n      this.password = null;\n      this.newPassword1 = null;\n      this.newPassword2 = null;\n      this.showEditPasswordDialog = false;\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=e220f5b4&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Profile.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VDivider,VIcon,VRow,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"create-room\"},[_c('div',[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"room-name\"},[_vm._v(\"New Group\")]),_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$navigation && _vm.$navigation.canPop()),expression:\"$navigation && $navigation.canPop()\"}],staticClass:\"header-button-left\",attrs:{\"text\":\"\",\"disabled\":_vm.step > _vm.steps.NAME_SET},on:{\"click\":function($event){$event.stopPropagation();return _vm.goBack($event)}}},[_c('v-icon',[_vm._v(\"arrow_back\")]),_c('span',[_vm._v(\"BACK\")])],1),_c('v-btn',{staticClass:\"header-button-right\",attrs:{\"text\":\"\",\"disabled\":!_vm.roomName || (_vm.step != _vm.steps.INITIAL && _vm.step != _vm.steps.CREATED)},on:{\"click\":function($event){$event.stopPropagation();return _vm.next($event)}}},[_c('span',[_vm._v(_vm._s(_vm.step == _vm.steps.CREATED ? \"Done\" : \"Next\"))])])],1)],1),_c('v-container',{staticStyle:{\"margin-top\":\"40px\"},attrs:{\"fluid\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"auto\"}},[_c('v-avatar',{attrs:{\"size\":\"50\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showAvatarPicker($event)}}},[(_vm.roomAvatar)?_c('v-img',{attrs:{\"src\":_vm.roomAvatar}}):_c('v-icon',[_vm._v(\"camera_alt\")])],1)],1),_c('v-col',[_c('v-text-field',{attrs:{\"label\":\"Name group\",\"color\":\"black\",\"background-color\":\"white\",\"disabled\":_vm.step > _vm.steps.INITIAL},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.$refs.topic.focus()}},model:{value:(_vm.roomName),callback:function ($$v) {_vm.roomName=$$v},expression:\"roomName\"}})],1)],1)],1),_c('v-fade-transition',[(_vm.step > _vm.steps.INITIAL)?_c('div',{staticClass:\"section ma-3\",attrs:{\"flat\":\"\"}},[_c('div',{staticClass:\"h4 text-left\"},[_vm._v(\"Join permissions\")]),_c('div',{staticClass:\"h2 text-left\"},[_vm._v(\"Set Join Permissions\")]),_c('div',[_vm._v(\" These permissions determine how people can join the group and how easily others can be invited. They can be changed anytime. \")]),_c('v-select',{staticClass:\"mt-4\",attrs:{\"disabled\":_vm.step >= _vm.steps.CREATING,\"items\":_vm.joinRules,\"item-value\":\"id\"},scopedSlots:_vm._u([{key:\"selection\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(item.text)+\" \")]}},{key:\"item\",fn:function(ref){\nvar active = ref.active;\nvar item = ref.item;\nvar attrs = ref.attrs;\nvar on = ref.on;\nreturn [_c('v-list-item',_vm._g(_vm._b({scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar active = ref.active;\nreturn [_c('v-list-item-avatar',[_c('v-icon',{staticClass:\"grey lighten-1\",attrs:{\"dark\":\"\"}},[_vm._v(_vm._s(item.icon))])],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.text)}}),_c('v-list-item-subtitle',{domProps:{\"textContent\":_vm._s(item.descr)}})],1),_c('v-list-item-action',[(active)?_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',{attrs:{\"color\":\"grey lighten-1\"}},[_vm._v(\"check\")])],1):_vm._e()],1)]}}],null,true)},'v-list-item',attrs,false),on))]}}],null,false,4161192351),model:{value:(_vm.joinRule),callback:function ($$v) {_vm.joinRule=$$v},expression:\"joinRule\"}}),_c('v-divider',{staticStyle:{\"margin-bottom\":\"20px\"}}),(_vm.publicRoomLink)?_c('v-text-field',{staticClass:\"room-link\",attrs:{\"value\":_vm.publicRoomLink,\"readonly\":\"\",\"filled\":\"\",\"background-color\":\"transparent\",\"append-icon\":\"content_copy\",\"type\":\"text\"},on:{\"click:append\":function($event){$event.stopPropagation();return _vm.copyRoomLink($event)}}}):(_vm.joinRule == 'public')?_c('v-btn',{staticClass:\"outlined-button\",attrs:{\"loading\":_vm.step == _vm.steps.CREATING,\"block\":\"\",\"depressed\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.getPublicLink($event)}}},[_c('v-icon',{staticClass:\"mr-2\"},[_vm._v(\"link\")]),_vm._v(\"Get link\")],1):(_vm.joinRule == 'invite')?_c('v-btn',{staticClass:\"outlined-button\",attrs:{\"block\":\"\",\"depressed\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addPeople($event)}}},[_c('v-icon',{staticClass:\"mr-2\"},[_vm._v(\"person_add\")]),_vm._v(\"Add people\")],1):_vm._e(),(_vm.publicRoomLinkCopied)?_c('div',{staticClass:\"link-copied\"},[_vm._v(\"Link copied!\")]):_vm._e(),(_vm.status)?_c('div',[_vm._v(_vm._s(_vm.status))]):_vm._e()],1):_vm._e()]),_c('input',{ref:\"avatar\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"name\":\"avatar\",\"accept\":\"image/*\"},on:{\"change\":function($event){return _vm.handlePickedAvatar($event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"create-room\">\n    <div>\n      <v-container fluid>\n        <div class=\"room-name\">New Group</div>\n        <v-btn\n          text\n          class=\"header-button-left\"\n          v-show=\"$navigation && $navigation.canPop()\"\n          @click.stop=\"goBack\"\n          :disabled=\"step > steps.NAME_SET\"\n        >\n          <v-icon>arrow_back</v-icon>\n          <span>BACK</span>\n        </v-btn>\n        <v-btn\n          text\n          :disabled=\"\n            !roomName || (step != steps.INITIAL && step != steps.CREATED)\n          \"\n          class=\"header-button-right\"\n          @click.stop=\"next\"\n        >\n          <span>{{ step == steps.CREATED ? \"Done\" : \"Next\" }}</span>\n        </v-btn>\n      </v-container>\n    </div>\n\n    <v-container fluid style=\"margin-top: 40px\">\n      <v-row>\n        <v-col cols=\"auto\">\n          <v-avatar size=\"50\" color=\"#ededed\" @click.stop=\"showAvatarPicker\">\n            <v-img v-if=\"roomAvatar\" :src=\"roomAvatar\" />\n            <v-icon v-else>camera_alt</v-icon>\n          </v-avatar>\n        </v-col>\n        <v-col>\n          <v-text-field\n            v-model=\"roomName\"\n            label=\"Name group\"\n            color=\"black\"\n            background-color=\"white\"\n            v-on:keyup.enter=\"$refs.topic.focus()\"\n            :disabled=\"step > steps.INITIAL\"\n          ></v-text-field>\n        </v-col>\n      </v-row>\n    </v-container>\n\n    <v-fade-transition>\n      <div class=\"section ma-3\" flat v-if=\"step > steps.INITIAL\">\n        <div class=\"h4 text-left\">Join permissions</div>\n        <div class=\"h2 text-left\">Set Join Permissions</div>\n        <div>\n          These permissions determine how people can join the group and how\n          easily others can be invited. They can be changed anytime.\n        </div>\n        <v-select\n          :disabled=\"step >= steps.CREATING\"\n          :items=\"joinRules\"\n          class=\"mt-4\"\n          v-model=\"joinRule\"\n          item-value=\"id\"\n        >\n          <template v-slot:selection=\"{ item }\">\n            {{ item.text }}\n          </template>\n          <template v-slot:item=\"{ active, item, attrs, on }\">\n            <v-list-item v-on=\"on\" v-bind=\"attrs\" #default=\"{ active }\">\n              <v-list-item-avatar>\n                <v-icon class=\"grey lighten-1\" dark>{{ item.icon }}</v-icon>\n              </v-list-item-avatar>\n              <v-list-item-content>\n                <v-list-item-title v-text=\"item.text\"></v-list-item-title>\n                <v-list-item-subtitle\n                  v-text=\"item.descr\"\n                ></v-list-item-subtitle>\n              </v-list-item-content>\n              <v-list-item-action>\n                <v-btn icon v-if=\"active\">\n                  <v-icon color=\"grey lighten-1\">check</v-icon>\n                </v-btn>\n              </v-list-item-action>\n            </v-list-item>\n          </template>\n        </v-select>\n\n        <v-divider style=\"margin-bottom: 20px\" />\n\n        <v-text-field\n          v-if=\"publicRoomLink\"\n          :value=\"publicRoomLink\"\n          class=\"room-link\"\n          readonly\n          filled\n          background-color=\"transparent\"\n          append-icon=\"content_copy\"\n          type=\"text\"\n          @click:append.stop=\"copyRoomLink\"\n        ></v-text-field>\n        <v-btn\n          v-else-if=\"joinRule == 'public'\"\n          :loading=\"step == steps.CREATING\"\n          block\n          depressed\n          class=\"outlined-button\"\n          @click.stop=\"getPublicLink\"\n          ><v-icon class=\"mr-2\">link</v-icon>Get link</v-btn\n        >\n        <v-btn\n          v-else-if=\"joinRule == 'invite'\"\n          block\n          depressed\n          class=\"outlined-button\"\n          @click.stop=\"addPeople\"\n          ><v-icon class=\"mr-2\">person_add</v-icon>Add people</v-btn\n        >\n\n        <div v-if=\"publicRoomLinkCopied\" class=\"link-copied\">Link copied!</div>\n\n        <div v-if=\"status\">{{ status }}</div>\n      </div>\n    </v-fade-transition>\n    <input\n      ref=\"avatar\"\n      type=\"file\"\n      name=\"avatar\"\n      @change=\"handlePickedAvatar($event)\"\n      accept=\"image/*\"\n      style=\"display: none\"\n    />\n  </div>\n</template>\n\n<script>\nimport util from \"../plugins/utils\";\n\nconst steps = Object.freeze({\n  INITIAL: 0,\n  NAME_SET: 1,\n  CREATING: 2,\n  CREATED: 3,\n});\n\nexport default {\n  name: \"CreateRoom\",\n  data() {\n    return {\n      steps,\n      step: steps.INITIAL,\n      roomId: null,\n      roomName: \"\",\n      roomTopic: \"\",\n      roomAvatar: null,\n      roomAvatarFile: null,\n      status: \"\",\n      joinRule: 0,\n      joinRules: [\n        {\n          id: \"public\",\n          text: \"Anyone with a link\",\n          icon: \"link\",\n          descr: \"Get a link to share\",\n        },\n        {\n          id: \"invite\",\n          text: \"Only people added\",\n          icon: \"person_add\",\n          descr: \"Choose from a list or search by account ID\",\n        },\n      ],\n      publicRoomLink: null,\n      publicRoomLinkCopied: false,\n    };\n  },\n\n  mounted() {\n    this.joinRule = this.joinRules[0].id; // Set default\n  },\n\n  watch: {\n    joinRule() {\n      console.log(\"Join rule changed to\", this.joinRule);\n    },\n  },\n  computed: {\n    roomAvatarLetter() {\n      if (!this.roomName) {\n        return null;\n      }\n      return this.roomName.substring(0, 1).toUpperCase();\n    },\n  },\n\n  methods: {\n    goBack() {\n      if (this.step == steps.NAME_SET) {\n        this.step = steps.INITIAL;\n      } else {\n        this.$navigation.pop();\n      }\n    },\n    next() {\n      if (this.step == steps.CREATED) {\n        this.openRoom();\n      } else if (this.step == steps.INITIAL) {\n        this.step = steps.NAME_SET;\n      } else if (this.step == steps.NAME_SET) {\n        // Create room with deafult setting\n        this.createRoom().then((roomId) => {\n          this.roomId = roomId;\n          this.openRoom(); // Open room (if id is set!)\n        });\n      }\n    },\n\n    openRoom() {\n      if (this.roomId) {\n        this.$navigation.push(\n          {\n            name: \"Chat\",\n            params: { roomId: util.sanitizeRoomId(this.roomId) },\n          },\n          -1\n        );\n      }\n    },\n\n    getPublicLink() {\n      this.createRoom().then((roomId) => {\n        this.roomId = roomId;\n        var room = null;\n        if (roomId) {\n          room = this.$matrix.getRoom(roomId);\n        }\n        if (room) {\n          this.publicRoomLink = this.$router.getRoomLink(\n            room.getCanonicalAlias() || roomId\n          );\n        }\n      });\n    },\n    addPeople() {\n      // For now, jump straight to create\n      this.createRoom().then((roomId) => {\n        this.roomId = roomId;\n        this.$matrix.setCurrentRoomId(roomId);\n        this.$navigation.push(\n          {\n            name: \"Invite\",\n          },\n          1\n        );\n      });\n    },\n    createRoomDebug() {\n      this.step = steps.CREATING;\n      return new Promise((resolve, ignoredreject) => {\n        setTimeout(() => {\n          this.step = steps.CREATED;\n          resolve(\"#NpexPublicRoom2:neo.keanu.im\");\n        }, 5000);\n      });\n    },\n    createRoom() {\n      this.step = steps.CREATING;\n      var roomId;\n      this.status = \"Creating room\";\n      var createRoomOptions = {};\n      if (this.joinRule == \"public\") {\n        createRoomOptions = {\n          visibility: \"private\", // Not listed!\n          room_alias_name: this.roomName.replace(/\\s/g, \"\").toLowerCase(),\n          name: this.roomName,\n          preset: \"public_chat\",\n          initial_state: [\n            {\n              type: \"m.room.encryption\",\n              state_key: \"\",\n              content: {\n                algorithm: \"m.megolm.v1.aes-sha2\",\n              },\n            },\n          ],\n        };\n      } else {\n        //if (this.joinRule == \"invite\") {\n        createRoomOptions = {\n          visibility: \"private\", // Not listed!\n          name: this.roomName,\n          preset: \"private_chat\",\n          initial_state: [\n            {\n              type: \"m.room.encryption\",\n              state_key: \"\",\n              content: {\n                algorithm: \"m.megolm.v1.aes-sha2\",\n              },\n            },\n            {\n              type: \"m.room.guest_access\",\n              state_key: \"\",\n              content: {\n                guest_access: \"forbidden\",\n              },\n            },\n          ],\n        };\n      }\n      if (this.roomTopic && this.roomTopic.length > 0) {\n        // Add topic\n        createRoomOptions.topic = this.roomTopic;\n      }\n      return this.$matrix.matrixClient\n        .createRoom(createRoomOptions)\n        .then(({ room_id, room_alias }) => {\n          roomId = room_alias || room_id;\n          if (!this.roomAvatarFile) {\n            return true;\n          }\n          const self = this;\n          return util.setRoomAvatar(\n            this.$matrix.matrixClient,\n            room_id,\n            this.roomAvatarFile,\n            function (p) {\n              if (p.total) {\n                self.status =\n                  \"Uploading avatar: \" + (p.loaded || 0) + \" of \" + p.total;\n              } else {\n                self.status = \"Uploading avatar: \" + (p.loaded || 0);\n              }\n            }\n          );\n        })\n        .then(() => {\n          this.status = \"\";\n          this.step = steps.CREATED;\n          return roomId;\n        })\n        .catch((error) => {\n          this.status =\n            (error.data && error.data.error) ||\n            error.message ||\n            error.toString();\n          this.step = steps.NAME_SET; // revert\n          return null;\n        });\n    },\n\n    /**\n     * Show picker to select room avatar file\n     */\n    showAvatarPicker() {\n      if (this.step == steps.INITIAL) {\n        this.$refs.avatar.click();\n      }\n    },\n\n    /**\n     * Handle picked avatar\n     */\n    handlePickedAvatar(event) {\n      if (event.target.files && event.target.files[0]) {\n        var reader = new FileReader();\n        reader.onload = (e) => {\n          this.roomAvatar = e.target.result;\n          this.roomAvatarFile = event.target.files[0];\n        };\n        reader.readAsDataURL(event.target.files[0]);\n      }\n    },\n\n    copyRoomLink() {\n      const self = this;\n      this.$copyText(this.publicRoomLink).then(\n        function (ignored) {\n          // Success!\n          self.publicRoomLinkCopied = true;\n          setInterval(() => {\n            // Hide again\n            self.publicRoomLinkCopied = false;\n          }, 3000);\n        },\n        function (e) {\n          // Failure!\n          console.log(e);\n        }\n      );\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateRoom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateRoom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateRoom.vue?vue&type=template&id=7a159470&\"\nimport script from \"./CreateRoom.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateRoom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreateRoom.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VFadeTransition } from 'vuetify/lib/components/transitions';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCol,VContainer,VDivider,VFadeTransition,VIcon,VImg,VListItem,VListItemAction,VListItemAvatar,VListItemContent,VListItemSubtitle,VListItemTitle,VRow,VSelect,VTextField})\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '../components/Home.vue'\nimport Chat from '../components/Chat.vue'\nimport Join from '../components/Join.vue'\nimport Login from '../components/Login.vue'\nimport Profile from '../components/Profile.vue'\nimport CreateRoom from '../components/CreateRoom.vue'\n\nimport util from '../plugins/utils'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/room/:roomId?',\n    name: 'Chat',\n    component: Chat,\n    meta: {\n      includeRoom: true\n    }\n  },\n  {\n    path: '/info',\n    name: 'RoomInfo',\n    component: () => import('../components/RoomInfo.vue'),\n    props: true,\n    meta: {\n      title: 'Info',\n      includeRoom: true\n    }\n  },\n  {\n    path: '/profile',\n    name: 'Profile',\n    component: Profile,\n    meta: {\n      title: 'Profile'\n    }\n  },\n  {\n    path: '/createroom',\n    name: 'CreateRoom',\n    component: CreateRoom,\n    meta: {\n      title: 'Create room'\n    }\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login,\n    props: true\n  },\n  {\n    path: '/join/:roomId?',\n    name: 'Join',\n    component: Join\n  },\n  {\n    path: '/invite/:roomId?',\n    name: 'Invite',\n    component: () => import('../components/Invite.vue'),\n    meta: {\n      title: 'Add Friends'\n    }\n  },\n  {\n    path: '/goodbye',\n    name: 'Goodbye',\n    component: () => import('../components/QuoteView.vue'),\n  }\n]\n\nconst router = new VueRouter({\n  routes\n});\n\nrouter.beforeEach((to, from, next) => {\n  const publicPages = ['/login'];\n  var authRequired = !publicPages.includes(to.path);\n  const loggedIn = localStorage.getItem('user');\n\n  if (to.name == 'Chat' || to.name == 'Join') {\n    if (!to.params.roomId && to.hash) {\n      // Public rooms start with '#', confuses the router. If hash but no roomId param, set it.\n      to.params.roomId = to.hash;\n    }\n    const roomId = util.sanitizeRoomId(to.params.roomId);\n    router.app.$matrix.setCurrentRoomId(roomId);\n    if (roomId && roomId.startsWith('#')) {\n      //Invite to public room\n      authRequired = false;\n    }\n  } else if (to.name == 'Invite') {\n    if (to.params.roomId) {\n      const roomId = util.sanitizeRoomId(to.params.roomId);\n      router.app.$matrix.setCurrentRoomId(roomId);\n    }\n  }\n\n  // trying to access a restricted page + not logged in\n  // redirect to login page\n  if (authRequired && !loggedIn) {\n    next('/login');\n  } else {\n    next();\n  }\n});\n\nrouter.getRoomLink = function(roomId) {\n  return window.location.origin + window.location.pathname + \"#/room/\" + encodeURIComponent(util.sanitizeRoomId(roomId));\n}\n\nexport default router\n","const user = JSON.parse(localStorage.getItem('user'));\nconst initialState = user\n    ? { status: { loggedIn: true }, user }\n    : { status: { loggedIn: false }, user: null };\n\nexport const auth = {\n    namespaced: true,\n    state: initialState,\n    actions: {\n        login({ commit }, user) {\n            return this._vm.$matrix.login(user).then(\n                user => {\n                    commit('loginSuccess', user);\n                    return Promise.resolve(user);\n                },\n                error => {\n                    commit('loginFailure');\n                    return Promise.reject(error);\n                }\n            );\n        },\n        logout({ commit }) {\n            this._vm.$matrix.logout();\n            commit('logout');\n        },\n    },\n    mutations: {\n        loginSuccess(state, user) {\n            state.status.loggedIn = true;\n            state.user = user;\n        },\n        loginFailure(state) {\n            state.status.loggedIn = false;\n            state.user = null;\n        },\n        logout(state) {\n            state.status.loggedIn = false;\n            state.user = null;\n        },\n        registerSuccess(state) {\n            state.status.loggedIn = false;\n        },\n        registerFailure(state) {\n            state.status.loggedIn = false;\n        }\n    }\n};","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport VuexPersist from 'vuex-persist'\n\nimport { auth } from './auth.module';\n\nVue.use(Vuex)\n\nconst vuexPersist = new VuexPersist({\n    key: 'settings',\n    storage: localStorage,\n    reducer: state => ({\n      currentRoomId: state.currentRoomId\n    })\n  })\n\nexport default new Vuex.Store({\n    state: {\n        currentRoomId: null\n    },\n    mutations: {\n        setCurrentRoomId(state, roomId) {\n            state.currentRoomId = roomId;\n        },\n    },\n    actions: {\n    },\n    modules: {\n        auth\n    },\n    plugins: [vuexPersist.plugin]\n})\n","export default {\n    install(Vue, router) {\n        var routes = [];\n        var nextRoutes = null;\n        var zeroIndex = undefined;\n\n        router.beforeResolve((to, ignoredfrom, next) => {\n            if (!zeroIndex) {\n                routes = [to];\n                zeroIndex = window.history.length;\n            }\n            next();\n        })\n\n        router.beforeEach((to, from, next) => {\n            if (nextRoutes) {\n                console.log(\"Nav: next routes set, going:\", routes, nextRoutes);\n                routes = nextRoutes;\n                nextRoutes = null;\n                if (routes.length > 0) {\n                    console.log(\"Redirecting to\", routes[routes.length - 1]);\n                    next(routes[routes.length - 1]);\n                    return;\n                }\n            }\n            next();\n        })\n\n        const navigationService = {\n            /***\n             * @param mode Mode of operation. -1 = push as root, 0 = replace, 1 = normal push\n             */\n            push(route, mode) {\n                if (mode === undefined) {\n                    mode = 1;\n                }\n                if (mode == -1) {\n                    nextRoutes = [route];\n                } else if (mode == 0) {\n                    // Replace\n                    nextRoutes = [...routes];\n                    nextRoutes.pop();\n                    nextRoutes.push(route);\n                } else {\n                    nextRoutes = [...routes];\n                    nextRoutes.push(route);\n                }\n\n                const index = nextRoutes.length - routes.length;\n                const targetIndex = nextRoutes.length - 1;\n                console.log(\"Nav - index \" + index + \" Target \" + targetIndex);\n                if (index < 0) {\n                    console.log(\"Nav - go \" + index);\n                    router.go(index);\n                } else if (index == 0) {\n                    console.log(\"Nav - replace\");\n                    routes = nextRoutes;\n                    nextRoutes = null;\n                    router.replace(route).catch((ignoredErr) => {});\n                } else {\n                    console.log(\"Nav - push\");\n                    router.push(route).catch((ignoredErr) => {});\n                }\n            },\n\n            canPop() {\n                if (nextRoutes) {\n                    return nextRoutes.length > 1;\n                }\n                return routes.length > 1;\n            },\n\n            pop() {\n                routes.pop();\n                router.go(-1);\n            }\n        }\n        Vue.prototype.$navigation = navigationService;\n    }\n}\n","import { CleanInsights, ConsentRequestUi } from 'clean-insights-sdk';\nimport config from \"../assets/config\";\n\nexport default {\n    install(Vue) {\n\n        class RequestUi extends ConsentRequestUi {\n            showForCampaign(campaignId, campaign, complete) {\n                const period = campaign.nextTotalMeasurementPeriod        \n                if (!period) {\n                    return ''\n                }\n                let message = 'Help us improve!\\n\\n'\n                    + `We would like to collect anonymous usage data between ${period.start.format('LLL')} and ${period.end.format('LLL')} to improve the quality of the product.\\n\\nYour help would be highly appreciated.`\n\n                complete(window.confirm(message))\n                return ''\n            }\n        }\n\n        const cleanInsightsService = new Vue({\n            data() {\n                return {\n                    ci: null,\n                    campaignId: null,\n                    requestUi: null,\n                }\n            },\n            created() {\n                const analytics = config.analytics || {};\n                if (analytics.enabled && analytics.config) {\n                    this.ci = new CleanInsights(analytics.config);\n\n                    // Get name of first campaign in the config.\n                    this.campaignId = Object.keys(analytics.config.campaigns || { invalid: {} })[0];\n                }\n            },\n            methods: {\n                event(category, action) {\n                    if (!this.ci) {\n                        return;\n                    }\n                    if (!this.requestUi) {\n                        this.requestUi = new RequestUi();\n                    }\n                    this.ci.requestConsentForCampaign(this.campaignId, this.requestUi, (granted) => {\n                        if (!granted) {\n                            return\n                        }\n                        this.ci.measureEvent(category, action, this.campaignId);\n                    })\n                }\n            }\n        });\n        Vue.prototype.$ci = cleanInsightsService;\n    }\n}\n","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify';\nimport router from './router'\nimport store from './store'\nimport matrix from './services/matrix.service'\nimport navigation from './services/navigation.service'\nimport cleaninsights from './services/cleaninsights.service'\nimport 'roboto-fontface/css/roboto/roboto-fontface.css'\nimport 'material-design-icons-iconfont/dist/material-design-icons.css'\nimport VEmojiPicker from 'v-emoji-picker';\nimport VueResize from 'vue-resize';\nimport 'vue-resize/dist/vue-resize.css';\nimport VueClipboard from 'vue-clipboard2'\nimport VueSanitize from \"vue-sanitize\";\n\nvar defaultOptions = VueSanitize.defaults;\ndefaultOptions.disallowedTagsMode = \"recursiveEscape\";\ndefaultOptions.allowedTags = [];\nVue.use(VueSanitize, defaultOptions);\n\nVue.config.productionTip = false\n\nVue.use(VueResize);\nVue.use(VEmojiPicker);\nVue.use(matrix, { store: store });\nVue.use(cleaninsights);\nVue.use(VueClipboard);\n\n// Add bubble functionality to custom events.\n// From here: https://stackoverflow.com/questions/41993508/vuejs-bubbling-custom-events\nVue.use((Vue) => {\n  Vue.prototype.$bubble = function $bubble(eventName, ...args) {\n    // Emit the event on all parent components\n    let component = this;\n    do {\n      component.$emit(eventName, ...args);\n      component = component.$parent;\n    } while (component);\n  };\n});\n\n// Register a global custom directive called `v-blur` that prevents focus\nVue.directive('blur', {\n  inserted: function (el) {\n    el.onfocus = (ev) => ev.target.blur()\n  }\n});\n\n/**\n * Handle long taps. Call with the timeout as argument (default 500ms) and the value\n * can be either one function called on long tap or two functions, the\n * first called on \"short tap\" and the other on \"long tap\".\n * \n * Like this: v-linkTap:500=\"[tapped,longTapped]\"\n */\nVue.directive('longTap', {\n  bind: function (el, binding, ignoredvnode) {\n    el.longTapTimeout = parseInt(binding.arg || \"500\");\n    el.longTapCallbacks = binding.value;\n    for (var i = el.longTapCallbacks.length; i < 2; i++) {\n      el.longTapCallbacks.splice(0, 0, null);\n    }\n\n    const touchX = function (event) {\n      if (event.type.indexOf(\"mouse\") !== -1) {\n        return event.clientX;\n      }\n      return event.touches[0].clientX;\n    };\n    const touchY = function (event) {\n      if (event.type.indexOf(\"mouse\") !== -1) {\n        return event.clientY;\n      }\n      return event.touches[0].clientY;\n    };\n\n    /**\n      * Triggered when our \"long tap\" timer hits.\n    */\n    const touchTimerElapsed = function () {\n      el.longTapHandled = true;\n      el.longTapCallbacks[1] && el.longTapCallbacks[1].call();\n      el.longTapTimer = null;\n      el.classList.remove(\"waiting-for-long-tap\");\n    };\n\n    const touchStart = function (e) {\n        el.longTapHandled = false;\n        el.longTapStartX = touchX(e);\n        el.longTapStartY = touchY(e);\n        el.longTapTimer = setTimeout(touchTimerElapsed, el.longTapTimeout);\n        el.classList.add(\"waiting-for-long-tap\");\n        e.preventDefault();\n    };\n\n    const touchCancel = function () {\n      el.longTapHandled = true;\n      el.longTapTimer && clearTimeout(el.longTapTimer);\n      el.longTapTimer = null;\n      el.classList.remove(\"waiting-for-long-tap\");\n    };\n\n    const touchEnd = function () {\n      el.longTapTimer && clearTimeout(el.longTapTimer);\n      el.longTapTimer = null;\n      if (!el.longTapHandled) {\n        // Not canceled or long tapped. Just a single tap. Do we have a handler?\n        el.longTapCallbacks[0] && el.longTapCallbacks[0].call();\n      }\n      el.classList.remove(\"waiting-for-long-tap\");\n    };\n\n    const touchMove = function (e) {\n      el.longTapCurrentX = touchX(e);\n      el.longTapCurrentY = touchY(e);\n      var tapTolerance = 4;\n      var touchMoved =\n        Math.abs(el.longTapStartX - el.longTapCurrentX) > tapTolerance ||\n        Math.abs(el.longTapStartY - el.longTapCurrentY) > tapTolerance;\n      if (touchMoved) {\n        touchCancel();\n      }\n    };\n\n    el.longTapTouchStart = touchStart;\n    el.longTapTouchEnd = touchEnd;\n    el.longTapTouchCancel = touchCancel;\n    el.longTapTouchMove = touchMove;\n    el.addEventListener(\"touchstart\", touchStart);\n    el.addEventListener(\"touchend\", touchEnd);\n    el.addEventListener(\"touchcancel\", touchCancel);\n    el.addEventListener(\"touchmove\", touchMove);\n    el.addEventListener(\"mousedown\", touchStart);\n    el.addEventListener(\"mouseup\", touchEnd);\n    el.addEventListener(\"mousemove\", touchMove);\n  },\n  unbind: function (el) {\n    el.longTapTimer && clearTimeout(el.longTapTimer);\n    el.removeEventListener(\"touchstart\", el.longTapTouchStart);\n    el.removeEventListener(\"touchend\", el.longTapTouchEnd);\n    el.removeEventListener(\"touchcancel\", el.longTapTouchCancel);\n    el.removeEventListener(\"touchmove\", el.longTapTouchMove);\n    el.removeEventListener(\"mousedown\", el.longTapTouchStart);\n    el.removeEventListener(\"mouseup\", el.longTapTouchEnd);\n    el.removeEventListener(\"mousemove\", el.longTapTouchMove);\n  },\n});\n\nVue.use(navigation, router);\n\nnew Vue({\n  vuetify,\n  router,\n  store,\n  matrix,\n  cleaninsights,\n  render: h => h(App)\n}).$mount('#app');","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomSheet.vue?vue&type=style&index=0&id=3693185f&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/av_cat.152143a7.png\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_panda.5b6eb785.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=style&index=1&lang=css&\"","module.exports = __webpack_public_path__ + \"img/av_tiger.d4418fd9.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingSticker.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_osprey.0ee2ef1c.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingAudio.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_panther.bd8e1503.png\";","module.exports = __webpack_public_path__ + \"img/av_otter.e251be0c.png\";","module.exports = __webpack_public_path__ + \"img/av_mantis.a0086bc3.png\";","module.exports = __webpack_public_path__ + \"img/av_bunny.2787a707.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingImage.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_iguna.744f7412.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StickerPickerBottomSheet.vue?vue&type=style&index=1&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_dragonfly.08cea848.png\";","module.exports = __webpack_public_path__ + \"img/av_hummingbird.abadb545.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperationsPicker.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_turtle.80b5d008.png\";","module.exports = __webpack_public_path__ + \"img/av_orangutan.31fa41b2.png\";","export default class User {\n    constructor(home_server, user_id, password, is_guest) {\n        this.home_server = home_server;\n        this.user_id = user_id;\n        this.password = password;\n        this.is_guest = is_guest || false\n    }\n\n    normalize = function() {\n        if (this.user_id.startsWith('@') && this.user_id.includes(':')) {\n            const parts = this.user_id.split(\":\");\n            this.user_id = parts[0].substring(1);\n            this.home_server = \"https://\" + parts[1];\n        }\n    };\n\n    static homeServerUrl = function(home_server) {\n        if (home_server && !home_server.startsWith(\"https://\")) {\n            return \"https://\" + home_server;\n        }\n        return home_server;\n    };\n\n    static localPart(user_id) {\n        if (user_id && user_id.startsWith('@') && user_id.includes(':')) {\n            const parts = user_id.split(\":\");\n            return parts[0].substring(1);\n        }\n        return user_id;\n    }\n}","module.exports = __webpack_public_path__ + \"img/av_owl.711727bb.png\";","module.exports = __webpack_public_path__ + \"img/av_starfish.5fab06a7.png\";","module.exports = __webpack_public_path__ + \"img/av_horse.5b902952.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingText.vue?vue&type=style&index=0&lang=scss&\"","var map = {\n\t\"./av_baboon.png\": \"bcb7\",\n\t\"./av_badger.png\": \"02f6\",\n\t\"./av_bear.png\": \"c56a\",\n\t\"./av_bee.png\": \"f46f\",\n\t\"./av_beta.png\": \"0130\",\n\t\"./av_bunny.png\": \"7740\",\n\t\"./av_butterfly.png\": \"ebf5\",\n\t\"./av_cardinal.png\": \"f3a3d\",\n\t\"./av_cat.png\": \"5b89\",\n\t\"./av_cockatoo.png\": \"ec1f\",\n\t\"./av_crab.png\": \"a9ada\",\n\t\"./av_crane.png\": \"dcc7\",\n\t\"./av_dragonfly.png\": \"7e6d\",\n\t\"./av_eagle.png\": \"53ed\",\n\t\"./av_egret.png\": \"ad17\",\n\t\"./av_elephant.png\": \"a3d9\",\n\t\"./av_flamingo.png\": \"e199\",\n\t\"./av_fox.png\": \"af6a\",\n\t\"./av_gazelle.png\": \"9c44\",\n\t\"./av_giraffe.png\": \"9968\",\n\t\"./av_gorilla.png\": \"c300\",\n\t\"./av_hedgehog.png\": \"1301\",\n\t\"./av_hippo.png\": \"c517\",\n\t\"./av_horse.png\": \"8ead\",\n\t\"./av_hummingbird.png\": \"7edc\",\n\t\"./av_iguna.png\": \"7af4\",\n\t\"./av_jellyfish.png\": \"061b\",\n\t\"./av_leopard.png\": \"2f9f\",\n\t\"./av_lion.png\": \"cddb\",\n\t\"./av_lionfish.png\": \"d4da\",\n\t\"./av_lizard.png\": \"db7c\",\n\t\"./av_macaw.png\": \"19ad\",\n\t\"./av_mantis.png\": \"768b\",\n\t\"./av_octopus.png\": \"03e5\",\n\t\"./av_orangutan.png\": \"83ed\",\n\t\"./av_osprey.png\": \"6a23\",\n\t\"./av_otter.png\": \"73d8\",\n\t\"./av_owl.png\": \"8828\",\n\t\"./av_panda.png\": \"5c74\",\n\t\"./av_pangolin.png\": \"329e\",\n\t\"./av_panther.png\": \"6ba5\",\n\t\"./av_peacock.png\": \"1eb2\",\n\t\"./av_penguin.png\": \"e175\",\n\t\"./av_polar bear.png\": \"403a\",\n\t\"./av_puffin.png\": \"19df\",\n\t\"./av_puppy.png\": \"b459\",\n\t\"./av_rhino.png\": \"b504\",\n\t\"./av_rooster.png\": \"f305\",\n\t\"./av_shark.png\": \"977f\",\n\t\"./av_sloth.png\": \"b74f\",\n\t\"./av_snake.png\": \"5029\",\n\t\"./av_squirrel.png\": \"0478\",\n\t\"./av_starfish.png\": \"8aa7e\",\n\t\"./av_stingray.png\": \"b302\",\n\t\"./av_tiger.png\": \"650e\",\n\t\"./av_tucan.png\": \"132f\",\n\t\"./av_turtle.png\": \"81a0\",\n\t\"./av_walrus.png\": \"2c30\",\n\t\"./av_whaleshark.png\": \"e99d\",\n\t\"./av_yak.png\": \"b95f\",\n\t\"./av_zebra.png\": \"2f1c\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"921a\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingSticker.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_shark.545e47bb.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreatedRoomWelcomeHeader.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_giraffe.7af253ac.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperations.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_gazelle.4a3025c3.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingAudio.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomInfoBottomSheet.vue?vue&type=style&index=0&lang=scss&\"","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"a28e\";","module.exports = __webpack_public_path__ + \"img/av_elephant.cbbeeff1.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactInvited.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_crab.331519ac.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHistoryVisibility.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_egret.605ff296.png\";","module.exports = __webpack_public_path__ + \"img/av_fox.e790d11c.png\";","module.exports = __webpack_public_path__ + \"img/av_stingray.e1cf4ae1.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_puppy.3b09488c.png\";","module.exports = __webpack_public_path__ + \"img/av_rhino.2299bc9b.png\";","module.exports = __webpack_public_path__ + \"img/av_sloth.1efebb51.png\";","module.exports = __webpack_public_path__ + \"img/av_yak.91a75b41.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingFile.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=style&index=0&lang=scss&\"","global.Olm = require(\"olm\");\nimport sdk from \"matrix-js-sdk\";\nimport { TimelineWindow, EventTimeline } from \"matrix-js-sdk\";\nimport util from \"../plugins/utils\";\nimport User from \"../models/user\";\nimport config from \"../assets/config\";\n\nconst LocalStorageCryptoStore = require(\"matrix-js-sdk/lib/crypto/store/localStorage-crypto-store\")\n    .LocalStorageCryptoStore;\nsdk.setCryptoStoreFactory(\n    () => new LocalStorageCryptoStore(window.localStorage)\n);\n\nexport default {\n    install(Vue, options) {\n        if (!options || !options.store) {\n            throw new Error('Please initialise plugin with a Vuex store.')\n        }\n\n        const store = options.store;\n\n        const matrixService = new Vue({\n            store,\n\n            data() {\n                return {\n                    matrixClient: null,\n                    matrixClientReady: false,\n                    rooms: [],\n                    userDisplayName: null,\n                    userAvatar: null,\n                    currentRoom: null,\n                    notificationCount: 0\n                }\n            },\n            mounted() {\n                console.log(\"Matrix service mounted\");\n            },\n\n            computed: {\n                ready() {\n                    return this.matrixClient != null && this.matrixClientReady;\n                },\n\n                currentUser() {\n                    return this.$store.state.auth.user;\n                },\n\n                currentUserId() {\n                    const user = this.currentUser || {}\n                    return user.user_id;\n                },\n\n                currentUserDisplayName() {\n                    if (this.ready) {\n                        const user = this.matrixClient.getUser(this.currentUserId) || {}\n                        return this.userDisplayName || user.displayName;\n                    }\n                    return null;\n                },\n\n                currentRoomId() {\n                    return this.$store.state.currentRoomId;\n                },\n\n                joinedRooms() {\n                    return this.rooms.filter(room => {\n                        return room._selfMembership === 'join'\n                    });\n                },\n\n                invites() {\n                    return this.rooms.filter(room => {\n                        return room._selfMembership === 'invite'\n                    });\n                }\n            },\n\n            watch: {\n                currentRoomId: {\n                    immediate: true,\n                    handler(roomId) {\n                        this.currentRoom = this.getRoom(roomId);\n                    }\n                },\n            },\n\n            methods: {\n                login(user) {\n                    const tempMatrixClient = sdk.createClient(User.homeServerUrl(user.home_server));\n                    var promiseLogin;\n\n                    if (user.access_token) {\n                        // Logged in on \"real\" account\n                        promiseLogin = Promise.resolve(user);\n                    } else if (user.is_guest && !user.user_id) {\n                        // Generate random username and password. We don't user REAL matrix\n                        // guest accounts because 1. They are not allowed to post media, 2. They\n                        // can not use avatars and 3. They can not seamlessly be upgraded to real accounts.\n                        //\n                        // Instead, we use an ILAG approach, Improved Landing as Guest.\n                        const user = util.randomUser();\n                        const pass = util.randomPass();\n                        promiseLogin = tempMatrixClient\n                            .register(user, pass, null, {\n                                type: \"m.login.dummy\",\n                            })\n                            .then((response) => {\n                                console.log(\"Response\", response);\n                                response.password = pass;\n                                response.is_guest = true;\n                                localStorage.setItem('user', JSON.stringify(response));\n                                return response;\n                            })\n                    } else {\n                        var data = { user: User.localPart(user.user_id), password: user.password, type: \"m.login.password\" };\n                        if (user.device_id) {\n                            data.device_id = user.device_id;\n                        }\n                        promiseLogin = tempMatrixClient\n                            .login(\"m.login.password\", data)\n                            .then((response) => {\n                                var u = response;\n                                if (user.is_guest) {\n                                    // Copy over needed properties\n                                    u = Object.assign(user, response);\n                                }\n                                localStorage.setItem('user', JSON.stringify(u));\n                                return response;\n                            })\n                    }\n\n                    return promiseLogin\n                        .then(user => {\n                            return this.getMatrixClient(user);\n                        })\n                },\n\n                clearCryptoStore() {\n                    // Clear crypto related data \n                    // TODO - for some reason \"clearStores\" called in \"logout\" only clears the \"account\" crypto\n                    // data item, not all sessions etc. Why? We need to do that manually here!\n                    const toRemove = [];\n                    for (let i = 0; i < localStorage.length; ++i) {\n                        const key = localStorage.key(i);\n                        if (key.startsWith(\"crypto.\")) toRemove.push(key);\n                    }\n                    for (const key of toRemove) {\n                        localStorage.removeItem(key);\n                    }\n                },\n\n                logout() {\n                    if (this.matrixClient) {\n                        this.removeMatrixClientListeners(this.matrixClient);\n                        this.matrixClient.stopClient();\n                        this.matrixClient.clearStores().then(() => {\n                            this.clearCryptoStore()\n                        })\n                        this.matrixClient = null;\n                        this.matrixClientReady = false;\n                    } else {\n                        this.clearCryptoStore();\n                    }\n\n\n                    localStorage.removeItem('user');\n                    this.$store.commit(\"setCurrentRoomId\", null);\n                    this.rooms = [];\n                    this.userDisplayName = null;\n                    this.userAvatar = null;\n                    this.currentRoom = null;\n                    this.notificationCount = 0;\n                },\n\n                initClient() {\n                    this.reloadRooms();\n                    this.matrixClientReady = true;\n                    this.matrixClient.emit('Matrix.initialized', this.matrixClient);\n                    this.matrixClient.getProfileInfo(this.currentUserId)\n                        .then(info => {\n                            console.log(\"Got user profile: \" + JSON.stringify(info));\n                            this.userDisplayName = info.displayname;\n                            this.userAvatar = info.avatar_url;\n                        })\n                        .catch(err => {\n                            console.log(\"Failed to get user profile: \", err);\n                        })\n                },\n\n                async getMatrixClient(user) {\n                    if (user === undefined) {\n                        user = this.$store.state.auth.user;\n                    }\n                    if (this.matrixClientReady) {\n                        return new Promise((resolve, ignoredreject) => {\n                            resolve(user);\n                        })\n                    } else if (this.matrixClient) {\n                        return new Promise((resolve, ignoredreject) => {\n                            this.matrixClient.once('Matrix.initialized', (ignoredclient) => {\n                                resolve(user);\n                            });\n                        })\n                    }\n\n                    const matrixStore = new sdk.MemoryStore(window.localStorage);\n                    const webStorageSessionStore = new sdk.WebStorageSessionStore(\n                        window.localStorage\n                    );\n\n                    var homeServer = user.home_server;\n                    if (!homeServer.startsWith(\"https://\")) {\n                        homeServer = \"https://\" + homeServer;\n                    }\n\n                    var opts = {\n                        baseUrl: homeServer,\n                        userId: user.user_id,\n                        store: matrixStore,\n                        sessionStore: webStorageSessionStore,\n                        deviceId: user.device_id,\n                        accessToken: user.access_token,\n                        timelineSupport: true,\n                        unstableClientRelationAggregation: true,\n                        //useAuthorizationHeader: true\n                    }\n                    this.matrixClient = sdk.createClient(opts);\n                    // if (user.is_guest) {\n                    //     this.matrixClient.setGuest(true);\n                    // }\n                    return this.matrixClient\n                        .initCrypto()\n                        .then(() => {\n                            console.log(\"Crypto initialized\");\n\n                            this.addMatrixClientListeners(this.matrixClient);\n\n                            this.matrixClient.startClient();\n                            return this.matrixClient;\n                        })\n                        .then(matrixClient => {\n                            if (matrixClient.isInitialSyncComplete()) {\n                                console.log(\"Initial sync done already!\");\n                                return matrixClient;\n                            } else {\n                                return new Promise((resolve, reject) => {\n                                    matrixClient.once(\n                                        \"sync\",\n                                        function (state, ignoredprevState, ignoredres) {\n                                            console.log(state); // state will be 'PREPARED' when the client is ready to use\n                                            if (state == \"PREPARED\") {\n                                                resolve(matrixClient);\n                                            } else if (state == \"ERROR\") {\n                                                reject(\"Error syncing\");\n                                            }\n                                        }\n                                    )\n                                });\n                            }\n                        })\n                        .then(() => {\n                            // Ready to use! Start by loading rooms.\n                            this.initClient();\n                            return user;\n                        })\n                },\n\n                addMatrixClientListeners(client) {\n                    if (client) {\n                        client.on(\"event\", this.onEvent);\n                        client.on(\"Room\", this.onRoom);\n                        client.on(\"Session.logged_out\", this.onSessionLoggedOut);\n                        client.on(\"Room.myMembership\", this.onRoomMyMembership);\n                    }\n                },\n\n                removeMatrixClientListeners(client) {\n                    if (client) {\n                        client.off(\"event\", this.onEvent);\n                        client.off(\"Room\", this.onRoom);\n                        client.off(\"Session.logged_out\", this.onSessionLoggedOut);\n                        client.off(\"Room.myMembership\", this.onRoomMyMembership);\n                    }\n                },\n\n                onEvent(event) {\n                    switch (event.getType()) {\n                        case \"m.room.topic\": {\n                            const room = this.matrixClient.getRoom(event.getRoomId());\n                            if (room) {\n                                Vue.set(room, \"topic\", event.getContent().topic);\n                            }\n                        }\n                            break;\n\n                        case \"m.room.avatar\": {\n                            const room = this.matrixClient.getRoom(event.getRoomId());\n                            if (room) {\n                                Vue.set(room, \"avatar\", room.getAvatarUrl(this.matrixClient.getHomeserverUrl(), 80, 80, \"scale\", true));\n                            }\n                        }\n                            break;\n                    }\n                    this.updateNotificationCount();\n                },\n\n                onRoom(ignoredroom) {\n                    console.log(\"Got room: \" + ignoredroom);\n                    this.reloadRooms();\n                    this.updateNotificationCount();\n                },\n\n                onRoomMyMembership(room) {\n                    if (room._selfMembership === \"invite\") {\n                        // Invitation. Need to call \"recalculate\" to pick\n                        // up room name, not sure why exactly.\n                        room.recalculate();\n                        this.reloadRooms();\n                    }\n                },\n\n                onSessionLoggedOut() {\n                    console.log(\"Logged out!\");\n                    if (this.matrixClient) {\n                        this.removeMatrixClientListeners(this.matrixClient);\n                        this.matrixClient.stopClient();\n                        this.matrixClient = null;\n                        this.matrixClientReady = false;\n                    }\n\n                    // For \"real\" accounts we totally wipe the user object, but for \"guest\"\n                    // accounts (i.e. created from random data and with password never changed)\n                    // we need to hang on to the generated password and use that to login to a new\n                    // session, so only wipe the token in s that case.\n                    // Clear the access token\n                    var user = JSON.parse(localStorage.getItem('user'));\n                    if (user.is_guest) {\n                        delete user.access_token;\n                        localStorage.setItem('user', JSON.stringify(user));\n                        // Login again\n                        this.login(user);\n                    } else {\n                        localStorage.removeItem('user');\n                        this.$store.commit(\"setCurrentRoomId\", null);\n                        this.$navigation.push({ path: \"/login\" }, -1);\n                    }\n                },\n\n                reloadRooms() {\n                    // TODO - do incremental update instead of replacing the whole array\n                    // each time!\n                    var updatedRooms = this.matrixClient.getVisibleRooms();\n                    updatedRooms = updatedRooms.filter(room => {\n                        return room._selfMembership && (room._selfMembership == \"invite\" || room._selfMembership == \"join\");\n                    });\n                    updatedRooms.forEach(room => {\n                        if (!room.avatar) {\n                            Vue.set(room, \"avatar\", room.getAvatarUrl(this.matrixClient.getHomeserverUrl(), 80, 80, \"scale\", true));\n                        }\n                    });\n                    console.log(\"Reload rooms\", updatedRooms);\n                    Vue.set(this, \"rooms\", updatedRooms);\n                    const currentRoom = this.getRoom(this.$store.state.currentRoomId);\n                    if (this.currentRoom != currentRoom) {\n                        this.currentRoom = currentRoom;\n                    }\n                },\n\n                setCurrentRoomId(roomId) {\n                    this.$store.commit(\"setCurrentRoomId\", roomId);\n                    this.currentRoom = this.getRoom(roomId);\n                },\n\n                getRoom(roomId) {\n                    if (!roomId) {\n                        return null;\n                    }\n                    var room = null;\n                    if (this.matrixClient) {\n                        const visibleRooms = this.matrixClient.getRooms();\n                        room = visibleRooms.find(room => {\n                            if (roomId.startsWith(\"#\")) {\n                                return room.getCanonicalAlias() == roomId;\n                            }\n                            return room.roomId == roomId;\n                        });\n                    }\n                    return room || null;\n                },\n\n                /**\n                 * Return all users we are in a \"invite\" only room with!\n                 */\n                getAllFriends() {\n                    var ids = {};\n                    const ret = [];\n                    for (const room of this.rooms) {\n                        if (room._selfMembership == 'join' && this.getRoomJoinRule(room) == 'invite') {\n                            for (const member of room.getJoinedMembers()) {\n                                if (member.userId != this.currentUserId && !ids[member.userId]) {\n                                    ids[member.userId] = member;\n                                    ret.push(member);\n                                }\n                            }\n                        }\n                    }\n                    ret.sort((a, b) => {\n                        const aName = a.user ? a.user.displayName : a.name;\n                        const bName = b.user ? b.user.displayName : b.name;\n                        return aName.localeCompare(bName);\n                    });\n                    return ret;\n                },\n\n                getRoomJoinRule(room) {\n                    if (room) {\n                        const joinRules = room.currentState.getStateEvents(\n                            \"m.room.join_rules\",\n                            \"\"\n                        );\n                        return joinRules && joinRules.getContent().join_rule;\n                    }\n                    return null;\n                },\n\n                leaveRoom(roomId) {\n                    return this.matrixClient.leave(roomId, undefined)\n                        .then(() => {\n                            this.rooms = this.rooms.filter(room => {\n                                room.roomId != roomId;\n                            });\n                            this.matrixClient.store.removeRoom(roomId);\n                            //this.matrixClient.forget(roomId, true, undefined);\n                        })\n                },\n\n                /**\n                 * Purge the room with the given id! This means:\n                 * - Make room invite only\n                 * - Disallow guest access\n                 * - Set history visibility to 'joined'\n                 * - Redact all events\n                 * - Kick all members\n                 * @param roomId \n                 */\n                purgeRoom(roomId) {\n                    return new Promise((resolve, reject) => {\n                        const room = this.getRoom(roomId);\n                        if (!room) {\n                            reject(\"Room not found!\");\n                            return;\n                        }\n\n                        const timelineWindow = new TimelineWindow(\n                            this.matrixClient,\n                            room.getUnfilteredTimelineSet(),\n                            {}\n                        );\n                        const self = this;\n\n                        console.log(\"Purge: set invite only\");\n                        this.matrixClient.sendStateEvent(\n                            roomId,\n                            \"m.room.join_rules\",\n                            { join_rule: \"invite\" },\n                            \"\"\n                        )\n                            .then(() => {\n                                console.log(\"Purge: forbid guest access\");\n                                return this.matrixClient.sendStateEvent(\n                                    roomId,\n                                    \"m.room.guest_access\",\n                                    { guest_access: \"forbidden\" },\n                                    \"\"\n                                );\n                            })\n                            .then(() => {\n                                console.log(\"Purge: set history visibility to 'joined'\");\n                                return this.matrixClient.sendStateEvent(roomId, \"m.room.history_visibility\", {\n                                    history_visibility: \"joined\",\n                                });\n                            })\n                            .then(() => {\n                                console.log(\"Purge: create timeline\");\n                                return timelineWindow.load(null, 100)\n                            })\n                            .then(() => {\n                                const getMoreIfAvailable = function _getMoreIfAvailable() {\n                                    if (timelineWindow.canPaginate(EventTimeline.BACKWARDS)\n                                    ) {\n                                        console.log(\"Purge: page back\");\n                                        return timelineWindow\n                                            .paginate(EventTimeline.BACKWARDS, 100, true, 5)\n                                            .then((ignoredsuccess) => {\n                                                return _getMoreIfAvailable.call(self);\n                                            });\n                                    } else {\n                                        return Promise.resolve(\"Done\");\n                                    }\n                                }.bind(self);\n                                return getMoreIfAvailable();\n                            })\n                            .then(() => {\n                                console.log(\"Purge: redact events\");\n                                var redactionPromises = [];\n                                timelineWindow.getEvents().forEach(event => {\n                                    if (!event.isRedacted() && !event.isRedaction() && !event.isState()) {\n                                        // Redact!\n                                        redactionPromises.push(this.matrixClient.redactEvent(event.getRoomId(), event.getId()));\n                                    }\n                                });\n                                return Promise.all(redactionPromises);\n                            })\n                            .then(() => {\n                                console.log(\"Purge: kick members\");\n                                var joined = room.getMembersWithMembership(\"join\");\n                                var invited = room.getMembersWithMembership(\"invite\");\n                                var members = joined.concat(invited);\n                                \n                                var kickPromises = [];\n                                members.forEach(member => {\n                                    if (member.userId != self.currentUserId) {\n                                        kickPromises.push(this.matrixClient.kick(roomId, member.userId));\n                                    }\n                                });\n                                return Promise.all(kickPromises);\n                            })\n                            .then(() => {\n                                resolve(true); // Done!\n                            })\n                            .catch((err) => {\n                                console.error(\"Error purging room\", err);\n                                reject(err);\n                            });\n                    })\n                },\n\n                on(event, handler) {\n                    if (this.matrixClient) {\n                        this.matrixClient.on(event, handler);\n                    }\n                },\n\n                off(event, handler) {\n                    if (this.matrixClient) {\n                        this.matrixClient.off(event, handler);\n                    }\n                },\n\n                setPassword(oldPassword, newPassword) {\n                    if (this.matrixClient && this.currentUser) {\n                        const authDict = {\n                            type: 'm.login.password',\n                            identifier: {\n                                type: 'm.id.user',\n                                user: this.currentUser.user_id,\n                            },\n                            // TODO: Remove `user` once servers support proper UIA\n                            // See https://github.com/matrix-org/synapse/issues/5665\n                            user: this.currentUser.user_id,\n                            password: oldPassword,\n                        };\n                        const self = this;\n                        return this.matrixClient.setPassword(authDict, newPassword)\n                            .then(() => {\n                                // Forget password and remove the 'is_guest' flag, we are now a \"real\" user!\n                                self.currentUser.password = undefined;\n                                self.currentUser.is_guest = false;\n                                localStorage.setItem('user', JSON.stringify(self.currentUser));\n                            })\n                            .then(() => {\n                                return true;\n                            })\n                    }\n                    return Promise.resolve(false);\n                },\n\n                uploadFile(file, opts) {\n                    return this.matrixClient.uploadContent(file, opts);\n                },\n\n                getPublicRoomInfo(roomId) {\n                    if (!roomId) {\n                        return Promise.reject(\"Invalid parameters\");\n                    }\n\n                    const parts = roomId.split(':');\n                    if (parts.length != 2) {\n                        return Promise.reject(\"Unknown room server\");\n                    }\n                    const server = parts[1];\n\n                    var clientPromise;\n                    if (this.matrixClient) {\n                        clientPromise = this.getMatrixClient().then(() => {\n                            return this.matrixClient;\n                        })\n                    } else {\n                        const tempMatrixClient = sdk.createClient(config.defaultServer);\n                        var tempUserString = localStorage.getItem('tempuser');\n                        var tempUser = null;\n                        if (tempUserString) {\n                            tempUser = JSON.parse(tempUserString);\n                        }\n\n                        // Need to create an account?\n                        //\n                        if (tempUser) {\n                            clientPromise = Promise.resolve(tempUser);\n                        } else {\n                            const user = util.randomUser();\n                            const pass = util.randomPass();\n                            clientPromise = tempMatrixClient\n                                .register(user, pass, null, {\n                                    type: \"m.login.dummy\",\n                                })\n                                .then((response) => {\n                                    console.log(\"Response\", response);\n                                    response.password = pass;\n                                    response.is_guest = true;\n                                    localStorage.setItem('tempuser', JSON.stringify(response));\n                                    return response;\n                                });\n                        }\n\n                        // Get an access token\n                        clientPromise = clientPromise.then(user => {\n                            var data = { user: User.localPart(user.user_id), password: user.password, type: \"m.login.password\" };\n                            if (user.device_id) {\n                                data.device_id = user.device_id;\n                            }\n                            return tempMatrixClient.login(\"m.login.password\", data)\n                        })\n\n                        // Then login\n                        //\n                        // Create a slimmed down client, without crypto. This one is\n                        // Only used to get public room info from.\n                        clientPromise = clientPromise.then(user => {\n                            var opts = {\n                                baseUrl: config.defaultServer,\n                                userId: user.user_id,\n                                accessToken: user.access_token,\n                                timelineSupport: false,\n                            }\n                            var matrixClient = sdk.createClient(opts);\n                            matrixClient.startClient();\n                            return matrixClient;\n                        });\n                    }\n\n                    const findOrGetMore = function _findOrGetMore(client, response) {\n                        for (var room of response.chunk) {\n                            if ((roomId.startsWith(\"#\") && room.canonical_alias == roomId) || (roomId.startsWith(\"!\") && room.room_id == roomId)) {\n                                if (room.avatar_url) {\n                                    room.avatar = client.mxcUrlToHttp(room.avatar_url, 80, 80, 'scale', true);\n                                }\n                                return Promise.resolve(room);\n                            }\n                        }\n                        if (response.next_batch) {\n                            return client.publicRooms({ server: server, limit: 1000, since: response.next_batch })\n                                .then(response => {\n                                    return _findOrGetMore(client, response);\n                                })\n                                .catch(err => {\n                                    return Promise.reject(\"Failed to find room: \" + err);\n                                });\n                        } else {\n                            return Promise.reject(\"No more data\");\n                        }\n                    };\n\n                    var matrixClient;\n                    return clientPromise\n                        .then(client => {\n                            matrixClient = client;\n                            return matrixClient.publicRooms({ server: server, limit: 1000 })\n                        })\n                        .then(response => {\n                            return findOrGetMore(matrixClient, response);\n                        })\n                        .catch(err => {\n                            return Promise.reject(\"Failed to find room: \" + err);\n                        });\n                },\n\n                updateNotificationCount() {\n                    var count = 0;\n                    this.rooms.forEach(room => {\n                        count += room.getUnreadNotificationCount('total') || 0;\n                    });\n                    this.notificationCount = count;\n                }\n\n            }\n        })\n\n        Vue.prototype.$matrix = matrixService;\n    }\n}\n","module.exports = __webpack_public_path__ + \"img/av_baboon.748ddcc3.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingVideo.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_gorilla.a95f8263.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingVideo.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_hippo.26533229.png\";","module.exports = __webpack_public_path__ + \"img/av_bear.f1aa8118.png\";","module.exports = __webpack_public_path__ + \"img/av_lion.4b529348.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomNameChanged.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomJoinRules.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_lionfish.a6538492.png\";","import axios from 'axios';\nimport * as ContentHelpers from \"matrix-js-sdk/lib/content-helpers\";\nvar dayjs = require('dayjs');\nvar sha256 = require('js-sha256').sha256;\nvar aesjs = require('aes-js');\nvar base64Url = require('json-web-key/lib/base64url');\n\n// Install extended localized format\nvar localizedFormat = require('dayjs/plugin/localizedFormat')\ndayjs.extend(localizedFormat)\nvar duration = require('dayjs/plugin/duration')\ndayjs.extend(duration);\n\n// Store info about getUserMedia BEFORE we aply polyfill(s)!\nvar _browserCanRecordAudioF = function () {\n    var legacyGetUserMedia = (navigator.getUserMedia ||\n        navigator.webkitGetUserMedia ||\n        navigator.mozGetUserMedia ||\n        navigator.msGetUserMedia);\n    return legacyGetUserMedia !== undefined || (navigator.mediaDevices && navigator.mediaDevices.getUserMedia !== undefined);\n}\nvar _browserCanRecordAudio = _browserCanRecordAudioF();\n\nclass Util {\n    getAttachment(matrixClient, event, progressCallback) {\n        return new Promise((resolve, reject) => {\n            const content = event.getContent();\n            if (content.url != null) {\n                // Unencrypted, just return!\n                resolve(matrixClient.mxcUrlToHttp(content.url));\n                return;\n            }\n            var url = null;\n            var file = null;\n            if (content.file && content.file.url) {\n                file = content.file;\n                url = matrixClient.mxcUrlToHttp(file.url);\n            }\n\n            if (url == null) {\n                reject(\"No url found!\");\n            }\n\n            axios.get(url, {\n                responseType: 'arraybuffer', onDownloadProgress: progressEvent => {\n                    let percentCompleted = Math.floor((progressEvent.loaded * 100) / progressEvent.total);\n                    if (progressCallback) {\n                        progressCallback(percentCompleted);\n                    }\n                }\n            })\n                .then(response => {\n                    return this.decryptIfNeeded(file, response);\n                })\n                .then(bytes => {\n                    resolve(URL.createObjectURL(new Blob([bytes.buffer], { type: file.mimetype })));\n                })\n                .catch(err => {\n                    console.log(\"Download error: \", err);\n                    reject(err);\n                })\n                .finally(() => {\n                    if (progressCallback) {\n                        progressCallback(null);\n                    }\n                });\n        });\n    }\n\n    getThumbnail(matrixClient, event, ignoredw, ignoredh) {\n        return new Promise((resolve, reject) => {\n            const content = event.getContent();\n            if (content.url != null) {\n                // Unencrypted, just return!\n                resolve(matrixClient.mxcUrlToHttp(content.url));\n                return;\n            }\n            var url = null;\n            var file = null;\n            if (\n                content &&\n                content.info &&\n                content.info.thumbnail_file &&\n                content.info.thumbnail_file.url\n            ) {\n                file = content.info.thumbnail_file;\n                // var width = w;\n                // var height = h;\n                // if (content.info.w < w || content.info.h < h) {\n                //     width = content.info.w;\n                //     height = content.info.h;\n                // }\n                // url = matrixClient.mxcUrlToHttp(\n                //     file.url,\n                //     width, height,\n                //     \"scale\",\n                //     true\n                // );\n                url = matrixClient.mxcUrlToHttp(file.url);\n            } else if (content.file && content.file.url) {\n                // No thumb, use real url\n                file = content.file;\n                url = matrixClient.mxcUrlToHttp(file.url);\n            }\n\n            if (url == null) {\n                reject(\"No url found!\");\n                return;\n            }\n            axios.get(url, { responseType: 'arraybuffer' })\n                .then(response => {\n                    return this.decryptIfNeeded(file, response);\n                })\n                .then(bytes => {\n                    resolve(URL.createObjectURL(new Blob([bytes.buffer], { type: file.mimetype })));\n                })\n                .catch(err => {\n                    console.log(\"Download error: \", err);\n                    reject(err);\n                });\n        });\n    }\n\n    decryptIfNeeded(file, response) {\n        return new Promise((resolve, reject) => {\n            var key = base64Url.decode(file.key.k);\n            var iv = base64Url.decode(file.iv);\n            var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(iv));\n\n            const data = new Uint8Array(response.data);\n\n            // Calculate sha256 and compare hashes\n            var hash = new Uint8Array(sha256.create().update(data).arrayBuffer());\n            const originalHash = base64Url.decode(file.hashes.sha256);\n            if (Buffer.compare(Buffer.from(hash), Buffer.from(originalHash.buffer)) != 0) {\n                reject(\"Hashes don't match!\");\n                return;\n            }\n\n            var decryptedBytes = aesCtr.decrypt(data);\n            resolve(decryptedBytes);\n        });\n    }\n\n    sendTextMessage(matrixClient, roomId, text, editedEvent, replyToEvent) {\n        var content = ContentHelpers.makeTextMessage(text);\n        if (editedEvent) {\n            content['m.relates_to'] = {\n                rel_type: 'm.replace',\n                event_id: editedEvent.getId()\n            }\n            content['m.new_content'] = {\n                body: content.body,\n                msgtype: content.msgtype\n            }\n        } else if (replyToEvent) {\n            content['m.relates_to'] = {\n                'm.in_reply_to': {\n                    event_id: replyToEvent.getId()\n                }\n            }\n\n            // Prefix the content with reply info (seems to be a legacy thing)\n            const prefix = replyToEvent.getContent().body.split('\\n').map((item, index) => {\n                return \"> \" + (index == 0 ? (\"<\" + replyToEvent.getSender() + \"> \") : \"\") + item;\n            }).join('\\n');\n            content.body = prefix + \"\\n\\n\" + content.body;\n        }\n        return this.sendMessage(matrixClient, roomId, \"m.room.message\", content);\n    }\n\n    sendQuickReaction(matrixClient, roomId, emoji, event) {\n        const content = {\n            'm.relates_to': {\n                key: emoji,\n                rel_type: 'm.annotation',\n                event_id: event.getId()\n            }\n        };\n        return this.sendMessage(matrixClient, roomId, \"m.reaction\", content);\n    }\n\n    sendMessage(matrixClient, roomId, eventType, content) {\n        return new Promise((resolve, reject) => {\n            matrixClient.sendEvent(roomId, eventType, content, undefined, undefined)\n                .then((result) => {\n                    console.log(\"Message sent: \", result);\n                    resolve(true);\n                })\n                .catch(err => {\n                    console.log(\"Image send error: \", err);\n                    if (err && err.name == \"UnknownDeviceError\") {\n                        console.log(\"Unknown devices. Mark as known before retrying.\");\n                        var setAsKnownPromises = [];\n                        for (var user of Object.keys(err.devices)) {\n                            const userDevices = err.devices[user];\n                            for (var deviceId of Object.keys(userDevices)) {\n                                const deviceInfo = userDevices[deviceId];\n                                if (!deviceInfo.known) {\n                                    setAsKnownPromises.push(\n                                        matrixClient.setDeviceKnown(\n                                            user,\n                                            deviceId,\n                                            true\n                                        )\n                                    );\n                                }\n                            }\n                        }\n                        Promise.all(setAsKnownPromises)\n                            .then(() => {\n                                // All devices now marked as \"known\", try to resend\n                                matrixClient.resendEvent(err.event, matrixClient.getRoom(err.event.getRoomId()))\n                                    .then((result) => {\n                                        console.log(\"Message sent: \", result);\n                                        resolve(true);\n                                    })\n                                    .catch((err) => {\n                                        // Still error, abort\n                                        reject(err.toLocaleString());\n                                    });\n                            });\n                    }\n                    else {\n                        reject(err.toLocaleString());\n                    }\n                });\n        });\n    }\n\n    sendImage(matrixClient, roomId, file, onUploadProgress) {\n        return new Promise((resolve, reject) => {\n            var reader = new FileReader();\n            reader.onload = (e) => {\n                const fileContents = e.target.result;\n                var data = new Uint8Array(fileContents);\n\n                const info = {\n                    mimetype: file.type,\n                    size: file.size\n                };\n\n                var description = file.name;\n                var msgtype = 'm.image';\n                if (file.type.startsWith(\"audio/\")) {\n                    msgtype = 'm.audio';\n                } else if (file.type.startsWith(\"video/\")) {\n                    msgtype = 'm.video';\n                } else if (file.type.startsWith(\"application/pdf\")) {\n                    msgtype = 'm.file';\n                }\n\n                const opts = {\n                    type: file.type,\n                    name: description,\n                    progressHandler: onUploadProgress,\n                    onlyContentUri: false\n                };\n\n                var messageContent = {\n                    body: description,\n                    info: info,\n                    msgtype: msgtype\n                }\n\n                // Set filename for files\n                if (msgtype == 'm.file') {\n                    messageContent.filename = file.name;\n                }\n\n                if (!matrixClient.isRoomEncrypted(roomId)) {\n                    // Not encrypted.\n                    matrixClient.uploadContent(data, opts)\n                        .then((response) => {\n                            messageContent.url = response.content_uri;\n                            return this.sendMessage(matrixClient, roomId, \"m.room.message\", messageContent)\n                        })\n                        .then(result => {\n                            resolve(result);\n                        })\n                        .catch(err => {\n                            reject(err);\n                        });\n                    return; // Don't fall through\n                }\n\n                const crypto = require('crypto');\n                let key = crypto.randomBytes(256 / 8);\n                let iv = Buffer.concat([crypto.randomBytes(8), Buffer.alloc(8)]); // Initialization vector.\n\n                // Encrypt\n                var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(iv));\n                var encryptedBytes = aesCtr.encrypt(data);\n                data = encryptedBytes;\n\n                // Calculate sha256\n                var hash = new Uint8Array(sha256.create().update(data).arrayBuffer());\n\n                const jwk = {\n                    kty: 'oct',\n                    key_ops: ['encrypt', 'decrypt'],\n                    alg: 'A256CTR',\n                    k: base64Url.encode(key),\n                    ext: true\n                };\n\n                const encryptedFile = {\n                    mimetype: file.type,\n                    key: jwk,\n                    iv: Buffer.from(iv).toString('base64').replace(/=/g, ''),\n                    hashes: { sha256: Buffer.from(hash).toString('base64').replace(/=/g, '') },\n                    v: 'v2'\n                };\n\n                messageContent.file = encryptedFile;\n\n                // Encrypted data sent as octet-stream!\n                opts.type = \"application/octet-stream\";\n\n                matrixClient.uploadContent(data, opts)\n                    .then((response) => {\n                        if (response.error) {\n                            return reject(response.error);\n                        }\n                        encryptedFile.url = response.content_uri;\n                        return this.sendMessage(matrixClient, roomId, \"m.room.message\", messageContent)\n                    })\n                    .then(result => {\n                        resolve(result);\n                    })\n                    .catch(err => {\n                        reject(err);\n                    });\n            }\n            reader.onerror = (err) => {\n                reject(err);\n            }\n            reader.readAsArrayBuffer(file);\n        });\n    }\n\n    /** Generate a random user name */\n    randomUser() {\n        return this.randomString(\n            12,\n            \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"\n        );\n    }\n\n    /**\n     * Generate random 12 char password\n     */\n    randomPass() {\n        return this.randomString(\n            12,\n            \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#_-*+\"\n        );\n    }\n\n    // From here: https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript\n    randomString(length, characters) {\n        var result = \"\";\n        var charactersLength = characters.length;\n        for (var i = 0; i < length; i++) {\n            result += characters.charAt(\n                Math.floor(Math.random() * charactersLength)\n            );\n        }\n        return result;\n    }\n\n    sanitizeRoomId(roomId) {\n        if (roomId && roomId.match(/^(!|#).+$/)) {\n            return roomId;\n        }\n        return null;\n    }\n\n    getFirstVisibleElement(parentNode) {\n        const visible = this.findVisibleElements(parentNode);\n        if (visible && visible.length > 0) {\n            return visible[0];\n        }\n        return null;\n    }\n\n    getLastVisibleElement(parentNode) {\n        const visible = this.findVisibleElements(parentNode);\n        if (visible && visible.length > 0) {\n            return visible[visible.length - 1];\n        }\n        return null;\n    }\n\n    findVisibleElements(parentNode) {\n        const middle = this.findOneVisibleElement(parentNode);\n        if (middle) {\n            var nodes = [parentNode.children[middle]];\n            var i = middle - 1;\n            while (i >= 0 && this.isChildVisible(parentNode, parentNode.children[i])) {\n                nodes.splice(0, 0, parentNode.children[i]);\n                i -= 1;\n            }\n            i = middle + 1;\n            while (i < parentNode.children.length && this.isChildVisible(parentNode, parentNode.children[i])) {\n                nodes.push(parentNode.children[i]);\n                i += 1;\n            }\n            return nodes;\n        }\n        return null; // No visible found\n    }\n\n    isChildVisible(parentNode, childNode) {\n        const rect1 = parentNode.getBoundingClientRect();\n        const rect2 = childNode.getBoundingClientRect();\n        var overlap = !(rect1.right < rect2.left ||\n            rect1.left > rect2.right ||\n            rect1.bottom < rect2.top ||\n            rect1.top > rect2.bottom)\n        return overlap;\n    }\n\n    findOneVisibleElement(parentNode) {\n        let start = 0;\n        let end = parentNode.children.length - 1;\n        let top = parentNode.scrollTop;\n        while (start <= end) {\n            let middle = Math.floor((start + end) / 2);\n            let childNode = parentNode.children[middle];\n            if (this.isChildVisible(parentNode, childNode)) {\n                // found the key\n                return middle;\n            } else if (childNode.offsetTop < top) {\n                // continue searching to the right\n                start = middle + 1;\n            } else {\n                // search searching to the left\n                end = middle - 1;\n            }\n        }\n        // key wasn't found\n        return null;\n    }\n\n    _importAll(r) {\n        var images = [];\n        r.keys().forEach(res => {\n            console.log(\"Avatar\", res);\n            // // Remove\"./\"\n            var name = res.split(\"_\")[1];\n            name = name.slice(0, name.indexOf(\".\"));\n            name = name.charAt(0).toUpperCase() + name.slice(1);\n            const image = r(res);\n            images.push({ id: res, image: image, name: \"Guest \" + name });\n        });\n        return images;\n    }\n\n    getDefaultAvatars() {\n        return this._importAll(require.context('../assets/avatars/', true, /\\.(jpeg|jpg|png)$/));\n    }\n\n    setAvatar(matrix, file, onUploadProgress) {\n        return new Promise((resolve, reject) => {\n            axios.get(file, { responseType: 'arraybuffer' })\n                .then(response => {\n                    const opts = {\n                        type: response.headers['content-type'].split(';')[0],\n                        name: \"Avatar\",\n                        progressHandler: onUploadProgress,\n                        onlyContentUri: false\n                    };\n                    var avatarUri;\n                    matrix.matrixClient.uploadContent(response.data, opts)\n                        .then((response) => {\n                            avatarUri = response.content_uri;\n                            return matrix.matrixClient.setAvatarUrl(avatarUri);\n                        })\n                        .then(result => {\n                            matrix.userAvatar = avatarUri;\n                            resolve(result);\n                        })\n                        .catch(err => {\n                            reject(err);\n                        });\n                })\n                .catch(err => {\n                    reject(err);\n                });\n\n        })\n    }\n\n    setRoomAvatar(matrixClient, roomId, file, onUploadProgress) {\n        return new Promise((resolve, reject) => {\n            var reader = new FileReader();\n            reader.onload = (e) => {\n                const fileContents = e.target.result;\n                var data = new Uint8Array(fileContents);\n\n                const info = {\n                    mimetype: file.type,\n                    size: file.size\n                };\n\n                const opts = {\n                    type: file.type,\n                    name: \"Room Avatar\",\n                    progressHandler: onUploadProgress,\n                    onlyContentUri: false\n                };\n\n                var messageContent = {\n                    body: file.name,\n                    info: info\n                }\n\n                matrixClient.uploadContent(data, opts)\n                    .then((response) => {\n                        messageContent.url = response.content_uri;\n                        return matrixClient.sendStateEvent(roomId, \"m.room.avatar\", messageContent);\n                    })\n                    .then(result => {\n                        resolve(result);\n                    })\n                    .catch(err => {\n                        reject(err);\n                    });\n            }\n            reader.onerror = (err) => {\n                reject(err);\n            }\n            reader.readAsArrayBuffer(file);\n        });\n    }\n\n    /**\n     * Return number of whole days between the timestamps, at end of that day.\n     * @param {*} ts1 \n     * @param {*} ts2 \n     */\n    dayDiff(ts1, ts2) {\n        var t1 = dayjs(ts1).endOf('day');\n        var t2 = dayjs(ts2).endOf('day');\n        return t2.diff(t1, 'day');\n    }\n\n    formatDay(timestamp) {\n        var then = dayjs(timestamp).endOf('day');\n        var now = dayjs().endOf('day');\n        const dayDiff = now.diff(then, 'day');\n        if (dayDiff < 1) {\n            return \"Today\";\n        } else if (dayDiff < 2) {\n            return \"Yesterday\";\n        } else if (dayDiff < 7) {\n            return \"\" + dayDiff + \" days ago\";\n        } else {\n            return then.format('L');\n        }\n    }\n\n    formatRecordDuration(ms) {\n        return dayjs.duration(ms).format(\"HH:mm:ss\");\n    }\n\n    formatRecordStartTime(timestamp) {\n        var then = dayjs(timestamp);\n        return then.format('lll');\n    }\n\n    browserCanRecordAudio() {\n        return _browserCanRecordAudio;\n    }\n}\nexport default new Util();\n\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeaveRoomDialog.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_lizard.542e0b1b.png\";","module.exports = __webpack_public_path__ + \"img/av_crane.5ebd657e.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.room),expression:\"room\"}],staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"80%\"},model:{value:(_vm.showDialog),callback:function ($$v) {_vm.showDialog=$$v},expression:\"showDialog\"}},[_c('div',{staticClass:\"dialog-content text-center\"},[(_vm.roomJoinRule == 'public')?[_c('h1',[_vm._v(\"👋\")]),_c('h2',{staticClass:\"dialog-title\"},[_vm._v(\" Goodbye, \"+_vm._s(_vm.$matrix.currentUserDisplayName)+\". \")]),(_vm.$matrix.currentUser.is_guest && _vm.lastRoom)?_c('div',{staticClass:\"dialog-text\"},[_vm._v(\" If you want to join this group again, you can join under a new identity. To keep \"+_vm._s(_vm.$matrix.currentUserDisplayName)+\", \"),_c('a',{on:{\"click\":function($event){$event.preventDefault();return _vm.viewProfile($event)}}},[_vm._v(\"create an account\")]),_vm._v(\". \")]):_c('div',{staticClass:\"dialog-text\"},[_vm._v(\" You can always join this room again if you know the link. \")])]:[_c('v-icon',{attrs:{\"color\":\"black\",\"size\":\"30\"}},[_vm._v(\"lock\")]),_c('h2',{staticClass:\"dialog-title\"},[_vm._v(\"Are you sure you want to leave?\")]),_c('div',{staticClass:\"dialog-text\"},[_vm._v(\" This group is locked. You cannot rejoin without a special permission. \")])],_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"cols\":\"12\"}},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-btn',{staticClass:\"text-button\",attrs:{\"depressed\":\"\",\"text\":\"\",\"block\":\"\"},on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"Go back\")])],1),_c('v-col',{attrs:{\"cols\":\"6\",\"align\":\"center\"}},[_c('v-btn',{staticClass:\"filled-button\",attrs:{\"color\":\"red\",\"depressed\":\"\",\"block\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onLeaveRoom()}}},[_vm._v(\"Leave\")])],1)],1)],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"showDialog\" v-show=\"room\" class=\"ma-0 pa-0\" width=\"80%\">\n    <div class=\"dialog-content text-center\">\n      <template v-if=\"roomJoinRule == 'public'\">\n        <h1>👋</h1>\n        <h2 class=\"dialog-title\">\n          Goodbye, {{ $matrix.currentUserDisplayName }}.\n        </h2>\n        <div\n          v-if=\"$matrix.currentUser.is_guest && lastRoom\"\n          class=\"dialog-text\"\n        >\n          If you want to join this group again, you can join under a new\n          identity. To keep {{ $matrix.currentUserDisplayName }},\n          <a @click.prevent=\"viewProfile\">create an account</a>.\n        </div>\n        <div v-else class=\"dialog-text\">\n          You can always join this room again if you know the link.\n        </div>\n      </template>\n      <template v-else>\n        <v-icon color=\"black\" size=\"30\">lock</v-icon>\n        <h2 class=\"dialog-title\">Are you sure you want to leave?</h2>\n        <div class=\"dialog-text\">\n          This group is locked. You cannot rejoin without a special permission.\n        </div>\n      </template>\n      <v-container fluid>\n        <v-row cols=\"12\">\n          <v-col cols=\"6\">\n            <v-btn\n              depressed\n              text\n              block\n              class=\"text-button\"\n              @click=\"showDialog = false\"\n              >Go back</v-btn\n            >\n          </v-col>\n          <v-col cols=\"6\" align=\"center\">\n            <v-btn\n              color=\"red\"\n              depressed\n              block\n              class=\"filled-button\"\n              @click.stop=\"onLeaveRoom()\"\n              >Leave</v-btn\n            >\n          </v-col>\n        </v-row>\n      </v-container>\n    </div>\n  </v-dialog>\n</template>\n<script>\nimport roomInfoMixin from \"./roomInfoMixin\";\n\nexport default {\n  name: \"LeaveRoomDialog\",\n  mixins: [roomInfoMixin],\n  props: {\n    show: {\n      type: Boolean,\n      default: function () {\n        return false;\n      },\n    },\n  },\n  data() {\n    return {\n      showDialog: false,\n      lastRoom: false,\n    };\n  },\n  watch: {\n    show: {\n      handler(newVal, ignoredOldVal) {\n        this.showDialog = newVal;\n      },\n    },\n    showDialog() {\n      if (!this.showDialog) {\n        this.$emit(\"close\");\n      } else {\n        this.lastRoom = this.onlyJoinedToThisRoom();\n      }\n    },\n  },\n\n  methods: {\n    onlyJoinedToThisRoom() {\n      const joinedRooms = this.$matrix.joinedRooms;\n      if (\n        joinedRooms &&\n        joinedRooms.length == 1 &&\n        joinedRooms[0].roomId == this.room.roomId\n      ) {\n        return true;\n      }\n      return false;\n    },\n\n    onLeaveRoom() {\n      const lastRoom = this.onlyJoinedToThisRoom();\n      //this.$matrix.matrixClient.forget(this.room.roomId, true, undefined)\n      const roomId = this.room.roomId;\n      this.$matrix\n        .leaveRoom(roomId)\n        .then(() => {\n          this.showDialog = false;\n          console.log(\"Left room\");\n          if (lastRoom) {\n            this.$navigation.push({ name: \"Goodbye\" }, -1);\n          } else {\n            this.$navigation.push(\n              { name: \"Home\", params: { roomId: null } },\n              -1\n            );\n          }\n        })\n        .catch((err) => {\n          console.log(\"Error leaving\", err);\n        });\n    },\n\n    viewProfile() {\n      this.showDialog = false;\n      this.$navigation.push({ name: \"Profile\" }, 1);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeaveRoomDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeaveRoomDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LeaveRoomDialog.vue?vue&type=template&id=aff1f0e0&\"\nimport script from \"./LeaveRoomDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./LeaveRoomDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LeaveRoomDialog.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VDialog,VIcon,VRow})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_penguin.80792892.png\";","module.exports = __webpack_public_path__ + \"img/av_flamingo.6c04a0d8.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingText.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingImage.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_whaleshark.8efe40d9.png\";","module.exports = __webpack_public_path__ + \"img/av_butterfly.873f2a9e.png\";","module.exports = __webpack_public_path__ + \"img/av_cockatoo.ca3d9f21.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomList.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomAvatarChanged.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StickerPickerBottomSheet.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuickReactions.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_rooster.14950a79.png\";","module.exports = __webpack_public_path__ + \"img/av_cardinal.1ca8cd7d.png\";","module.exports = __webpack_public_path__ + \"img/av_bee.33719139.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactLeave.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}