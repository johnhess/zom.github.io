{"version":3,"sources":["webpack:///./src/components/Invite.vue?fa52","webpack:///src/components/Invite.vue","webpack:///./src/components/Invite.vue?b625","webpack:///../../../src/components/VChipGroup/VChipGroup.ts","webpack:///./src/components/Invite.vue?c643","webpack:///./src/components/Invite.vue?2075"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","attrs","loading","on","$event","stopPropagation","done","_s","status","_l","member","key","userId","unselectMember","memberName","model","value","callback","$$v","selectedMembers","expression","$matrix","getAllFriends","scopedSlots","_u","fn","ref","active","memberAvatar","name","substring","toUpperCase","domProps","_e","staticRenderFns","data","methods","length","sendInvite","slice","close","$navigation","push","index","memberArray","currentRoom","existingMember","membership","matrixClient","idx","splice","user","displayName","getAvatarUrl","mixins","provide","chipGroup","props","column","Boolean","computed","classes","watch","scrollOffset","genData","setTextColor","component","VBtn","VChip","VChipGroup","VIcon","VList","VListItem","VListItemAction","VListItemAvatar","VListItemContent","VListItemGroup","VListItemSubtitle","VListItemTitle"],"mappings":"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","file":"js/chunk-b8c12378.f8877c94.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-column pa-4\",staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"flex-grow-0 flex-shrink-0\"},[_c('div',{staticClass:\"room-name\"},[_vm._v(\"Add Friends\")]),_c('v-btn',{staticClass:\"header-button-right\",attrs:{\"loading\":_vm.loading,\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.done($event)}}},[_c('span',[_vm._v(\"Done\")])])],1),_c('div',{staticClass:\"flex-grow-0 flex-shrink-0\",staticStyle:{\"min-height\":\"100px\",\"max-height\":\"30vh\"}},[_c('div',{staticClass:\"h4\"},[_vm._v(\"Send invites to\")]),_c('div',[_vm._v(_vm._s(_vm.status))]),_c('v-chip-group',{attrs:{\"active-class\":\"primary--text\",\"column\":\"\"}},_vm._l((_vm.selectedMembers),function(member){return _c('v-chip',{key:member.userId,attrs:{\"close\":\"\"},on:{\"click:close\":function($event){return _vm.unselectMember(member)}}},[_vm._v(\" \"+_vm._s(_vm.memberName(member))+\" \")])}),1)],1),_c('div',{staticClass:\"flex-grow-1 flex-shrink-1\"},[_c('v-list',{staticClass:\"member ma-2\",staticStyle:{\"overflow-y\":\"auto\"}},[_c('v-list-item-group',{attrs:{\"multiple\":\"\"},model:{value:(_vm.selectedMembers),callback:function ($$v) {_vm.selectedMembers=$$v},expression:\"selectedMembers\"}},_vm._l((_vm.$matrix.getAllFriends()),function(member){return _c('v-list-item',{key:member.userId,attrs:{\"value\":member},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar active = ref.active;\nreturn [_c('v-list-item-avatar',{attrs:{\"color\":\"grey\"}},[(_vm.memberAvatar(member))?_c('img',{attrs:{\"src\":_vm.memberAvatar(member)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(member.name.substring(0, 1).toUpperCase()))])]),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(_vm.memberName(member)))]),_c('v-list-item-subtitle',{domProps:{\"textContent\":_vm._s(member.userId)}})],1),_c('v-list-item-action',[(active)?_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',{attrs:{\"color\":\"grey lighten-1\"}},[_vm._v(\"check\")])],1):_vm._e()],1)]}}],null,true)})}),1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"d-flex flex-column pa-4\" style=\"overflow: hidden\">\n    <div class=\"flex-grow-0 flex-shrink-0\">\n      <div class=\"room-name\">Add Friends</div>\n      <v-btn\n        :loading=\"loading\"\n        text\n        class=\"header-button-right\"\n        @click.stop=\"done\"\n      >\n        <span>Done</span>\n      </v-btn>\n    </div>\n\n    <div\n      class=\"flex-grow-0 flex-shrink-0\"\n      style=\"min-height: 100px; max-height: 30vh\"\n    >\n      <div class=\"h4\">Send invites to</div>\n      <div>{{ status }}</div>\n      <v-chip-group active-class=\"primary--text\" column>\n        <v-chip\n          v-for=\"member in selectedMembers\"\n          :key=\"member.userId\"\n          close\n          @click:close=\"unselectMember(member)\"\n        >\n          {{ memberName(member) }}\n        </v-chip>\n      </v-chip-group>\n    </div>\n\n    <div class=\"flex-grow-1 flex-shrink-1\">\n      <v-list class=\"member ma-2\" style=\"overflow-y: auto\">\n        <v-list-item-group multiple v-model=\"selectedMembers\">\n          <v-list-item\n            v-for=\"member in $matrix.getAllFriends()\"\n            :key=\"member.userId\"\n            :value=\"member\"\n          >\n            <template v-slot:default=\"{ active }\">\n              <v-list-item-avatar color=\"grey\">\n                <img v-if=\"memberAvatar(member)\" :src=\"memberAvatar(member)\" />\n                <span v-else class=\"white--text headline\">{{\n                  member.name.substring(0, 1).toUpperCase()\n                }}</span>\n              </v-list-item-avatar>\n              <v-list-item-content>\n                <v-list-item-title>{{ memberName(member) }}</v-list-item-title>\n                <v-list-item-subtitle\n                  v-text=\"member.userId\"\n                ></v-list-item-subtitle>\n              </v-list-item-content>\n              <v-list-item-action>\n                <v-btn icon v-if=\"active\">\n                  <v-icon color=\"grey lighten-1\">check</v-icon>\n                </v-btn>\n              </v-list-item-action>\n            </template>\n          </v-list-item>\n        </v-list-item-group>\n      </v-list>\n    </div>\n  </div>\n</template>\n\n<script>\nimport util from \"../plugins/utils\";\n\nexport default {\n  name: \"Invite\",\n  data() {\n    return {\n      status: \"\",\n      loading: false,\n      selectedMembers: [],\n    };\n  },\n  methods: {\n    done() {\n      if (this.selectedMembers.length > 0) {\n        this.loading = true;\n        this.sendInvite(0, this.selectedMembers.slice()); // Copy array! We remove stuff from original!\n      } else {\n        this.close();\n      }\n    },\n\n    close() {\n      this.$navigation.push(\n        {\n          name: \"Chat\",\n          params: { roomId: util.sanitizeRoomId(this.$matrix.currentRoomId) },\n        },\n        -1\n      );\n    },\n\n    sendInvite(index, memberArray) {\n      if (index == memberArray.length) {\n        // Done.\n        this.loading = false;\n        if (this.selectedMembers.length > 0) {\n          // Error.\n          this.status = \"Failed to invite one or or more friends!\";\n        } else {\n          this.status = \"\";\n          this.close();\n        }\n        return;\n      }\n      this.status = `Inviting friend ${index + 1} of ${memberArray.length}`;\n      const member = memberArray[index];\n\n      // Is this userId already a member of this room? In that case don't send an invite.\n      if (this.$matrix.currentRoom) {\n        const existingMember = this.$matrix.currentRoom.getMember(\n          member.userId\n        );\n        if (existingMember && existingMember.membership === \"join\") {\n          this.unselectMember(member);\n          this.sendInvite(index + 1, memberArray);\n          return;\n        }\n      }\n\n      this.$matrix.matrixClient\n        .invite(this.$matrix.currentRoomId, member.userId)\n        .then(() => {\n          // Successfully sent! Remove from array so that after all are sent,\n          // the \"selectedMembers\" array will only contain those that failed.\n          this.unselectMember(member);\n        })\n        .catch((err) => {\n          console.log(\"Failed to invite:\", err);\n        })\n        .finally(() => {\n          this.sendInvite(index + 1, memberArray);\n        });\n    },\n\n    unselectMember(member) {\n      const idx = this.selectedMembers.indexOf(member);\n      if (idx >= 0) {\n        this.selectedMembers.splice(idx, 1);\n      }\n    },\n\n    memberName(member) {\n      return member.user ? member.user.displayName : member.name;\n    },\n\n    memberAvatar(member) {\n      if (member) {\n        return member.getAvatarUrl(\n          this.$matrix.matrixClient.getHomeserverUrl(),\n          40,\n          40,\n          \"scale\",\n          true\n        );\n      }\n      return null;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Invite.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Invite.vue?vue&type=script&lang=js&\"","// Styles\nimport './VChipGroup.sass'\n\n// Extensions\nimport { BaseSlideGroup } from '../VSlideGroup/VSlideGroup'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(\n  BaseSlideGroup,\n  Colorable\n).extend({\n  name: 'v-chip-group',\n\n  provide () {\n    return {\n      chipGroup: this,\n    }\n  },\n\n  props: {\n    column: Boolean,\n  },\n\n  computed: {\n    classes () {\n      return {\n        ...BaseSlideGroup.options.computed.classes.call(this),\n        'v-chip-group': true,\n        'v-chip-group--column': this.column,\n      }\n    },\n  },\n\n  watch: {\n    column (val) {\n      if (val) this.scrollOffset = 0\n\n      this.$nextTick(this.onResize)\n    },\n  },\n\n  methods: {\n    genData () {\n      return this.setTextColor(this.color, {\n        ...BaseSlideGroup.options.methods.genData.call(this),\n      })\n    },\n  },\n})\n","import { render, staticRenderFns } from \"./Invite.vue?vue&type=template&id=6537a029&\"\nimport script from \"./Invite.vue?vue&type=script&lang=js&\"\nexport * from \"./Invite.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Invite.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VBtn,VChip,VChipGroup,VIcon,VList,VListItem,VListItemAction,VListItemAvatar,VListItemContent,VListItemGroup,VListItemSubtitle,VListItemTitle})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Invite.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}