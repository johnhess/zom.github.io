{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/avatars/av_beta.png","webpack:///./src/assets/avatars/av_badger.png","webpack:///./src/assets/avatars/av_octopus.png","webpack:///./src/assets/avatars/av_squirrel.png","webpack:///./src/assets/avatars/av_jellyfish.png","webpack:///./src/components/messages/ContactChanged.vue?0a4a","webpack:///./src/assets/avatars/av_hedgehog.png","webpack:///./src/assets/avatars/av_tucan.png","webpack:///./src/assets/avatars/av_macaw.png","webpack:///./src/assets/avatars/av_puffin.png","webpack:///./src/assets/avatars/av_peacock.png","webpack:///./src/components/VoiceRecorderLock.vue?26c8","webpack:///./src/components/messages/ContactJoin.vue?e542","webpack:///./src/components/messages/RoomTopicChanged.vue?edf5","webpack:///./src/assets/avatars/av_walrus.png","webpack:///./src/assets/avatars/av_zebra.png","webpack:///./src/assets/avatars/av_leopard.png","webpack:///./src/assets/avatars/av_pangolin.png","webpack:///./src/components/messages/DebugEvent.vue?285e","webpack:///./src/components/Join.vue?6859","webpack:///./src/assets/avatars/av_polar bear.png","webpack:///./src/components/Chat.vue?e226","webpack:///./src/assets/avatars/av_snake.png","webpack:///./src/components/Login.vue?a022","webpack:///./src/assets/avatars/av_eagle.png","webpack:///./src/App.vue?9e80","webpack:///src/App.vue","webpack:///./src/App.vue?3359","webpack:///./src/App.vue?2667","webpack:///./src/plugins/vuetify.js","webpack:///./src/components/Home.vue?8d94","webpack:///./src/components/RoomList.vue?6c60","webpack:///src/components/RoomList.vue","webpack:///./src/components/RoomList.vue?e79f","webpack:///./src/components/RoomList.vue?f6c5","webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?aea6","webpack:///./src/components/Home.vue","webpack:///./src/components/Chat.vue?e97f","webpack:///./src/components/messages/MessageIncomingText.vue?d545","webpack:///./src/components/messages/QuickReactions.vue?212e","webpack:///src/components/messages/QuickReactions.vue","webpack:///./src/components/messages/QuickReactions.vue?d75f","webpack:///./src/components/messages/QuickReactions.vue?fa7e","webpack:///./src/components/messages/messageMixin.js","webpack:///src/components/messages/MessageIncomingText.vue","webpack:///./src/components/messages/MessageIncomingText.vue?900d","webpack:///./src/components/messages/MessageIncomingText.vue?a064","webpack:///./src/components/messages/MessageIncomingImage.vue?46c2","webpack:///src/components/messages/MessageIncomingImage.vue","webpack:///./src/components/messages/MessageIncomingImage.vue?b45c","webpack:///./src/components/messages/MessageIncomingImage.vue?bc40","webpack:///./src/components/messages/MessageIncomingAudio.vue?954c","webpack:///./src/components/messages/attachmentMixin.js","webpack:///src/components/messages/MessageIncomingAudio.vue","webpack:///./src/components/messages/MessageIncomingAudio.vue?65b5","webpack:///./src/components/messages/MessageIncomingAudio.vue?ce7f","webpack:///./src/components/messages/MessageOutgoingText.vue?2cc0","webpack:///src/components/messages/MessageOutgoingText.vue","webpack:///./src/components/messages/MessageOutgoingText.vue?d445","webpack:///./src/components/messages/MessageOutgoingText.vue?de3c","webpack:///./src/components/messages/MessageOutgoingImage.vue?1955","webpack:///src/components/messages/MessageOutgoingImage.vue","webpack:///./src/components/messages/MessageOutgoingImage.vue?1412","webpack:///./src/components/messages/MessageOutgoingImage.vue?644d","webpack:///./src/components/messages/MessageOutgoingAudio.vue?03be","webpack:///src/components/messages/MessageOutgoingAudio.vue","webpack:///./src/components/messages/MessageOutgoingAudio.vue?6480","webpack:///./src/components/messages/MessageOutgoingAudio.vue?25a2","webpack:///./src/components/messages/ContactJoin.vue?d740","webpack:///src/components/messages/ContactJoin.vue","webpack:///./src/components/messages/ContactJoin.vue?076f","webpack:///./src/components/messages/ContactJoin.vue?3d8f","webpack:///./src/components/messages/ContactLeave.vue?09a3","webpack:///src/components/messages/ContactLeave.vue","webpack:///./src/components/messages/ContactLeave.vue?2137","webpack:///./src/components/messages/ContactLeave.vue?73e3","webpack:///./src/components/messages/ContactInvited.vue?cd5c","webpack:///src/components/messages/ContactInvited.vue","webpack:///./src/components/messages/ContactInvited.vue?3a65","webpack:///./src/components/messages/ContactInvited.vue?54b1","webpack:///./src/components/messages/ContactChanged.vue?516f","webpack:///src/components/messages/ContactChanged.vue","webpack:///./src/components/messages/ContactChanged.vue?2e9e","webpack:///./src/components/messages/ContactChanged.vue?5317","webpack:///./src/components/messages/RoomNameChanged.vue?a0bf","webpack:///src/components/messages/RoomNameChanged.vue","webpack:///./src/components/messages/RoomNameChanged.vue?7d94","webpack:///./src/components/messages/RoomNameChanged.vue?adb7","webpack:///./src/components/messages/RoomTopicChanged.vue?2277","webpack:///src/components/messages/RoomTopicChanged.vue","webpack:///./src/components/messages/RoomTopicChanged.vue?c0f7","webpack:///./src/components/messages/RoomTopicChanged.vue?25a9","webpack:///./src/components/messages/RoomAvatarChanged.vue?a339","webpack:///src/components/messages/RoomAvatarChanged.vue","webpack:///./src/components/messages/RoomAvatarChanged.vue?b427","webpack:///./src/components/messages/RoomAvatarChanged.vue?07d4","webpack:///./src/components/messages/RoomHistoryVisibility.vue?1e03","webpack:///src/components/messages/RoomHistoryVisibility.vue","webpack:///./src/components/messages/RoomHistoryVisibility.vue?6aba","webpack:///./src/components/messages/RoomHistoryVisibility.vue?11a0","webpack:///./src/components/messages/DebugEvent.vue?db2c","webpack:///src/components/messages/DebugEvent.vue","webpack:///./src/components/messages/DebugEvent.vue?79aa","webpack:///./src/components/messages/DebugEvent.vue?2317","webpack:///./src/components/messages/MessageOperations.vue?3eff","webpack:///src/components/messages/MessageOperations.vue","webpack:///./src/components/messages/MessageOperations.vue?9ec5","webpack:///./src/components/messages/MessageOperations.vue?d3d5","webpack:///./src/components/ChatHeader.vue?ffc6","webpack:///src/components/ChatHeader.vue","webpack:///./src/components/ChatHeader.vue?6ef1","webpack:///./src/components/ChatHeader.vue?440c","webpack:///./src/components/VoiceRecorder.vue?ac34","webpack:///./src/components/VoiceRecorderLock.vue?3e02","webpack:///src/components/VoiceRecorderLock.vue","webpack:///./src/components/VoiceRecorderLock.vue?10d1","webpack:///./src/components/VoiceRecorderLock.vue?daee","webpack:///src/components/VoiceRecorder.vue","webpack:///./src/components/VoiceRecorder.vue?b28c","webpack:///./src/components/VoiceRecorder.vue?dd9d","webpack:///src/components/Chat.vue","webpack:///./src/components/Chat.vue?a2dc","webpack:///./src/components/Chat.vue?4c96","webpack:///./src/components/Join.vue?e705","webpack:///src/components/Join.vue","webpack:///./src/components/Join.vue?6bf5","webpack:///./src/components/Join.vue?1673","webpack:///./src/components/Login.vue?47eb","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?6a16","webpack:///./src/components/Login.vue?cef6","webpack:///./src/components/Profile.vue?ab91","webpack:///src/components/Profile.vue","webpack:///./src/components/Profile.vue?132f","webpack:///./src/components/Profile.vue?db09","webpack:///./src/router/index.js","webpack:///./src/store/auth.module.js","webpack:///./src/store/index.js","webpack:///./src/services/navigation.service.js","webpack:///./src/main.js","webpack:///./src/assets/avatars/av_cat.png","webpack:///./src/App.vue?30f2","webpack:///./src/assets/avatars/av_panda.png","webpack:///./src/components/VoiceRecorder.vue?aabc","webpack:///./src/assets/avatars/av_tiger.png","webpack:///./src/assets/avatars/av_osprey.png","webpack:///./src/components/messages/MessageOutgoingAudio.vue?49c3","webpack:///./src/assets/avatars/av_panther.png","webpack:///./src/assets/avatars/av_otter.png","webpack:///./src/assets/avatars/av_mantis.png","webpack:///./src/assets/avatars/av_bunny.png","webpack:///./src/components/messages/MessageOutgoingImage.vue?108b","webpack:///./src/assets/avatars/av_iguna.png","webpack:///./src/assets/avatars/av_dragonfly.png","webpack:///./src/assets/avatars/av_hummingbird.png","webpack:///./src/assets/avatars/av_turtle.png","webpack:///./src/assets/avatars/av_orangutan.png","webpack:///./src/models/user.js","webpack:///./src/assets/avatars/av_owl.png","webpack:///./src/assets/avatars/av_starfish.png","webpack:///./src/assets/avatars/av_horse.png","webpack:///./src/components/messages/MessageIncomingText.vue?5c1c","webpack:///./src/assets/avatars sync \\.(jpeg|jpg|png)$","webpack:///./src/assets/avatars/av_shark.png","webpack:///./src/assets/avatars/av_giraffe.png","webpack:///./src/components/messages/MessageOperations.vue?5482","webpack:///./src/assets/avatars/av_gazelle.png","webpack:///./src/components/messages/MessageIncomingAudio.vue?97e1","webpack:///./src/assets/avatars/av_elephant.png","webpack:///./src/components/messages/ContactInvited.vue?49c4","webpack:///./src/assets/avatars/av_crab.png","webpack:///./src/components/messages/RoomHistoryVisibility.vue?f735","webpack:///./src/assets/avatars/av_egret.png","webpack:///./src/assets/avatars/av_fox.png","webpack:///./src/assets/avatars/av_stingray.png","webpack:///./src/components/Profile.vue?139f","webpack:///./src/assets/avatars/av_puppy.png","webpack:///./src/assets/avatars/av_rhino.png","webpack:///./src/assets/avatars/av_sloth.png","webpack:///./src/assets/avatars/av_yak.png","webpack:///./src/components/ChatHeader.vue?73c6","webpack:///./src/services/matrix.service.js","webpack:///./src/assets/avatars/av_baboon.png","webpack:///./src/assets/avatars/av_gorilla.png","webpack:///./src/assets/avatars/av_hippo.png","webpack:///./src/assets/avatars/av_bear.png","webpack:///./src/assets/avatars/av_lion.png","webpack:///./src/components/messages/RoomNameChanged.vue?8ce1","webpack:///./src/assets/avatars/av_lionfish.png","webpack:///./src/plugins/utils.js","webpack:///./src/components/LeaveRoomDialog.vue?9383","webpack:///./src/assets/avatars/av_lizard.png","webpack:///./src/assets/avatars/av_crane.png","webpack:///./src/components/LeaveRoomDialog.vue?b843","webpack:///src/components/LeaveRoomDialog.vue","webpack:///./src/components/LeaveRoomDialog.vue?c1fb","webpack:///./src/components/LeaveRoomDialog.vue?7228","webpack:///./src/components/VoiceRecorder.vue?9402","webpack:///./src/assets/avatars/av_penguin.png","webpack:///./src/assets/avatars/av_flamingo.png","webpack:///./src/components/messages/MessageOutgoingText.vue?6f7b","webpack:///./src/components/messages/MessageIncomingImage.vue?e68a","webpack:///./src/assets/avatars/av_whaleshark.png","webpack:///./src/assets/avatars/av_butterfly.png","webpack:///./src/assets/avatars/av_cockatoo.png","webpack:///./src/components/RoomList.vue?539b","webpack:///./src/components/messages/RoomAvatarChanged.vue?35e0","webpack:///./src/components/messages/QuickReactions.vue?0484","webpack:///./src/assets/avatars/av_rooster.png","webpack:///./src/assets/avatars/av_cardinal.png","webpack:///./src/assets/avatars/av_bee.png","webpack:///./src/components/messages/ContactLeave.vue?8083"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticRenderFns","methods","loggedIn","$store","state","auth","status","logOut","openDrawer","dispatch","$nextTick","computed","currentUser","user","title","$matrix","notificationCount","$route","meta","includeRoom","currentRoom","summary","info","roomId","watch","immediate","handler","component","VApp","VMain","Vue","use","Vuetify","icons","iconfont","staticClass","attrs","on","$event","stopPropagation","logout","_v","model","callback","$$v","currentRoomId","expression","_l","room","avatar","_s","topic","getUnreadNotificationCount","$emit","$navigation","VImg","VList","VListItem","VListItemAvatar","VListItemContent","VListItemGroup","VListItemSubtitle","VListItemTitle","VSubheader","components","RoomList","VBtn","ref","staticStyle","onScroll","preventDefault","closeContextMenuIfOpen","selectedEvent","showContextMenu","style","getSender","currentUserId","addReaction","addReply","edit","redact","download","_e","handleChatContainerResize","index","getId","showDayMarkerBeforeEvent","dayForEvent","isRelation","isRedacted","isRedaction","refInFor","touchStart","touchEnd","touchCancel","touchMove","componentForEvent","events","timelineWindow","_timelineSet","getRelationsForEvent","sendQuickReaction","showContextMenuForEvent","viewProfile","readMarker","directives","rawName","smoothScrollToEnd","replyToEvent","getContent","body","typingMembersString","indexOf","_k","keyCode","sendMessage","currentInput","editedEvent","cancelEditReply","sendButtonDisabled","nativeOn","startRecording","showRecorder","attachButtonDisabled","showAttachmentPicker","handlePickedAttachment","$refs","mic_button","onVoiceRecording","currentImageInput","currentSendError","currentSendProgress","cancelSendAttachment","currentSendOperation","sendAttachment","showEmojiPicker","emojiSelected","showNotAllowedForGuests","initialLoadDone","class","messageClasses","messageEventAvatar","messageEventDisplayName","substring","toUpperCase","reactions","inReplyToSender","domProps","linkify","$sanitize","inReplyToText","messageText","replacingEventId","opbutton","formatTime","origin_server_ts","includes","onClickEmoji","props","default","reactionMap","beforeDestroy","off","onAddRelation","$bubble","processReactions","_eventsCount","newValue","require","linkifyHtml","options","defaults","className","QuickReactions","nextEvent","timelineSet","inReplyToEvent","mounted","relatesTo","getWireContent","originalEventId","event_id","originalEvent","findEventById","showSenderAndTime","ts1","ts2","content","lines","split","reverse","startsWith","text","map","item","replace","join","senderIsAdminOrModerator","userAvatar","matrixClient","mxcUrlToHttp","userAvatarLetter","userDisplayName","ownAvatarClicked","buttonRef","anchor","stateEventDisplayName","member","getMember","displayname","state_key","getAvatarUrl","getHomeserverUrl","powerLevel","time","date","Date","setTime","today","getDate","getMonth","getFullYear","toLocaleTimeString","toLocaleString","mixins","messageMixin","VAvatar","VIcon","cover","contain","URL","revokeObjectURL","objectUrl","log","JSON","stringify","util","getAttachment","url","catch","attachmentMixin","changer","displayNameChange","prevContent","avatarChange","avatar_url","getPrevContent","history","visibility","getType","incoming","Boolean","isEditable","msgtype","isDownloadable","isRedactable","currentState","maySendRedactionForEvent","showRoomList","hideRoomList","memberCount","showRoomInfo","leaveRoom","showLeaveConfirmation","LeaveRoomDialog","onEvent","updateMemberCount","destroyed","newVal","getJoinedMemberCount","getRoomId","VCol","VContainer","VRow","ClickOutside","recordingTime","cancelRecording","stopRecording","states","ERROR","RECORDING","recordingLocked","isLocked","INITIAL","RECORDED","VoiceRecorderLock","show","micButtonRef","willCancel","startCoordinateX","startCoordinateY","State","recordStartedAt","recordTimer","val","addEventListener","mouseUp","mouseMove","removeEventListener","lockButtonStyle","left","width","$el","getBoundingClientRect","right","close","stopRecordTimer","x","clientX","y","clientY","touches","recorder","MicRecorder","bitRate","stop","startRecordTimer","setInterval","clearInterval","ScrollPosition","node","previousScrollHeightMinusTop","previousScrollTop","readyFor","restore","scrollTop","prepareFor","direction","ChatHeader","MessageIncomingText","MessageIncomingImage","MessageIncomingAudio","MessageOutgoingText","MessageOutgoingImage","MessageOutgoingAudio","ContactJoin","ContactLeave","ContactInvited","ContactChanged","RoomNameChanged","RoomTopicChanged","RoomAvatarChanged","RoomHistoryVisibility","DebugEvent","MessageOperations","VoiceRecorder","typingMembers","scrollPosition","currentImageInputPath","showContextMenuAnchor","chatContainerSize","showScrollToEnd","rrTimer","lastRR","container","chatContainerResizer","clientHeight","stopRRTimer","onUserTyping","ready","roomAliasOrId","getCanonicalAlias","fullyReadMarker","readEvent","count","opStyle","top","rectAnchor","rectChat","messageOperationsStrut","oldValue","onRoomNotJoined","hasMembershipState","user_id","onRoomJoined","initialEventId","touchX","touchY","touchStartX","touchStartY","touchTimer","touchTimerElapsed","touchCurrentX","touchCurrentY","tapTolerance","touchMoved","height","delta","membership","paginateBackIfNeeded","scrollHeight","handleScrolledToTop","handleScrolledToBottom","restartRRTimer","scrollToSeeNew","forwardLooking","typing","attachment","click","files","reader","FileReader","readAsDataURL","onUploadProgress","total","loaded","scrollToEvent","scrollTo","sourceY","targetY","children","lastChild","requestAnimationFrame","scrollIntoView","behavior","block","inline","messageInput","focus","rrTimerElapsed","READ_RECEIPT_TIMEOUT","elFirst","elLast","eventIdLast","lastTimestamp","getTs","eventIdFirst","idx","VCard","VCardActions","VCardText","VCardTitle","VDialog","VDivider","VProgressCircular","VSpacer","VTextarea","waitingForInfo","waitingForMembership","loading","handleLogin","roomAvatar","roomName","showAvatarPickerList","profile","image","availableAvatars","selectAvatar","scopedSlots","_u","fn","$set","proxy","handleJoin","_m","loadingMessage","guestUser","randomProfile","selectedProfile","onMyMembership","canEditProfile","hasChangedAvatar","hasChangedDisplayName","userId","handleOpenApp","clientPromise","login","assign","input","VSelect","VTextField","pop","isValid","v","userErrorMessage","password","passErrorMessage","showBackArrow","canPop","created","deep","normalize","VForm","displayName","showEditPasswordDialog","editValue","showEditDisplaynameDialog","setDisplayName","getUser","avatarUrl","upgradeAccount","VueRouter","routes","path","Home","Chat","Profile","Login","Join","router","beforeEach","to","from","next","publicPages","authRequired","localStorage","getItem","params","hash","sanitizeRoomId","app","setCurrentRoomId","getRoomLink","location","origin","pathname","encodeURIComponent","parse","initialState","namespaced","actions","commit","mutations","loginSuccess","loginFailure","registerSuccess","registerFailure","Vuex","vuexPersist","VuexPersist","storage","reducer","Store","plugins","plugin","install","nextRoutes","zeroIndex","beforeResolve","ignoredfrom","navigationService","route","targetIndex","go","ignoredErr","defaultOptions","VueSanitize","disallowedTagsMode","allowedTags","config","productionTip","VueResize","VEmojiPicker","matrix","store","VueClipboard","eventName","args","$parent","directive","inserted","el","onfocus","ev","blur","navigation","vuetify","render","h","App","$mount","User","home_server","is_guest","parts","webpackContext","req","id","webpackContextResolve","keys","global","Olm","LocalStorageCryptoStore","sdk","setCryptoStoreFactory","matrixService","matrixClientReady","rooms","getRoom","promiseLogin","tempMatrixClient","createClient","homeServerUrl","access_token","randomUser","pass","randomPass","register","response","setItem","localPart","device_id","u","getMatrixClient","clearCryptoStore","toRemove","removeItem","removeMatrixClientListeners","stopClient","clearStores","upgradeGuestAccount","randomPassword","self","getUserIdLocalpart","initClient","reloadRooms","emit","getProfileInfo","ignoredreject","once","ignoredclient","matrixStore","MemoryStore","webStorageSessionStore","WebStorageSessionStore","homeServer","opts","baseUrl","sessionStore","deviceId","accessToken","timelineSupport","unstableClientRelationAggregation","initCrypto","addMatrixClientListeners","startClient","isInitialSyncComplete","ignoredprevState","ignoredres","client","onRoom","onSessionLoggedOut","set","updateNotificationCount","ignoredroom","updatedRooms","getVisibleRooms","filter","_selfMembership","forEach","visibleRooms","getRooms","find","leave","removeRoom","uploadFile","file","uploadContent","getPublicRoomInfo","server","findOrGetMore","_findOrGetMore","canonical_alias","room_id","next_batch","_http","limit","since","dayjs","sha256","aesjs","base64Url","localizedFormat","extend","duration","Util","axios","responseType","decryptIfNeeded","bytes","createObjectURL","Blob","buffer","mimetype","ignoredw","ignoredh","thumbnail_file","decode","k","iv","aesCtr","ModeOfOperation","ctr","Counter","Uint8Array","update","arrayBuffer","originalHash","hashes","Buffer","compare","decryptedBytes","decrypt","ContentHelpers","rel_type","prefix","emoji","eventType","sendEvent","setAsKnownPromises","devices","userDevices","deviceInfo","known","setDeviceKnown","resendEvent","fileContents","size","description","progressHandler","onlyContentUri","messageContent","filename","isRoomEncrypted","crypto","randomBytes","concat","alloc","encryptedBytes","encrypt","jwk","kty","key_opts","alg","encode","ext","encryptedFile","toString","content_uri","readAsArrayBuffer","randomString","characters","charactersLength","charAt","Math","floor","random","match","visible","findVisibleElements","middle","findOneVisibleElement","nodes","isChildVisible","childNode","rect1","rect2","overlap","bottom","start","end","offsetTop","images","res","_importAll","headers","uri","setAvatarUrl","t1","endOf","t2","diff","timestamp","now","dayDiff","format","ms","showDialog","onLeaveRoom"],"mappings":"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","file":"js/app.1e4a45df.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-db74bfde\":\"7e7a3906\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-db74bfde\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-db74bfde\":\"71042d06\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/av_beta.41c39e4d.png\";","module.exports = __webpack_public_path__ + \"img/av_badger.d4acb400.png\";","module.exports = __webpack_public_path__ + \"img/av_octopus.5212bf6b.png\";","module.exports = __webpack_public_path__ + \"img/av_squirrel.d47c4b85.png\";","module.exports = __webpack_public_path__ + \"img/av_jellyfish.03a9c0d4.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactChanged.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_hedgehog.7cb0a229.png\";","module.exports = __webpack_public_path__ + \"img/av_tucan.30beb3d2.png\";","module.exports = __webpack_public_path__ + \"img/av_macaw.a05c791e.png\";","module.exports = __webpack_public_path__ + \"img/av_puffin.9d99a93a.png\";","module.exports = __webpack_public_path__ + \"img/av_peacock.bcef575d.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorderLock.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactJoin.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTopicChanged.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_walrus.3a9e78aa.png\";","module.exports = __webpack_public_path__ + \"img/av_zebra.2c4af008.png\";","module.exports = __webpack_public_path__ + \"img/av_leopard.60f857fd.png\";","module.exports = __webpack_public_path__ + \"img/av_pangolin.366738bb.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugEvent.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_polar bear.3e1fa612.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_snake.4e6fc2ae.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_eagle.ffb9de18.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-main',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-app>\n    <v-main>\n      <router-view />\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n  methods: {\n    loggedIn() {\n      return this.$store.state.auth.status.loggedIn;\n    },\n    logOut() {\n      this.openDrawer = false;\n      this.$store.dispatch(\"auth/logout\");\n      this.$nextTick(() => {\n        this.$navigation.push({path: \"/login\"}, -1);\n      })\n    },\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    title() {\n      var title = \"Keanu Weblite\";\n      if (this.$matrix.notificationCount > 0) {\n        title += \" [\" + this.$matrix.notificationCount + \"]\";\n      }\n      if (this.$route.meta.title) {\n        title += \"  - \" + this.$route.meta.title;\n      }\n      if (this.$route.meta.includeRoom) {\n        if (this.$matrix.currentRoom) {\n          title += \" - \" + (this.$matrix.currentRoom.summary.info.title || this.$matrix.currentRoom.roomId);\n        } else if (this.$matrix.currentRoomId) {\n          title += \" - \" + (this.$matrix.currentRoomId);\n        }\n      }\n      return title;\n    }\n  },\n  watch: {\n    title(title) {\n      document.title = title;\n    },\n    currentUser: {\n      immediate: true,\n      handler(ignorednewVal, ignoredoldVal) {\n        if (this.currentUser) {\n          this.$matrix\n            .login(this.currentUser)\n            .then(() => {\n              console.log(\"Matrix client ready\");\n            })\n            .catch((error) => {\n              console.log(\"Error creating client\", error);\n            });\n        }\n      },\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.copyright {\n  font-size: 10px;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6862bce0&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VMain } from 'vuetify/lib/components/VMain';\ninstallComponents(component, {VApp,VMain})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  icons: {\n    iconfont: 'md',\n  },\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('RoomList'),_c('v-btn',{staticClass:\"outlined-button\",attrs:{\"block\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.logout($event)}}},[_vm._v(\"Logout\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-list',{staticClass:\"room-list\",attrs:{\"dense\":\"\"}},[_c('v-subheader',[_vm._v(\"ROOMS\")]),_c('v-list-item-group',{attrs:{\"color\":\"primary\"},model:{value:(_vm.currentRoomId),callback:function ($$v) {_vm.currentRoomId=$$v},expression:\"currentRoomId\"}},_vm._l((_vm.$matrix.rooms),function(room){return _c('v-list-item',{key:room.roomId,attrs:{\"value\":room.roomId}},[_c('v-list-item-avatar',{attrs:{\"size\":\"40\",\"color\":\"#e0e0e0\"}},[_c('v-img',{attrs:{\"src\":room.avatar}})],1),_c('div',{staticClass:\"room-list-notification-count\"},[_vm._v(_vm._s(_vm.notificationCount(room)))]),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(room.summary.info.title))]),_c('v-list-item-subtitle',[_vm._v(_vm._s(room.topic))])],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-list dense class=\"room-list\">\n    <v-subheader>ROOMS</v-subheader>\n    <v-list-item-group v-model=\"currentRoomId\" color=\"primary\">\n      <v-list-item v-for=\"room in $matrix.rooms\" :key=\"room.roomId\" :value=\"room.roomId\">\n        <v-list-item-avatar size=\"40\" color=\"#e0e0e0\">\n          <v-img :src=\"room.avatar\" />\n        </v-list-item-avatar>\n        <div class=\"room-list-notification-count\">{{ notificationCount(room) }}</div>\n        <v-list-item-content>\n          <v-list-item-title>{{ room.summary.info.title }}</v-list-item-title>\n          <v-list-item-subtitle>{{ room.topic }}</v-list-item-subtitle>\n        </v-list-item-content>\n      </v-list-item>\n    </v-list-item-group>\n  </v-list>\n</template>\n\n<script>\nimport util from \"../plugins/utils\";\n\nexport default {\n  name: \"RoomList\",\n\n  data: () => ({\n    currentRoomId: null,\n  }),\n\n  methods: {\n    notificationCount(room) {\n      return room.getUnreadNotificationCount('total') || 0;\n    }\n  },\n\n  watch: {\n    currentRoomId() {\n      this.$emit(\"close\");\n      this.$navigation.push({name: 'Chat', params: { roomId: util.sanitizeRoomId(this.currentRoomId) }}, -1);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomList.vue?vue&type=template&id=1a0f8cb3&\"\nimport script from \"./RoomList.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemGroup,VListItemSubtitle,VListItemTitle,VSubheader})\n","<template>\n  <div>\n    <RoomList />\n    <v-btn block class=\"outlined-button\" @click.stop=\"logout\">Logout</v-btn>\n  </div>\n</template>\n\n<script>\nimport RoomList from '../components/RoomList';\n\nexport default {\n  components: {\n    RoomList\n  },\n  methods: {\n    logout() {\n      //TODO - For guest accounts, show warning about not being able to rejoin.\n      this.$store.dispatch(\"auth/logout\");\n      this.$nextTick(() => {\n        this.$navigation.push({path: \"/login\"}, -1);\n      })\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\">\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=5e3fa006&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\ninstallComponents(component, {VBtn})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-root fill-height d-flex flex-column\",attrs:{\"ma-0\":\"\",\"pa-0\":\"\"}},[_c('ChatHeader',{staticClass:\"chat-header flex-grow-1 flex-shrink-1\"}),_c('div',{ref:\"chatContainer\",staticClass:\"chat-content flex-grow-1 flex-shrink-1\",staticStyle:{\"overflow-x\":\"hidden\",\"overflow-y\":\"auto\"},on:{\"scroll\":_vm.onScroll,\"click\":function($event){$event.preventDefault();return _vm.closeContextMenuIfOpen($event)}}},[_c('div',{ref:\"messageOperationsStrut\",staticClass:\"message-operations-strut\"},[(_vm.selectedEvent && _vm.showContextMenu)?_c('message-operations',{style:(_vm.opStyle),attrs:{\"event\":_vm.selectedEvent,\"incoming\":_vm.selectedEvent.getSender() != _vm.$matrix.currentUserId},on:{\"close\":function($event){_vm.showContextMenu = false},\"addreaction\":_vm.addReaction,\"addreply\":function($event){return _vm.addReply(_vm.selectedEvent)},\"edit\":function($event){return _vm.edit(_vm.selectedEvent)},\"redact\":function($event){return _vm.redact(_vm.selectedEvent)},\"download\":function($event){return _vm.download(_vm.selectedEvent)}}}):_vm._e()],1),_c('resize-observer',{ref:\"chatContainerResizer\",on:{\"notify\":_vm.handleChatContainerResize}}),_vm._l((_vm.events),function(event,index){return _c('div',{key:event.getId(),attrs:{\"eventId\":event.getId()}},[(_vm.showDayMarkerBeforeEvent(event))?_c('div',{staticClass:\"day-marker\",attrs:{\"title\":_vm.dayForEvent(event)}}):_vm._e(),(\n          !event.isRelation() && !event.isRedacted() && !event.isRedaction()\n        )?_c('div',{ref:event.getId(),refInFor:true},[_c('div',{staticStyle:{\"position\":\"relative\",\"user-select\":\"none\"},on:{\"touchstart\":function (e) {\n              _vm.touchStart(e, event);\n            },\"touchend\":_vm.touchEnd,\"touchcancel\":_vm.touchCancel,\"touchmove\":_vm.touchMove}},[_c(_vm.componentForEvent(event),{tag:\"component\",attrs:{\"room\":_vm.room,\"event\":event,\"nextEvent\":_vm.events[index + 1],\"reactions\":_vm.timelineWindow._timelineSet.getRelationsForEvent(\n                event.getId(),\n                'm.annotation',\n                'm.reaction'\n              ),\"timelineSet\":_vm.timelineWindow._timelineSet},on:{\"send-quick-reaction\":_vm.sendQuickReaction,\"context-menu\":function($event){return _vm.showContextMenuForEvent($event)},\"own-avatar-clicked\":_vm.viewProfile}}),(event.getId() == _vm.readMarker && index < _vm.events.length - 1)?_c('div',{staticClass:\"read-marker\",attrs:{\"title\":\"Unread messages\"}}):_vm._e()],1)]):_vm._e()])})],2),(_vm.room)?_c('v-container',{staticClass:\"input-area-outer\",attrs:{\"fluid\":\"\"}},[_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showScrollToEnd),expression:\"showScrollToEnd\"}],staticClass:\"scroll-to-end\",attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"color\":\"black\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.smoothScrollToEnd($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"arrow_downward\")])],1),_c('v-row',{staticClass:\"ma-0 pa-0\"},[(_vm.replyToEvent)?_c('div',[_vm._v(\" REPLYING TO EVENT: \"+_vm._s(_vm.replyToEvent.getContent().body)+\" \")]):_vm._e(),_c('div',{staticClass:\"typing\"},[_vm._v(\" \"+_vm._s(_vm.typingMembersString)+\" \")])]),_c('v-row',{staticClass:\"input-area-inner align-center\"},[_c('v-col',{staticClass:\"flex-grow-1 flex-shrink-1 ma-0 pa-0\"},[_c('v-textarea',{ref:\"messageInput\",staticClass:\"input-area-text\",attrs:{\"height\":\"undefined\",\"full-width\":\"\",\"auto-grow\":\"\",\"rows\":\"1\",\"no-resize\":\"\",\"placeholder\":\"Your message...\",\"hide-details\":\"\",\"background-color\":\"white\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return (function () {\n              _vm.sendMessage();\n            })($event)}},model:{value:(_vm.currentInput),callback:function ($$v) {_vm.currentInput=$$v},expression:\"currentInput\"}})],1),(_vm.editedEvent || _vm.replyToEvent)?_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"color\":\"black\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelEditReply($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"cancel\")])],1)],1):_vm._e(),(!_vm.currentInput || _vm.currentInput.length == 0)?_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('v-btn',{directives:[{name:\"blur\",rawName:\"v-blur\"}],ref:\"mic_button\",staticStyle:{\"z-index\":\"10\"},attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"color\":\"transparent\"},nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.startRecording($event)},\"mousedown\":function($event){$event.stopPropagation();return _vm.startRecording($event)}}},[_c('v-icon',{attrs:{\"color\":_vm.showRecorder ? 'white' : 'black'}},[_vm._v(\"mic\")])],1)],1):_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('v-btn',{attrs:{\"fab\":\"\",\"small\":\"\",\"elevation\":\"0\",\"color\":\"black\",\"disabled\":_vm.sendButtonDisabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.sendMessage($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(_vm._s(_vm.editedEvent ? \"save\" : \"arrow_upward\"))])],1)],1),_c('v-col',{staticClass:\"input-area-button text-center flex-grow-0 flex-shrink-1\"},[_c('label',{ref:\"attachmentLabel\",attrs:{\"icon\":\"\",\"flat\":\"\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"large\":\"\",\"color\":\"black\",\"disabled\":_vm.attachButtonDisabled},on:{\"click\":_vm.showAttachmentPicker}},[_c('v-icon',{attrs:{\"x-large\":\"\"}},[_vm._v(\"add_circle_outline\")])],1),_c('input',{ref:\"attachment\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"name\":\"attachment\",\"accept\":\"image/*|audio/*|video/*|application/pdf\"},on:{\"change\":function($event){return _vm.handlePickedAttachment($event)}}})],1)])],1),_c('VoiceRecorder',{attrs:{\"micButtonRef\":_vm.$refs.mic_button,\"show\":_vm.showRecorder},on:{\"close\":function($event){_vm.showRecorder = false},\"file\":_vm.onVoiceRecording}})],1):_vm._e(),(_vm.currentImageInput)?_c('div',[_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.currentImageInput),callback:function ($$v) {_vm.currentImageInput=$$v},expression:\"currentImageInput\"}},[_c('v-card',{staticClass:\"ma-0 pa-0\"},[_c('v-card-text',{staticClass:\"ma-0 pa-0\"},[_c('v-img',{staticStyle:{\"max-height\":\"50vh\"},attrs:{\"aspect-ratio\":1,\"src\":_vm.currentImageInput,\"contain\":\"\"}}),(_vm.currentSendError)?_c('div',[_vm._v(_vm._s(_vm.currentSendError))]):_c('div',[_vm._v(_vm._s(_vm.currentSendProgress))])],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.cancelSendAttachment}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\",\"disabled\":_vm.currentSendOperation != null},on:{\"click\":_vm.sendAttachment}},[_vm._v(\"Send\")])],1)],1)],1)],1):_vm._e(),(_vm.showEmojiPicker)?_c('div',[_c('v-dialog',{staticClass:\"ma-0 pa-0\",model:{value:(_vm.showEmojiPicker),callback:function ($$v) {_vm.showEmojiPicker=$$v},expression:\"showEmojiPicker\"}},[_c('VEmojiPicker',{staticStyle:{\"width\":\"100%\"},on:{\"select\":_vm.emojiSelected}})],1)],1):_vm._e(),_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.showNotAllowedForGuests),callback:function ($$v) {_vm.showNotAllowedForGuests=$$v},expression:\"showNotAllowedForGuests\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"You are logged in as a guest\")]),_c('v-card-text',[_c('div',[_vm._v(\"Unfortunately guests are not allowed to upload files.\")])]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.showNotAllowedForGuests = false}}},[_vm._v(\"Ok\")])],1)],1)],1),(!_vm.initialLoadDone)?_c('v-container',{staticStyle:{\"position\":\"absolute\"},attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"text-center\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"bubble\"},[_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}}),(_vm.inReplyToText)?_c('div',{staticClass:\"original-message\"},[_c('div',{staticClass:\"original-message-sender\"},[_vm._v(\" \"+_vm._s(_vm.inReplyToSender || \"Someone\")+\" said: \")]),_c('div',{staticClass:\"original-message-text\",domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.inReplyToText)))}})]):_vm._e(),_c('div',{staticClass:\"message\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.messageText)))}}),(_vm.event.replacingEventId())?_c('span',{staticClass:\"edit-marker\"},[_vm._v(\"(edited)\")]):_vm._e()])],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reactions),expression:\"reactions\"}],staticClass:\"quick-reaction-container\"},_vm._l((_vm.reactionMap),function(value,name){return _c('span',{key:name,class:{'quick-reaction':true,'sent':value.includes(_vm.$matrix.currentUserId)},on:{\"mousedown\":function($event){return _vm.onClickEmoji(name)}}},[_vm._v(\" \"+_vm._s(name)+\" \"),_c('span',{staticClass:\"quick-reaction-count\"},[_vm._v(_vm._s(value.length))])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"quick-reaction-container\" v-show=\"reactions\">\n    <span :class=\"{'quick-reaction':true,'sent':value.includes($matrix.currentUserId)}\" v-for=\"(value, name) in reactionMap\" :key=\"name\" @mousedown=\"onClickEmoji(name)\">\n      {{ name }} <span class=\"quick-reaction-count\">{{ value.length }}</span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    event: {\n      type: Object,\n      default: function () {\n        return {}\n      }\n    },\n    reactions: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    }\n  },\n  data() {\n    return {\n      reactionMap: {}\n    }\n  },\n  beforeDestroy() {\n    if (this.reactions) {\n      this.reactions.off('Relations.add', this.onAddRelation);\n    }\n  },\n  methods: {\n    onClickEmoji(emoji) {\n      this.$bubble('send-quick-reaction', {reaction:emoji, event:this.event});\n    },\n    onAddRelation(ignoredevent) {\n      this.processReactions();\n    },\n    processReactions() {\n        var reactionMap = {};\n      if (this.reactions && this.reactions._eventsCount > 0) {\n        const relations = this.reactions.getRelations();\n        for (const r of relations) {\n          const emoji = r.getRelation().key;\n          const sender = r.getSender();\n          if (reactionMap[emoji]) {\n            const array = reactionMap[emoji];\n            if (!array.includes(sender)) {\n              array.push(sender)\n            }\n          } else {\n            reactionMap[emoji] = [sender];\n          }\n        }\n      }\n      this.reactionMap = reactionMap;\n    }\n  },\n  watch: {\n     reactions: {\n       handler(newValue, oldValue) {\n         if (oldValue) {\n           oldValue.off('Relations.add', this.onAddRelation);\n         }\n         if (newValue) {\n          newValue.on('Relations.add', this.onAddRelation);           \n         }\n         this.processReactions();\n      },\n      immediate: true\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuickReactions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuickReactions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QuickReactions.vue?vue&type=template&id=3b5eee3e&\"\nimport script from \"./QuickReactions.vue?vue&type=script&lang=js&\"\nexport * from \"./QuickReactions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QuickReactions.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import QuickReactions from './QuickReactions.vue';\nvar linkify = require('linkifyjs');\nvar linkifyHtml = require('linkifyjs/html');\nlinkify.options.defaults.className = \"link\";\n\nexport default {\n  components: {\n    QuickReactions\n  },\n  props: {\n    room: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n    event: {\n      type: Object,\n      default: function () {\n        return {}\n      }\n    },\n    nextEvent: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n    reactions: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n    timelineSet: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n  },\n  data() {\n    return {\n      inReplyToEvent: null,\n      inReplyToSender: null\n    }\n  },\n  mounted() {\n    const relatesTo = this.event.getWireContent()['m.relates_to'];\n    if (relatesTo && relatesTo['m.in_reply_to'])\n    {\n      // Can we find the original message?\n      const originalEventId = relatesTo['m.in_reply_to'].event_id;\n      if (originalEventId && this.timelineSet) {\n        const originalEvent = this.timelineSet.findEventById(originalEventId);\n        if (originalEvent) {\n          this.inReplyToEvent = originalEvent;\n          this.inReplyToSender = this.messageEventDisplayName(originalEvent);\n        }\n      }\n    }\n  },\n  computed: {\n    /**\n     * Don't show sender and time if the next event is within 2 minutes and also from us (= back to back messages)\n     */\n    showSenderAndTime() {\n      if (this.nextEvent && this.nextEvent.getSender() == this.event.getSender()) {\n        const ts1 = this.nextEvent.event.origin_server_ts;\n        const ts2 = this.event.event.origin_server_ts;\n        return (ts1 - ts2) < (2 * 60 * 1000); // less than 2 minutes\n      }\n      return true;\n    },\n\n    inReplyToText() {\n      const relatesTo = this.event.getWireContent()['m.relates_to'];\n      if (relatesTo && relatesTo['m.in_reply_to'])\n      {\n        const content = this.event.getContent();\n\n        const lines = content.body.split('\\n').reverse();\n        while (lines.length && !lines[0].startsWith('> ')) lines.shift();\n        // Reply fallback has a blank line after it, so remove it to prevent leading newline\n        if (lines[0] === '') lines.shift();\n        const text = lines\n        .map((item) => { return item.replace(/^> (<.*> )?/g, ''); })\n        .reverse()\n        .join('\\n');\n        if (text) {\n          return text;\n        }\n\n        if (this.inReplyToEvent) {\n          var c = this.inReplyToEvent.getContent();\n          return c.body;\n        }\n\n        // We don't have the original text (at the moment at least)\n        return  \"<original text>\";\n      }\n      return null;\n    },\n\n    messageText() {\n      const relatesTo = this.event.getWireContent()['m.relates_to'];\n      if (relatesTo && relatesTo['m.in_reply_to'])\n      {\n        const content = this.event.getContent();\n\n        // Remove the new text and strip \"> \" from the old original text\n        const lines = content.body.split('\\n');\n        while (lines.length && lines[0].startsWith('> ')) lines.shift();\n        // Reply fallback has a blank line after it, so remove it to prevent leading newline\n        if (lines[0] === '') lines.shift();\n        return lines.join('\\n');\n      }\n      return this.event.getContent().body;\n    },\n\n    /**\n     * Classes to set for the message. Currently only for \"messageIn\", TODO: - detect messageIn or messageOut.\n     */\n  \n    messageClasses() {\n      return {'messageIn':true,'from-admin':this.senderIsAdminOrModerator(this.event)}\n    },\n\n    userAvatar() {\n      if (!this.$matrix.userAvatar) {\n        return null;\n      }\n      return this.$matrix.matrixClient.mxcUrlToHttp(\n        this.$matrix.userAvatar,\n        80,\n        80,\n        \"scale\",\n        true\n      );\n    },\n\n    userAvatarLetter() {\n      if (!this.$matrix.currentUser) {\n        return null;\n      }\n      return (this.$matrix.userDisplayName || this.$matrix.currentUserId.substring(1)).substring(0, 1).toUpperCase();\n    }\n  },\n  methods: {\n    ownAvatarClicked() {\n      this.$emit(\"own-avatar-clicked\", {event: this.event});\n    },\n\n    showContextMenu(buttonRef) {\n      this.$emit(\"context-menu\", {event: this.event,anchor: buttonRef});\n    },\n\n    /**\n     * Get a display name given an event.\n     */\n    stateEventDisplayName(event) {\n      if (event.getSender() == this.$matrix.currentUserId) {\n        return \"You\";\n      }\n      if (this.room) {\n        const member = this.room.getMember(event.getSender());\n        if (member) {\n          return member.name;\n        }\n      }\n      return event.getContent().displayname || event.event.state_key;\n    },\n\n    messageEventDisplayName(event) {\n      return this.stateEventDisplayName(event);\n    },\n\n    messageEventAvatar(event) {\n      if (this.room) {\n        const member = this.room.getMember(event.getSender());\n        if (member) {\n          return member.getAvatarUrl(\n            this.$matrix.matrixClient.getHomeserverUrl(),\n            40,\n            40,\n            \"scale\",\n            true\n          );\n        }\n      }\n      return null;\n    },\n\n    /**\n     * Return true if the event sender has a powel level > 0, e.g. is moderator or admin of some sort.\n     */\n    senderIsAdminOrModerator(event) {\n      if (this.room) {\n        const member = this.room.getMember(event.getSender());\n        if (member) {\n          return member.powerLevel > 0;\n        }\n      }\n      return false;\n    },\n\n    formatTime(time) {\n      const date = new Date();\n      date.setTime(time);\n\n      const today = new Date();\n      if (\n        date.getDate() == today.getDate() &&\n        date.getMonth() == today.getMonth() &&\n        date.getFullYear() == today.getFullYear()\n      ) {\n        // For today, skip the date part\n        return date.toLocaleTimeString();\n      }\n      return date.toLocaleString();\n    },\n\n    linkify(text) {\n      return linkifyHtml(text);\n    }\n  },\n}","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n\n    <div class=\"bubble\">\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n      <div class=\"original-message\" v-if=\"inReplyToText\">\n        <div class=\"original-message-sender\">\n          {{ inReplyToSender || \"Someone\" }} said:\n        </div>\n        <div class=\"original-message-text\" v-html=\"linkify($sanitize(inReplyToText))\" />\n      </div>\n      <div class=\"message\">\n        <span v-html=\"linkify($sanitize(messageText))\" />\n        <span class=\"edit-marker\" v-if=\"event.replacingEventId()\"\n          >(edited)</span\n        >\n      </div>\n      <!-- <div>{{ JSON.stringify(event) }}</div> -->\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingText.vue?vue&type=template&id=7df95071&\"\nimport script from \"./MessageIncomingText.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingText.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingText.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"bubble image-bubble\"},[_c('v-img',{ref:\"image\",attrs:{\"aspect-ratio\":16 / 9,\"src\":_vm.src,\"cover\":_vm.cover,\"contain\":_vm.contain}}),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n    <div class=\"bubble image-bubble\">\n      <v-img :aspect-ratio=\"16 / 9\" ref=\"image\" :src=\"src\" :cover=\"cover\" :contain=\"contain\" />\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport util from \"../../plugins/utils\";\n\nexport default {\n  mixins: [messageMixin],\n  data() {\n    return {\n      src: null,\n      cover: true,\n      contain: false\n    };\n  },\n  mounted() {\n    //console.log(\"Mounted with event:\", JSON.stringify(this.event.getContent()));\n    const width = this.$refs.image.$el.clientWidth;\n    const height = (width * 9) / 16;\n    util\n      .getThumbnail(this.$matrix.matrixClient, this.event, width, height)\n      .then((url) => {\n        const info = this.event.getContent().info;\n        // JPEGs use cover, PNG and GIF ect contain. This is because PNG and GIF are expected to\n        // be stickers and small emoji type things.\n        if (info && info.mimetype && info.mimetype.startsWith(\"image/jp\")) {\n          this.cover = true;\n          this.contain = false;\n        } else {\n          this.cover = false;\n          this.contain = true;\n        }\n        this.src = url;\n      })\n      .catch((err) => {\n        console.log(\"Failed to fetch thumbnail: \", err);\n      });\n  },\n  beforeDestroy() {\n    if (this.src) {\n      const objectUrl = this.src;\n      this.src = null;\n      URL.revokeObjectURL(objectUrl);\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingImage.vue?vue&type=template&id=50d8b03f&\"\nimport script from \"./MessageIncomingImage.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingImage.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.messageClasses},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"}},[(_vm.messageEventAvatar(_vm.event))?_c('img',{attrs:{\"src\":_vm.messageEventAvatar(_vm.event)}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event).substring(0, 1).toUpperCase()))])]),_c('div',{staticClass:\"audio-bubble\"},[_c('audio',{attrs:{\"controls\":\"\",\"src\":_vm.src}},[_vm._v(\"Audio file\")]),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),(_vm.showSenderAndTime)?_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.messageEventDisplayName(_vm.event)))]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import util from \"../../plugins/utils\";\n\nexport default {\n  data() {\n    return {\n      src: null\n    }\n  },\n  mounted() {\n    console.log(\"Mounted with event:\", JSON.stringify(this.event.getContent()))\n    util\n      .getAttachment(this.$matrix.matrixClient, this.event)\n      .then((url) => {\n        this.src = url;\n      })\n      .catch((err) => {\n        console.log(\"Failed to fetch attachment: \", err);\n      });\n  },\n  beforeDestroy() {\n    if (this.src) {\n      const objectUrl = this.src;\n      this.src = null;\n      URL.revokeObjectURL(objectUrl);\n    }\n  },\n}","<template>\n  <div :class=\"messageClasses\">\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\">\n      <img v-if=\"messageEventAvatar(event)\" :src=\"messageEventAvatar(event)\" />\n      <span v-else class=\"white--text headline\">{{\n        messageEventDisplayName(event).substring(0, 1).toUpperCase()\n      }}</span>\n    </v-avatar>\n    <div class=\"audio-bubble\">\n      <audio controls :src=\"src\">Audio file</audio>\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div v-if=\"showSenderAndTime\" class=\"senderAndTime\">\n      <div class=\"sender\">{{ messageEventDisplayName(event) }}</div>\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport attachmentMixin from \"./attachmentMixin\";\n\nexport default {\n  mixins: [messageMixin, attachmentMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingAudio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingAudio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageIncomingAudio.vue?vue&type=template&id=61f9f6fc&\"\nimport script from \"./MessageIncomingAudio.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageIncomingAudio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageIncomingAudio.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"bubble\"},[_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}}),(_vm.inReplyToText)?_c('div',{staticClass:\"original-message\"},[_c('div',{staticClass:\"original-message-sender\"},[_vm._v(\" \"+_vm._s(_vm.inReplyToSender || \"Someone\")+\" said: \")]),_c('div',{staticClass:\"original-message-text\",domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.inReplyToText)))}})]):_vm._e(),_c('div',{staticClass:\"message\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.linkify(_vm.$sanitize(_vm.messageText)))}}),(_vm.event.replacingEventId())?_c('span',{staticClass:\"edit-marker\"},[_vm._v(\"(edited)\")]):_vm._e()])],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")]),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"bubble\">\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n      <div class=\"original-message\" v-if=\"inReplyToText\">\n        <div class=\"original-message-sender\">\n          {{ inReplyToSender || \"Someone\" }} said:\n        </div>\n        <div class=\"original-message-text\" v-html=\"linkify($sanitize(inReplyToText))\" />\n      </div>\n\n      <div class=\"message\">\n        <span v-html=\"linkify($sanitize(messageText))\" />\n        <span class=\"edit-marker\" v-if=\"event.replacingEventId()\"\n          >(edited)</span\n        >\n      </div>\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n    <div class=\"senderAndTime\">\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n      <div class=\"status\">{{ event.status }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingText.vue?vue&type=template&id=0c3d1b40&\"\nimport script from \"./MessageOutgoingText.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingText.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingText.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"bubble image-bubble\"},[_c('v-img',{ref:\"image\",attrs:{\"aspect-ratio\":16 / 9,\"src\":_vm.src,\"cover\":\"\"}}),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \"),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"bubble image-bubble\">\n      <v-img :aspect-ratio=\"16 / 9\" ref=\"image\" :src=\"src\" cover />\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <div class=\"senderAndTime\">\n      <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n        <div class=\"status\">{{ event.status }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport util from \"../../plugins/utils\";\n\nexport default {\n  mixins: [messageMixin],\n  data() {\n    return {\n      src: null,\n    };\n  },\n  mounted() {\n    const width = this.$refs.image.$el.clientWidth;\n    const height = (width * 9) / 16;\n    util\n      .getThumbnail(this.$matrix.matrixClient, this.event, width, height)\n      .then((url) => {\n        this.src = url;\n      })\n      .catch((err) => {\n        console.log(\"Failed to fetch thumbnail: \", err);\n      });\n  },\n  beforeDestroy() {\n    if (this.src) {\n      const objectUrl = this.src;\n      this.src = null;\n      URL.revokeObjectURL(objectUrl);\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingImage.vue?vue&type=template&id=0d0bf48c&\"\nimport script from \"./MessageOutgoingImage.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingImage.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VBtn,VIcon,VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageOut\"},[_c('div',{ref:\"opbutton\",staticClass:\"op-button\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showContextMenu(_vm.$refs.opbutton)}}},[_c('v-icon',[_vm._v(\"more_vert\")])],1)],1),_c('div',{staticClass:\"audio-bubble\"},[_c('audio',{attrs:{\"controls\":\"\",\"src\":_vm.src}},[_vm._v(\"Audio file\")]),_c('QuickReactions',{attrs:{\"event\":_vm.event,\"reactions\":_vm.reactions}})],1),_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"32\",\"color\":\"#ededed\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.ownAvatarClicked($event)}}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])]),_c('div',{staticClass:\"senderAndTime\"},[_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.event.event.origin_server_ts))+\" \")]),_c('div',{staticClass:\"status\"},[_vm._v(_vm._s(_vm.event.status))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messageOut\">\n    <div class=\"op-button\" ref=\"opbutton\">\n      <v-btn icon @click.stop=\"showContextMenu($refs.opbutton)\"\n        ><v-icon>more_vert</v-icon></v-btn\n      >\n    </div>\n    <div class=\"audio-bubble\">\n      <audio controls :src=\"src\">Audio file</audio>\n      <QuickReactions :event=\"event\" :reactions=\"reactions\" />\n    </div>\n    <v-avatar class=\"avatar\" size=\"32\" color=\"#ededed\" @click.stop=\"ownAvatarClicked\">\n      <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n      <span v-else class=\"white--text headline\">{{ userAvatarLetter }}</span>\n    </v-avatar>\n    <div class=\"senderAndTime\">\n      <!-- <div class=\"sender\">{{ \"You\" }}</div> -->\n      <div class=\"time\">\n        {{ formatTime(event.event.origin_server_ts) }}\n      </div>\n      <div class=\"status\">{{ event.status }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\nimport attachmentMixin from \"./attachmentMixin\";\n\nexport default {\n  mixins: [messageMixin, attachmentMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOutgoingAudio.vue?vue&type=template&id=0bfa7e3d&\"\nimport script from \"./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOutgoingAudio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOutgoingAudio.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VAvatar,VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" joined the chat \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact joined the chat -->\n  <div class=\"messageJoin\">\n    {{ stateEventDisplayName(event) }} joined the chat\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactJoin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactJoin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactJoin.vue?vue&type=template&id=04879178&\"\nimport script from \"./ContactJoin.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactJoin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactJoin.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" left the chat \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact left the chat -->\n  <div class=\"messageJoin\">\n    {{ stateEventDisplayName(event) }} left the chat\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactLeave.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactLeave.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactLeave.vue?vue&type=template&id=7c4af88a&\"\nimport script from \"./ContactLeave.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactLeave.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactLeave.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" was invited to the chat... \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact invited to the chat -->\n  <div class=\"messageJoin\">\n    {{ stateEventDisplayName(event) }} was invited to the chat...\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactInvited.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactInvited.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactInvited.vue?vue&type=template&id=4c946af4&\"\nimport script from \"./ContactInvited.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactInvited.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactInvited.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messageJoin\"},[(_vm.displayNameChange)?_c('div',[_vm._v(\" \"+_vm._s(_vm.changer)+\" changed display name to \"+_vm._s(_vm.event.getContent().displayname)+\" \")]):_vm._e(),(_vm.avatarChange)?_c('div',[_vm._v(\" \"+_vm._s(_vm.changer)+\" changed the avatar \")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- Contact joined the chat -->\n  <div class=\"messageJoin\">\n    <div v-if=\"displayNameChange\">\n    {{ changer }} changed display name to {{ event.getContent().displayname }}\n    </div>\n    <div v-if=\"avatarChange\">\n    {{ changer }} changed the avatar\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n  computed: {\n    displayNameChange() {\n      const content = this.event.getContent();\n      const prevContent = this.event.getPrevContent();\n      return content.displayname != prevContent.displayname;\n    },\n    avatarChange() {\n      const content = this.event.getContent();\n      const prevContent = this.event.getPrevContent();\n      return content.avatar_url != prevContent.avatar_url;\n    },\n    changer() {\n      if (this.event.getSender() == this.$matrix.currentUserId) {\n        return \"You\";\n      }\n      if (this.displayNameChange) {\n        return this.event.getPrevContent().displayname;\n      }\n      return this.stateEventDisplayName(this.event);\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContactChanged.vue?vue&type=template&id=1c6fc18c&\"\nimport script from \"./ContactChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./ContactChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContactChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" changed room name to \"+_vm._s(_vm.event.getContent().name)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM NAME CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} changed room name to\n    {{ event.getContent().name }}\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomNameChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomNameChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomNameChanged.vue?vue&type=template&id=3cc25dd6&\"\nimport script from \"./RoomNameChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomNameChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomNameChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" changed topic to \"+_vm._s(_vm.event.getContent().topic)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM TOPIC CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} changed topic to\n    {{ event.getContent().topic }}\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTopicChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomTopicChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomTopicChanged.vue?vue&type=template&id=5a4aeb60&\"\nimport script from \"./RoomTopicChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomTopicChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomTopicChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" changed the room avatar \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM AVATAR CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} changed the room avatar\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomAvatarChanged.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomAvatarChanged.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomAvatarChanged.vue?vue&type=template&id=cae4f458&\"\nimport script from \"./RoomAvatarChanged.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomAvatarChanged.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomAvatarChanged.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\" \"+_vm._s(_vm.stateEventDisplayName(_vm.event))+\" made room history \"+_vm._s(_vm.history(_vm.event))+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- ROOM AVATAR CHANGED -->\n  <div class=\"statusEvent\">\n    {{ stateEventDisplayName(event) }} made room history {{ history(event) }}\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n  methods: {\n    history(event) {\n      const visibility = event.getContent().history_visibility;\n      switch (visibility) {\n        case \"world_readable\":\n          return \"readable by anyone\";\n        case \"shared\":\n          return \"readable to all members in the room\";\n        case \"invited\":\n          return \"readable to members from when they were invited\";\n        case \"joined\":\n          return \"readable to members from when they joined\";\n      }\n      return visibility;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomHistoryVisibility.vue?vue&type=template&id=92da6c20&\"\nimport script from \"./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomHistoryVisibility.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomHistoryVisibility.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statusEvent\"},[_vm._v(\"Event: \"+_vm._s(_vm.event.getType()))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"statusEvent\">Event: {{ event.getType() }}</div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugEvent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugEvent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DebugEvent.vue?vue&type=template&id=535427f5&\"\nimport script from \"./DebugEvent.vue?vue&type=script&lang=js&\"\nexport * from \"./DebugEvent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DebugEvent.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'message-operations':true,'incoming':_vm.incoming,'outgoing':!_vm.incoming}},[_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addReaction($event)}}},[_c('v-icon',[_vm._v(\"mood\")])],1),(_vm.incoming)?_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addReply($event)}}},[_c('v-icon',[_vm._v(\"reply\")])],1):_vm._e(),(_vm.isEditable)?_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.edit($event)}}},[_c('v-icon',[_vm._v(\"edit\")])],1):_vm._e(),(_vm.isRedactable)?_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.redact($event)}}},[_c('v-icon',[_vm._v(\"delete\")])],1):_vm._e(),(_vm.isDownloadable)?_c('v-btn',{staticClass:\"ma-0 pa-0\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.download($event)}}},[_c('v-icon',[_vm._v(\"get_app\")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"{'message-operations':true,'incoming':incoming,'outgoing':!incoming}\">\n    <v-btn icon @click.stop=\"addReaction\" class=\"ma-0 pa-0\">\n      <v-icon>mood</v-icon>\n    </v-btn>\n    <v-btn v-if=\"incoming\" icon @click.stop=\"addReply\" class=\"ma-0 pa-0\">\n      <v-icon>reply</v-icon>\n    </v-btn>\n    <v-btn v-if=\"isEditable\" icon @click.stop=\"edit\" class=\"ma-0 pa-0\">\n      <v-icon>edit</v-icon>\n    </v-btn>\n    <v-btn v-if=\"isRedactable\" icon @click.stop=\"redact\" class=\"ma-0 pa-0\">\n      <v-icon>delete</v-icon>\n    </v-btn>\n    <v-btn v-if=\"isDownloadable\" icon @click.stop=\"download\" class=\"ma-0 pa-0\">\n      <v-icon>get_app</v-icon>\n    </v-btn>\n  </div>\n</template>\n\n<script>\nimport messageMixin from \"./messageMixin\";\n\nexport default {\n  mixins: [messageMixin],\n\n  props: {\n    incoming: {\n      type: Boolean,\n      default: function () {\n        return true\n      }\n    },\n    event: {\n      type: Object,\n      default: function () {\n        return {}\n      }\n    },\n  },\n  \n  computed: {\n    isEditable() {\n      return !this.incoming && this.event.getContent().msgtype == \"m.text\";\n    },\n    isDownloadable() {\n      const msgtype = this.event.getContent().msgtype;\n      return ['m.video','m.audio','m.image','m.file'].includes(msgtype);\n    },\n    isRedactable() {\n      const room = this.$matrix.matrixClient.getRoom(this.event.getRoomId());\n      if (room && room.currentState && room.currentState.maySendRedactionForEvent(this.event, this.$matrix.currentUserId)) {\n        return true;\n      }\n      return false;\n    }\n  },\n\n  methods: {\n    addReaction() {\n      this.$emit(\"close\");\n      this.$emit(\"addreaction\", {event:this.event});\n    },\n    addReply() {\n      this.$emit(\"close\");\n      this.$emit(\"addreply\", {event:this.event});\n    },\n    edit() {\n      this.$emit(\"close\");\n      this.$emit(\"edit\", {event:this.event});\n    },\n    redact() {\n      this.$emit(\"close\");\n      this.$emit(\"redact\", {event:this.event});\n    },\n    download() {\n      this.$emit(\"close\");\n      this.$emit(\"download\", {event:this.event});\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperations.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperations.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageOperations.vue?vue&type=template&id=2f7febf3&\"\nimport script from \"./MessageOperations.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageOperations.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageOperations.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.room)?_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"chat-header-row flex-nowrap\"},[_c('v-col',{staticClass:\"chat-header-members text-start ma-0 pa-0\",attrs:{\"cols\":\"auto\"}},[_c('v-avatar',{staticClass:\"mr-2\",attrs:{\"size\":\"40\"}},[_c('v-img',{attrs:{\"src\":_vm.room.avatar}})],1)],1),_c('v-col',{staticClass:\"ma-0 pa-0 flex-shrink-1 flex-nowrap\",staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"d-flex flex-nowrap room-name\",on:{\"click\":function($event){$event.stopPropagation();_vm.showRoomList = true}}},[_vm._v(_vm._s(_vm.room.summary.info.title)+\" \"),_c('v-icon',[_vm._v(\"expand_more\")])],1),(_vm.showRoomList)?_c('RoomList',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.hideRoomList),expression:\"hideRoomList\"}],on:{\"close\":_vm.hideRoomList}}):_vm._e(),_c('div',{staticClass:\"num-members\"},[_vm._v(_vm._s(_vm.memberCount)+_vm._s(_vm.memberCount > 1 ? \" members\" : \" member\"))])],1),_c('v-col',{staticClass:\"text-end ma-0 pa-0\",attrs:{\"cols\":\"auto\"}},[_c('v-btn',{staticClass:\"info-button\",attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showRoomInfo($event)}}},[_c('v-icon',{attrs:{\"color\":\"black\"}},[_vm._v(\"info\")])],1)],1),_c('v-col',{staticClass:\"text-end ma-0 pa-0\",attrs:{\"cols\":\"auto\"}},[_c('v-btn',{staticClass:\"leave-button\",attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.leaveRoom($event)}}},[_vm._v(\"Leave\")])],1)],1),_c('LeaveRoomDialog',{attrs:{\"show\":_vm.showLeaveConfirmation,\"room\":_vm.room},on:{\"close\":function($event){_vm.showLeaveConfirmation = false}}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid v-if=\"room\">\n    <v-row class=\"chat-header-row flex-nowrap\">\n      <v-col\n      cols=\"auto\"\n        class=\"chat-header-members text-start ma-0 pa-0\"\n      >\n        <v-avatar size=\"40\" class=\"mr-2\">\n          <v-img :src=\"room.avatar\" />\n        </v-avatar>\n      </v-col>\n\n      <v-col class=\"ma-0 pa-0 flex-shrink-1 flex-nowrap\" style=\"overflow:hidden\">\n        <div class=\"d-flex flex-nowrap room-name\" @click.stop=\"showRoomList = true\">{{ room.summary.info.title }} <v-icon>expand_more</v-icon></div>\n        <RoomList v-if=\"showRoomList\" v-click-outside=\"hideRoomList\" @close=\"hideRoomList\" />\n        <div class=\"num-members\">{{ memberCount }}{{ memberCount > 1 ? \" members\" : \" member\" }}</div>\n      </v-col>\n      <v-col cols=\"auto\" class=\"text-end ma-0 pa-0\">\n        <v-btn text class=\"info-button\" @click.stop=\"showRoomInfo\"><v-icon color=\"black\">info</v-icon></v-btn>\n      </v-col>\n      <v-col cols=\"auto\" class=\"text-end ma-0 pa-0\">\n        <v-btn text class=\"leave-button\" @click.stop=\"leaveRoom\">Leave</v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- \"REALLY LEAVE?\" dialog -->\n    <LeaveRoomDialog :show=\"showLeaveConfirmation\" :room=\"room\" @close=\"showLeaveConfirmation = false\" />\n\n  </v-container>\n</template>\n\n<script>\nimport LeaveRoomDialog from '../components/LeaveRoomDialog';\nimport RoomList from \"../components/RoomList\";\n\nexport default {\n  name: \"ChatHeader\",\n  components: {\n    LeaveRoomDialog,\n    RoomList\n  },\n  data() {\n    return {\n      memberCount: null,\n      showRoomList: false,\n      showLeaveConfirmation: false\n    };\n  },\n  mounted() {\n    this.$matrix.on(\"Room.timeline\", this.onEvent);\n    this.updateMemberCount();\n  },\n\n  destroyed() {\n    this.$matrix.off(\"Room.timeline\", this.onEvent);\n  },\n\n  computed: {\n    room() {\n      return this.$matrix.currentRoom;\n    },\n  },\n\n  watch: {\n    room: {\n      handler(newVal, ignoredOldVal) {\n        if (newVal) {\n          this.memberCount = newVal.getJoinedMemberCount();\n        } else {\n          this.memberCount = null;\n        }\n      },\n    },\n  },\n\n  methods: {\n    onEvent(event) {\n      if (event.getRoomId() !== this.roomId) {\n        return; // Not for this room\n      }\n      if (event.getType() == \"m.room.member\") {\n        this.updateMemberCount();\n      }\n    },\n\n    updateMemberCount() {\n      if (!this.room) {\n        this.memberCount = 0;\n      } else {\n        this.memberCount = this.room.getJoinedMemberCount();\n      }\n    },\n\n    showRoomInfo() {\n      this.$navigation.push({ name: \"RoomInfo\" });\n    },\n\n    leaveRoom() {\n      this.showLeaveConfirmation = true;\n    },\n\n    hideRoomList() {\n      this.showRoomList = false;\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatHeader.vue?vue&type=template&id=8efe43b4&\"\nimport script from \"./ChatHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatHeader.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VBtn,VCol,VContainer,VIcon,VImg,VRow})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport ClickOutside from 'vuetify/lib/directives/click-outside'\ninstallDirectives(component, {ClickOutside})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],ref:\"vrroot\",staticClass:\"voice-recorder\"},[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('div',{staticClass:\"recording-time\"},[_vm._v(\" \"+_vm._s(_vm.recordingTime)+\" \")])]),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"swipe-info\"},[_vm._v(\"<< Swipe to cancel\")])])],1)],1),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(_vm.willCancel)?_c('div',{staticClass:\"will-cancel\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\"}},[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"delete_outline\")])],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"swipe-info\"},[_vm._v(\"Release to cancel\")])])],1)],1)],1):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(_vm.recordingLocked)?_c('div',{staticClass:\"locked\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\"}},[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('div',{staticClass:\"recording-time\"},[_vm._v(\" \"+_vm._s(_vm.recordingTime)+\" \")])]),_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-btn',{staticClass:\"swipe-info\",attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelRecording($event)}}},[_vm._v(\"Cancel\")])],1),_c('v-col',{attrs:{\"cols\":\"3\"}},[_c('v-btn',{staticClass:\"swipe-info\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.stopRecording($event)}}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"stop\")])],1)],1)],1)],1)],1):_vm._e()]),(_vm.state == _vm.states.ERROR)?_c('div',{staticClass:\"error\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\"}},[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\"}},[_c('v-col',[_c('div',{staticClass:\"swipe-info\"},[_vm._v(\"Failed to record audio\")])])],1)],1)],1):_vm._e(),_c('VoiceRecorderLock',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == _vm.states.RECORDING),expression:\"state == states.RECORDING\"}],style:(_vm.lockButtonStyle),attrs:{\"isLocked\":_vm.recordingLocked}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"vr_lock\",class:{ 'voice-recorder-lock': true, 'locked': _vm.isLocked }},[_c('div',{class:{ 'thumb': true, 'locked': _vm.isLocked }})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <div\n    :class=\"{ 'voice-recorder-lock': true, 'locked': isLocked }\"\n    ref=\"vr_lock\"\n  >\n  <div :class=\"{ 'thumb': true, 'locked': isLocked }\" />\n  </div>\n</div>\n</template>\n<script>\n\nexport default {\n  name: \"VoiceRecorderLock\",\n  props: {\n    isLocked: {\n      type: Boolean,\n      default: function () {\n        return false;\n      },\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorderLock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorderLock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VoiceRecorderLock.vue?vue&type=template&id=47f4b479&\"\nimport script from \"./VoiceRecorderLock.vue?vue&type=script&lang=js&\"\nexport * from \"./VoiceRecorderLock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VoiceRecorderLock.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div v-show=\"show\" class=\"voice-recorder\" ref=\"vrroot\">\n    <v-container fluid fill-height>\n      <v-row align=\"center\">\n        <v-col cols=\"3\">\n          <div class=\"recording-time\">\n            {{ recordingTime }}\n          </div>\n        </v-col>\n        <v-col cols=\"6\">\n          <div class=\"swipe-info\">&lt;&lt; Swipe to cancel</div>\n        </v-col>\n      </v-row>\n    </v-container>\n    <transition name=\"fade\" mode=\"out-in\">\n      <div\n        v-if=\"willCancel\"\n        class=\"will-cancel\"\n        style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0\"\n      >\n        <v-container fluid fill-height>\n          <v-row align=\"center\">\n            <v-col cols=\"3\">\n              <v-icon color=\"white\">delete_outline</v-icon>\n            </v-col>\n            <v-col cols=\"6\">\n              <div class=\"swipe-info\">Release to cancel</div>\n            </v-col>\n          </v-row>\n        </v-container>\n      </div>\n    </transition>\n\n    <transition name=\"fade\" mode=\"out-in\">\n      <div\n        v-if=\"recordingLocked\"\n        class=\"locked\"\n        style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0\"\n      >\n        <v-container fluid fill-height>\n          <v-row align=\"center\">\n            <v-col cols=\"3\">\n              <div class=\"recording-time\">\n                {{ recordingTime }}\n              </div>\n            </v-col>\n            <v-col cols=\"3\">\n              <v-btn @click.stop=\"cancelRecording\" text class=\"swipe-info\"\n                >Cancel</v-btn\n              >\n            </v-col>\n            <v-col cols=\"3\">\n              <v-btn @click.stop=\"stopRecording\" icon class=\"swipe-info\"\n                ><v-icon color=\"white\">stop</v-icon></v-btn\n              >\n            </v-col>\n          </v-row>\n        </v-container>\n      </div>\n    </transition>\n\n    <div\n      v-if=\"state == states.ERROR\"\n      class=\"error\"\n      style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0\"\n    >\n      <v-container fluid fill-height>\n        <v-row align=\"center\">\n          <v-col>\n            <div class=\"swipe-info\">Failed to record audio</div>\n          </v-col>\n        </v-row>\n      </v-container>\n    </div>\n\n    <VoiceRecorderLock v-show=\"state == states.RECORDING\" :style=\"lockButtonStyle\" :isLocked=\"recordingLocked\" />\n  </div>\n</template>\n<script>\nconst State = {\n  INITIAL: \"intial\",\n  RECORDING: \"recording\",\n  RECORDED: \"recorded\",\n  ERROR: \"error\",\n};\nimport util from \"../plugins/utils\";\nimport VoiceRecorderLock from \"./VoiceRecorderLock\";\n\nexport default {\n  name: \"VoiceRecorder\",\n  components: {\n    VoiceRecorderLock,\n  },\n  props: {\n    show: {\n      type: Boolean,\n      default: function () {\n        return false;\n      },\n    },\n    micButtonRef: {\n      type: Object,\n      default: function () {\n        return null;\n      },\n    },\n  },\n  data() {\n    return {\n      willCancel: false,\n      /** Starting X coordinate of dragging operations */\n      startCoordinateX: null,\n      startCoordinateY: null,\n      states: State,\n      state: State.INITIAL,\n      recordStartedAt: null,\n      recordingTime: null,\n      recordTimer: null,\n      recordingLocked: false,\n    };\n  },\n  watch: {\n    show(val) {\n      if (val) {\n        // Add listeners\n        this.state = State.INITIAL;\n        document.addEventListener(\"mouseup\", this.mouseUp, false);\n        document.addEventListener(\"mousemove\", this.mouseMove, false);\n        document.addEventListener(\"touchend\", this.mouseUp, false);\n        document.addEventListener(\"touchmove\", this.mouseMove, false);\n        this.startRecording();\n      } else {\n        // Remove listeners\n        document.removeEventListener(\"mouseup\", this.mouseUp, false);\n        document.removeEventListener(\"mousemove\", this.mouseMove, false);\n        document.removeEventListener(\"touchend\", this.mouseUp, false);\n        document.removeEventListener(\"touchmove\", this.mouseMove, false);\n        this.startCoordinateX = null;\n        this.startCoordinateY = null;\n        this.willCancel = false;\n        this.startCoordinateX = null;\n        this.startCoordinateY = null;\n        this.recordingLocked = false;\n      }\n    },\n  },\n  computed: {\n    lockButtonStyle() {\n      /**\n        Calculate where to show the lock button (it should be at the same X-coord as the)\n        mic button (given as a reference!)\n      */\n      var left = 0;\n      var width = 20;\n      if (this.micButtonRef) {\n        var r = this.micButtonRef.$el.getBoundingClientRect();\n        left = r.left;\n        width = r.right - r.left;\n      }\n      const s =\n        \"position:absolute;top:-50px;left:\" +\n        left +\n        \"px;width:\" +\n        width +\n        \"px;height:40px\";\n      return s;\n    },\n  },\n  methods: {\n    close() {\n      this.stopRecordTimer();\n      this.$emit(\"close\");\n    },\n    mouseUp(ignoredEvent) {\n      document.removeEventListener(\"mouseup\", this.mouseUp, false);\n      document.removeEventListener(\"mousemove\", this.mouseMove, false);\n      document.removeEventListener(\"touchend\", this.mouseUp, false);\n      document.removeEventListener(\"touchmove\", this.mouseMove, false);\n      //document.body.style.cursor = \"\";\n      if (this.state == State.RECORDING) {\n        if (!this.recordingLocked) {\n          if (this.willCancel) {\n            this.cancelRecording();\n          } else {\n            this.stopRecording();\n          }\n        }\n      } else {\n        this.cancelRecording();\n      }\n    },\n    mouseMove(event) {\n      var x = event.clientX;\n      var y = event.clientY;\n      if (event.touches && event.touches.length > 0) {\n        x = event.touches[0].clientX;\n        y = event.touches[0].clientY;\n      }\n      if (!this.startCoordinateX) {\n        // First move, set it!\n        this.startCoordinateX = x;\n        this.startCoordinateY = y;\n      }\n      //document.body.style.cursor = \"ns-resize\";\n      this.willCancel = x < this.startCoordinateX - 30;\n      if (y < this.startCoordinateY - 30 && !this.willCancel) {\n        this.recordingLocked = true;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n    },\n\n    startRecording() {\n      const MicRecorder = require(\"mic-recorder-to-mp3\");\n      // Start recording. Browser will request permission to use your microphone.\n      this.recorder = new MicRecorder({\n        bitRate: 128,\n      });\n      this.recorder\n        .start()\n        .then(() => {\n          this.state = State.RECORDING;\n          this.recordStartedAt = Date.now();\n          this.startRecordTimer();\n        })\n        .catch((e) => {\n          console.error(e);\n          this.state = State.ERROR;\n        });\n    },\n    cancelRecording() {\n      this.state = State.INITIAL;\n      this.recorder.stop();\n      this.stopRecordTimer();\n      this.close();\n    },\n    stopRecording() {\n      this.state = State.RECORDED;\n      this.stopRecordTimer();\n      this.close();\n      this.recorder\n        .stop()\n        .getMp3()\n        .then(([buffer, blob]) => {\n          // do what ever you want with buffer and blob\n          // Example: Create a mp3 file and play\n          const file = new File(\n            buffer,\n            util.formatRecordStartTime(this.recordStartedAt) + \".mp3\",\n            {\n              type: blob.type,\n              lastModified: Date.now(),\n            }\n          );\n          //console.log(file);\n          this.$emit(\"file\", {file: file});\n          // const player = new Audio(URL.createObjectURL(file));\n          // player.play();\n        })\n        .catch((e) => {\n          alert(\"We could not retrieve your message\");\n          console.log(e);\n        });\n    },\n    startRecordTimer() {\n      this.stopRecordTimer();\n      this.recordTimer = setInterval(() => {\n        const now = Date.now();\n        this.recordingTime = util.formatRecordDuration(\n          now - this.recordStartedAt\n        );\n      }, 500);\n    },\n    stopRecordTimer() {\n      if (this.recordTimer) {\n        clearInterval(this.recordTimer);\n        this.recordTimer = null;\n        this.recordingTime = null;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>\n<style>\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VoiceRecorder.vue?vue&type=template&id=43640459&\"\nimport script from \"./VoiceRecorder.vue?vue&type=script&lang=js&\"\nexport * from \"./VoiceRecorder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VoiceRecorder.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./VoiceRecorder.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VIcon,VRow})\n","<template>\n  <div class=\"chat-root fill-height d-flex flex-column\" ma-0 pa-0>\n    <ChatHeader class=\"chat-header flex-grow-1 flex-shrink-1\" />\n    <div\n      class=\"chat-content flex-grow-1 flex-shrink-1\"\n      ref=\"chatContainer\"\n      style=\"overflow-x: hidden; overflow-y: auto\"\n      v-on:scroll=\"onScroll\"\n      @click.prevent=\"closeContextMenuIfOpen\"\n    >\n      <div ref=\"messageOperationsStrut\" class=\"message-operations-strut\">\n        <message-operations\n          :style=\"opStyle\"\n          v-on:close=\"showContextMenu = false\"\n          v-if=\"selectedEvent && showContextMenu\"\n          v-on:addreaction=\"addReaction\"\n          v-on:addreply=\"addReply(selectedEvent)\"\n          v-on:edit=\"edit(selectedEvent)\"\n          v-on:redact=\"redact(selectedEvent)\"\n          v-on:download=\"download(selectedEvent)\"\n          :event=\"selectedEvent\"\n          :incoming=\"selectedEvent.getSender() != $matrix.currentUserId\"\n        />\n      </div>\n\n      <!-- Handle resizes, e.g. when soft keyboard is shown/hidden -->\n      <resize-observer\n        ref=\"chatContainerResizer\"\n        @notify=\"handleChatContainerResize\"\n      />\n\n      <div\n        v-for=\"(event, index) in events\"\n        :key=\"event.getId()\"\n        :eventId=\"event.getId()\"\n      >\n        <!-- DAY Marker, shown for every new day in the timeline -->\n        <div\n          v-if=\"showDayMarkerBeforeEvent(event)\"\n          class=\"day-marker\"\n          :title=\"dayForEvent(event)\"\n        />\n\n        <div\n          v-if=\"\n            !event.isRelation() && !event.isRedacted() && !event.isRedaction()\n          \"\n          :ref=\"event.getId()\"\n        >\n          <div\n            style=\"position: relative; user-select: none\"\n            v-on:touchstart=\"\n              (e) => {\n                touchStart(e, event);\n              }\n            \"\n            v-on:touchend=\"touchEnd\"\n            v-on:touchcancel=\"touchCancel\"\n            v-on:touchmove=\"touchMove\"\n          >\n            <component\n              :is=\"componentForEvent(event)\"\n              :room=\"room\"\n              :event=\"event\"\n              :nextEvent=\"events[index + 1]\"\n              :reactions=\"\n                timelineWindow._timelineSet.getRelationsForEvent(\n                  event.getId(),\n                  'm.annotation',\n                  'm.reaction'\n                )\n              \"\n              :timelineSet=\"timelineWindow._timelineSet\"\n              v-on:send-quick-reaction=\"sendQuickReaction\"\n              v-on:context-menu=\"showContextMenuForEvent($event)\"\n              v-on:own-avatar-clicked=\"viewProfile\"\n            />\n            <!-- <div>EventID: {{ event.getId() }}</div> -->\n            <div\n              v-if=\"event.getId() == readMarker && index < events.length - 1\"\n              class=\"read-marker\"\n              title=\"Unread messages\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Input area -->\n    <v-container v-if=\"room\" fluid class=\"input-area-outer\">\n      <!-- \"Scroll to end\"-button -->\n      <v-btn\n        class=\"scroll-to-end\"\n        v-show=\"showScrollToEnd\"\n        fab\n        small\n        elevation=\"0\"\n        color=\"black\"\n        @click.stop=\"smoothScrollToEnd\"\n      >\n        <v-icon color=\"white\">arrow_downward</v-icon>\n      </v-btn>\n\n      <v-row class=\"ma-0 pa-0\">\n        <div v-if=\"replyToEvent\">\n          REPLYING TO EVENT: {{ replyToEvent.getContent().body }}\n        </div>\n\n        <!-- CONTACT IS TYPING -->\n        <div class=\"typing\">\n          {{ typingMembersString }}\n        </div>\n      </v-row>\n      <v-row class=\"input-area-inner align-center\">\n        <v-col class=\"flex-grow-1 flex-shrink-1 ma-0 pa-0\">\n          <v-textarea\n            height=\"undefined\"\n            ref=\"messageInput\"\n            full-width\n            auto-grow\n            rows=\"1\"\n            v-model=\"currentInput\"\n            no-resize\n            class=\"input-area-text\"\n            placeholder=\"Your message...\"\n            hide-details\n            background-color=\"white\"\n            v-on:keydown.enter.prevent=\"\n              () => {\n                sendMessage();\n              }\n            \"\n          />\n        </v-col>\n\n        <v-col\n          class=\"input-area-button text-center flex-grow-0 flex-shrink-1\"\n          v-if=\"editedEvent || replyToEvent\"\n        >\n          <v-btn\n            fab\n            small\n            elevation=\"0\"\n            color=\"black\"\n            @click.stop=\"cancelEditReply\"\n          >\n            <v-icon color=\"white\">cancel</v-icon>\n          </v-btn>\n        </v-col>\n\n        <v-col\n          class=\"input-area-button text-center flex-grow-0 flex-shrink-1\"\n          v-if=\"!currentInput || currentInput.length == 0\"\n        >\n          <v-btn\n            ref=\"mic_button\"\n            fab\n            small\n            elevation=\"0\"\n            color=\"transparent\"\n            v-blur\n            style=\"z-index: 10\"\n            @touchstart.native.stop=\"startRecording\"\n            @mousedown.native.stop=\"startRecording\"\n          >\n            <v-icon :color=\"showRecorder ? 'white' : 'black'\">mic</v-icon>\n          </v-btn>\n        </v-col>\n\n        <v-col\n          class=\"input-area-button text-center flex-grow-0 flex-shrink-1\"\n          v-else\n        >\n          <v-btn\n            fab\n            small\n            elevation=\"0\"\n            color=\"black\"\n            @click.stop=\"sendMessage\"\n            :disabled=\"sendButtonDisabled\"\n          >\n            <v-icon color=\"white\">{{\n              editedEvent ? \"save\" : \"arrow_upward\"\n            }}</v-icon>\n          </v-btn>\n        </v-col>\n\n        <v-col class=\"input-area-button text-center flex-grow-0 flex-shrink-1\">\n          <label icon flat ref=\"attachmentLabel\">\n            <v-btn\n              icon\n              large\n              color=\"black\"\n              @click=\"showAttachmentPicker\"\n              :disabled=\"attachButtonDisabled\"\n            >\n              <v-icon x-large>add_circle_outline</v-icon>\n            </v-btn>\n            <input\n              ref=\"attachment\"\n              type=\"file\"\n              name=\"attachment\"\n              @change=\"handlePickedAttachment($event)\"\n              accept=\"image/*|audio/*|video/*|application/pdf\"\n              style=\"display: none\"\n            />\n          </label>\n        </v-col>\n      </v-row>\n      <VoiceRecorder\n        :micButtonRef=\"$refs.mic_button\"\n        :show=\"showRecorder\"\n        v-on:close=\"showRecorder = false\"\n        v-on:file=\"onVoiceRecording\"\n      />\n    </v-container>\n\n    <div v-if=\"currentImageInput\">\n      <v-dialog v-model=\"currentImageInput\" class=\"ma-0 pa-0\" width=\"50%\">\n        <v-card class=\"ma-0 pa-0\">\n          <v-card-text class=\"ma-0 pa-0\">\n            <v-img\n              :aspect-ratio=\"1\"\n              :src=\"currentImageInput\"\n              contain\n              style=\"max-height: 50vh\"\n            />\n            <div v-if=\"currentSendError\">{{ currentSendError }}</div>\n            <div v-else>{{ currentSendProgress }}</div>\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"cancelSendAttachment\"\n              >Cancel</v-btn\n            >\n            <v-btn\n              color=\"primary\"\n              text\n              @click=\"sendAttachment\"\n              :disabled=\"currentSendOperation != null\"\n              >Send</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n\n    <div v-if=\"showEmojiPicker\">\n      <v-dialog v-model=\"showEmojiPicker\" class=\"ma-0 pa-0\">\n        <VEmojiPicker style=\"width: 100%\" @select=\"emojiSelected\" />\n      </v-dialog>\n    </div>\n\n    <!-- \"NOT ALLOWED FOR GUEST ACCOUNTS\" dialog -->\n    <v-dialog v-model=\"showNotAllowedForGuests\" class=\"ma-0 pa-0\" width=\"50%\">\n      <v-card>\n        <v-card-title>You are logged in as a guest</v-card-title>\n        <v-card-text>\n          <div>Unfortunately guests are not allowed to upload files.</div>\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"showNotAllowedForGuests = false\"\n            >Ok</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- Loading indicator -->\n    <v-container\n      fluid\n      fill-height\n      style=\"position: absolute\"\n      v-if=\"!initialLoadDone\"\n    >\n      <v-row align=\"center\" justify=\"center\">\n        <v-col class=\"text-center\">\n          <v-progress-circular\n            indeterminate\n            color=\"primary\"\n          ></v-progress-circular>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport { TimelineWindow, EventTimeline } from \"matrix-js-sdk\";\nimport MessageIncomingText from \"./messages/MessageIncomingText\";\nimport MessageIncomingImage from \"./messages/MessageIncomingImage.vue\";\nimport MessageIncomingAudio from \"./messages/MessageIncomingAudio.vue\";\nimport MessageOutgoingText from \"./messages/MessageOutgoingText\";\nimport MessageOutgoingImage from \"./messages/MessageOutgoingImage.vue\";\nimport MessageOutgoingAudio from \"./messages/MessageOutgoingAudio.vue\";\nimport ContactJoin from \"./messages/ContactJoin.vue\";\nimport ContactLeave from \"./messages/ContactLeave.vue\";\nimport ContactInvited from \"./messages/ContactInvited.vue\";\nimport ContactChanged from \"./messages/ContactChanged.vue\";\nimport RoomNameChanged from \"./messages/RoomNameChanged.vue\";\nimport RoomTopicChanged from \"./messages/RoomTopicChanged.vue\";\nimport RoomAvatarChanged from \"./messages/RoomAvatarChanged.vue\";\nimport RoomHistoryVisibility from \"./messages/RoomHistoryVisibility.vue\";\nimport DebugEvent from \"./messages/DebugEvent.vue\";\nimport util from \"../plugins/utils\";\nimport MessageOperations from \"./messages/MessageOperations.vue\";\nimport ChatHeader from \"./ChatHeader\";\nimport VoiceRecorder from \"./VoiceRecorder\";\n\nconst READ_RECEIPT_TIMEOUT = 5000; /* How long a message must have been visible before the read marker is updated */\n\n// from https://kirbysayshi.com/2013/08/19/maintaining-scroll-position-knockoutjs-list.html\nfunction ScrollPosition(node) {\n  this.node = node;\n  this.previousScrollHeightMinusTop = 0;\n  this.previousScrollTop = 0;\n  this.readyFor = \"up\";\n}\n\nScrollPosition.prototype.restore = function () {\n  if (this.readyFor === \"up\") {\n    this.node.scrollTop =\n      this.node.scrollHeight - this.previousScrollHeightMinusTop;\n  } else {\n    this.node.scrollTop = this.previousScrollTop;\n  }\n};\n\nScrollPosition.prototype.prepareFor = function (direction) {\n  this.readyFor = direction || \"up\";\n  if (this.readyFor === \"up\") {\n    this.previousScrollHeightMinusTop =\n      this.node.scrollHeight - this.node.scrollTop;\n  } else {\n    this.previousScrollTop = this.node.scrollTop;\n  }\n};\n\nexport default {\n  name: \"Chat\",\n\n  components: {\n    ChatHeader,\n    MessageIncomingText,\n    MessageIncomingImage,\n    MessageIncomingAudio,\n    MessageOutgoingText,\n    MessageOutgoingImage,\n    MessageOutgoingAudio,\n    ContactJoin,\n    ContactLeave,\n    ContactInvited,\n    ContactChanged,\n    RoomNameChanged,\n    RoomTopicChanged,\n    RoomAvatarChanged,\n    RoomHistoryVisibility,\n    DebugEvent,\n    MessageOperations,\n    VoiceRecorder,\n  },\n\n  data() {\n    return {\n      events: [],\n      currentInput: \"\",\n      typingMembers: [],\n      timelineWindow: null,\n      scrollPosition: null,\n      currentImageInput: null,\n      currentImageInputPath: null,\n      currentSendOperation: null,\n      currentSendProgress: null,\n      currentSendError: null,\n      showEmojiPicker: false,\n      selectedEvent: null,\n      editedEvent: null,\n      replyToEvent: null,\n      showContextMenu: false,\n      showContextMenuAnchor: null,\n      initialLoadDone: false,\n      showRecorder: false,\n\n      /**\n       * Current chat container size. We need to keep track of this so that if and when\n       * a soft keyboard is shown/hidden we can restore the scroll position correctly.\n       * If we don't, the keyboard will simply overflow the message we are answering to etc.\n       */\n      chatContainerSize: 0,\n\n      /**\n       * True if we should show the \"scroll to end\" marker in the chat. For now at least, we use a simple\n       * method here, basically just \"if we can scroll, show it\".\n       */\n      showScrollToEnd: false,\n\n      /** Shows a dialog with info about an operation being disallowed for guests */\n      showNotAllowedForGuests: false,\n\n      /** A timer for read receipts. */\n      rrTimer: null,\n\n      /** Last event we sent a Read Receipt/Read Marker for */\n      lastRR: null,\n    };\n  },\n\n  mounted() {\n    const container = this.$refs.chatContainer;\n    this.scrollPosition = new ScrollPosition(container);\n    this.chatContainerSize = this.$refs.chatContainerResizer.$el.clientHeight;\n  },\n\n  beforeDestroy() {\n    this.stopRRTimer();\n  },\n\n  destroyed() {\n    this.$matrix.off(\"Room.timeline\", this.onEvent);\n    this.$matrix.off(\"RoomMember.typing\", this.onUserTyping);\n  },\n\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    room() {\n      return this.$matrix.currentRoom;\n    },\n    roomId() {\n      if (!this.$matrix.ready && this.currentUser) {\n        // If we have a user already, wait for ready state. If not, we\n        // dont want to return here, because we want to redirect to \"join\".\n        return null; // Not ready yet...\n      }\n      if (this.room) {\n        return this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n    roomAliasOrId() {\n      if (this.room) {\n        return this.room.getCanonicalAlias() || this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n    readMarker() {\n      if (this.lastRR) {\n        // If we have sent a RR, use that as read marker (so we don't have to wait for server round trip)\n        return this.lastRR.getId();\n      }\n      return (\n        this.fullyReadMarker ||\n        this.room.getEventReadUpTo(this.$matrix.currentUserId, false)\n      );\n    },\n    fullyReadMarker() {\n      const readEvent = this.room.getAccountData(\"m.fully_read\");\n      if (readEvent) {\n        return readEvent.getContent().event_id;\n      }\n      return null;\n    },\n    attachButtonDisabled() {\n      return (\n        this.editedEvent != null ||\n        this.replyToEvent != null ||\n        this.currentInput.length > 0\n      );\n    },\n    sendButtonDisabled() {\n      return this.currentInput.length == 0;\n    },\n    typingMembersString() {\n      const count = this.typingMembers.length;\n      if (count > 1) {\n        return \"\" + count + \" members are typing\";\n      } else if (count > 0) {\n        return this.typingMembers[0].name + \" is typing\";\n      } else {\n        return \"\";\n      }\n    },\n    opStyle() {\n      // Calculate where to show the context menu.\n      //\n      const ref = this.selectedEvent && this.$refs[this.selectedEvent.getId()];\n      var top = 0;\n      var left = 0;\n      if (ref && ref[0]) {\n        if (this.showContextMenuAnchor) {\n          var rectAnchor = this.showContextMenuAnchor.getBoundingClientRect();\n          var rectChat = this.$refs.messageOperationsStrut.getBoundingClientRect();\n          top = rectAnchor.top - rectChat.top;\n          left = rectAnchor.left - rectChat.left;\n        }\n      }\n      return \"top:\" + top + \"px;left:\" + left + \"px\";\n    },\n  },\n\n  watch: {\n    roomId: {\n      immediate: true,\n      handler(value, oldValue) {\n        if (value && value == oldValue) {\n          return; // No change.\n        }\n        console.log(\n          \"Chat: Current room changed to \" + (value ? value : \"null\")\n        );\n\n        // Clear old events\n        this.$matrix.off(\"Room.timeline\", this.onEvent);\n        this.$matrix.off(\"RoomMember.typing\", this.onUserTyping);\n\n        this.events = [];\n        this.timelineWindow = null;\n        this.typingMembers = [];\n        this.initialLoadDone = false;\n\n        // Stop RR timer\n        this.stopRRTimer();\n        this.lastRR = null;\n\n        if (!this.room) {\n          // Public room?\n          if (this.roomId && this.roomId.startsWith(\"#\")) {\n            this.onRoomNotJoined();\n          } else if (this.roomId) {\n            this.onRoomNotJoined(); // Private room we are not joined to. What to do? We redirect to join\n            // screen, maybe the user has an invite already?\n          }\n          this.initialLoadDone = true;\n          return; // no room\n        }\n\n        // Joined?\n        if (this.room.hasMembershipState(this.currentUser.user_id, \"join\")) {\n          // Yes, load everything\n          this.onRoomJoined(this.readMarker);\n        } else {\n          this.onRoomNotJoined();\n        }\n      },\n    },\n  },\n\n  methods: {\n    onRoomJoined(initialEventId) {\n      // Listen to events\n      this.$matrix.on(\"Room.timeline\", this.onEvent);\n      this.$matrix.on(\"RoomMember.typing\", this.onUserTyping);\n\n      console.log(\"Read up to \" + initialEventId);\n\n      //initialEventId = null;\n\n      this.timelineWindow = new TimelineWindow(\n        this.$matrix.matrixClient,\n        this.room.getUnfilteredTimelineSet(),\n        {}\n      );\n      const self = this;\n      this.timelineWindow\n        .load(initialEventId, 20)\n        .then(() => {\n          console.log(\"This is\", self);\n          self.events = self.timelineWindow.getEvents();\n\n          const getMoreIfNeeded = function _getMoreIfNeeded() {\n            const container = self.$refs.chatContainer;\n            if (\n              container.scrollHeight <= container.clientHeight &&\n              self.timelineWindow &&\n              self.timelineWindow.canPaginate(EventTimeline.BACKWARDS)\n            ) {\n              return self.timelineWindow\n                .paginate(EventTimeline.BACKWARDS, 10, true, 5)\n                .then((success) => {\n                  self.events = self.timelineWindow.getEvents();\n                  if (success) {\n                    return _getMoreIfNeeded.call(self);\n                  } else {\n                    return Promise.reject(\"Failed to paginate\");\n                  }\n                });\n            } else {\n              return Promise.resolve(\"Done\");\n            }\n          }.bind(self);\n\n          getMoreIfNeeded()\n            .catch((err) => {\n              console.log(\"ERROR \" + err);\n            })\n            .finally(() => {\n              self.initialLoadDone = true;\n              if (initialEventId) {\n                self.scrollToEvent(initialEventId);\n              }\n              self.restartRRTimer();\n            });\n        })\n        .catch((err) => {\n          console.log(\"Error fetching events!\", err, this);\n          if (err.errcode == \"M_UNKNOWN\" && initialEventId) {\n            // Try again without initial event!\n            this.onRoomJoined(null);\n          } else {\n            // Error. Done loading.\n            this.events = this.timelineWindow.getEvents();\n            this.initialLoadDone = true;\n          }\n        });\n    },\n\n    onRoomNotJoined() {\n      this.$navigation.push(\n        {\n          name: \"Join\",\n          params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n        },\n        0\n      );\n    },\n\n    touchX(event) {\n      if (event.type.indexOf(\"mouse\") !== -1) {\n        return event.clientX;\n      }\n      return event.touches[0].clientX;\n    },\n    touchY(event) {\n      if (event.type.indexOf(\"mouse\") !== -1) {\n        return event.clientY;\n      }\n      return event.touches[0].clientY;\n    },\n    touchStart(e, event) {\n      if (this.selectedEvent != event) {\n        this.showContextMenu = false;\n      }\n      this.selectedEvent = event;\n      this.touchStartX = this.touchX(e);\n      this.touchStartY = this.touchY(e);\n      this.touchTimer = setTimeout(this.touchTimerElapsed, 500);\n    },\n    touchEnd() {\n      this.touchTimer && clearTimeout(this.touchTimer);\n    },\n    touchCancel() {\n      this.touchTimer && clearTimeout(this.touchTimer);\n    },\n    touchMove(e) {\n      this.touchCurrentX = this.touchX(e);\n      this.touchCurrentY = this.touchY(e);\n      var tapTolerance = 4;\n      var touchMoved =\n        Math.abs(this.touchStartX - this.touchCurrentX) > tapTolerance ||\n        Math.abs(this.touchStartY - this.touchCurrentY) > tapTolerance;\n      if (touchMoved) {\n        this.touchTimer && clearTimeout(this.touchTimer);\n      }\n    },\n\n    /**\n     * Triggered when out \"long tap\" timer hits.\n     */\n    touchTimerElapsed() {\n      this.showContextMenu = true;\n    },\n\n    /**\n     * If chat container is shrunk (probably because soft keyboard is shown) adjust\n     * the scroll position so that e.g. if we were looking at the last message when\n     * moving focus to the input field, we would still see the last message. Otherwise\n     * if would be hidden behind the keyboard.\n     */\n    handleChatContainerResize({ ignoredWidth, height }) {\n      const delta = height - this.chatContainerSize;\n      this.chatContainerSize = height;\n      const container = this.$refs.chatContainer;\n      if (delta < 0) {\n        container.scrollTop -= delta;\n      }\n    },\n\n    componentForEvent(event) {\n      switch (event.getType()) {\n        case \"m.room.member\":\n          if (event.getContent().membership == \"join\") {\n            if (event.getPrevContent() && event.getPrevContent().membership == \"join\") {\n              // We we already joined, so this must be a display name and/or avatar update!\n              return ContactChanged;\n            } else {\n              return ContactJoin;\n            }\n          } else if (event.getContent().membership == \"leave\") {\n            return ContactLeave;\n          } else if (event.getContent().membership == \"invite\") {\n            return ContactInvited;\n          }\n          break;\n\n        case \"m.room.message\":\n          if (event.getSender() != this.$matrix.currentUserId) {\n            if (event.getContent().msgtype == \"m.image\") {\n              return MessageIncomingImage;\n            } else if (event.getContent().msgtype == \"m.audio\") {\n              return MessageIncomingAudio;\n            }\n            return MessageIncomingText;\n          } else {\n            if (event.getContent().msgtype == \"m.image\") {\n              return MessageOutgoingImage;\n            } else if (event.getContent().msgtype == \"m.audio\") {\n              return MessageOutgoingAudio;\n            }\n            return MessageOutgoingText;\n          }\n\n        case \"m.room.name\":\n          return RoomNameChanged;\n\n        case \"m.room.topic\":\n          return RoomTopicChanged;\n\n        case \"m.room.avatar\":\n          return RoomAvatarChanged;\n\n        case \"m.room.history_visibility\":\n          return RoomHistoryVisibility;\n      }\n      return DebugEvent;\n    },\n\n    paginateBackIfNeeded() {\n      this.$nextTick(() => {\n        const container = this.$refs.chatContainer;\n        if (container.scrollHeight <= container.clientHeight) {\n          this.handleScrolledToTop();\n        }\n      });\n    },\n    onScroll(ignoredevent) {\n      const container = this.$refs.chatContainer;\n      if (!container) {\n        return;\n      }\n      if (container.scrollTop == 0) {\n        // Scrolled to top\n        this.handleScrolledToTop();\n      } else if (\n        container.scrollHeight - container.scrollTop.toFixed(0) ==\n        container.clientHeight\n      ) {\n        this.handleScrolledToBottom(false);\n      }\n      this.showScrollToEnd =\n        container.scrollHeight - container.scrollTop.toFixed(0) >\n        container.clientHeight;\n\n      this.restartRRTimer();\n    },\n    onEvent(event) {\n      console.log(\"OnEvent\", JSON.stringify(event));\n      if (event.getRoomId() !== this.roomId) {\n        return; // Not for this room\n      }\n\n      if (this.initialLoadDone) {\n        this.paginateBackIfNeeded();\n      }\n\n      // If we are at bottom, scroll to see new events...\n      const container = this.$refs.chatContainer;\n      var scrollToSeeNew = event.getSender() == this.$matrix.currentUserId; // When we sent, scroll\n      if (\n        container.scrollHeight - container.scrollTop.toFixed(0) ==\n        container.clientHeight\n      ) {\n        scrollToSeeNew = true;\n      }\n      if (this.initialLoadDone && event.forwardLooking && !event.isRelation()) {\n        this.handleScrolledToBottom(scrollToSeeNew);\n      }\n    },\n\n    onUserTyping(event, member) {\n      if (member.roomId !== this.roomId) {\n        return; // Not for this room\n      }\n      if (member.typing) {\n        if (!this.typingMembers.includes(member)) {\n          this.typingMembers.push(member);\n        }\n      } else {\n        const index = this.typingMembers.indexOf(member);\n        if (index > -1) {\n          this.typingMembers.splice(index, 1);\n        }\n      }\n      console.log(\"Typing: \", this.typingMembers);\n    },\n\n    sendMessage() {\n      if (this.currentInput.length > 0) {\n        util\n          .sendTextMessage(\n            this.$matrix.matrixClient,\n            this.roomId,\n            this.currentInput,\n            this.editedEvent,\n            this.replyToEvent\n          )\n          .then(() => {\n            console.log(\"Sent message\");\n          })\n          .catch((err) => {\n            console.log(\"Failed to send:\", err);\n          });\n        this.currentInput = \"\";\n        this.editedEvent = null; //TODO - Is this a good place to reset this?\n        this.replyToEvent = null;\n      }\n    },\n\n    /**\n     * Show attachment picker to select file\n     */\n    showAttachmentPicker() {\n      // Guests not currently allowed to send attachments (=actually upload them)\n      // See https://matrix.org/docs/spec/client_server/r0.2.0#guest-access\n      // if (this.$matrix.currentUser && this.$matrix.currentUser.is_guest) {\n      //   this.showNotAllowedForGuests = true;\n      //   return;\n      // }\n      this.$refs.attachment.click();\n    },\n\n    /**\n     * Handle picked attachment\n     */\n    handlePickedAttachment(event) {\n      if (event.target.files && event.target.files[0]) {\n        var reader = new FileReader();\n        reader.onload = (e) => {\n          this.currentImageInput = e.target.result;\n          this.currentImageInputPath = event.target.files[0];\n        };\n        reader.readAsDataURL(event.target.files[0]);\n      }\n    },\n\n    onUploadProgress(p) {\n      if (p.total) {\n        this.currentSendProgress =\n          \"Uploaded \" + (p.loaded || 0) + \" of \" + p.total;\n      } else {\n        this.currentSendProgress = \"Uploaded \" + (p.loaded || 0);\n      }\n    },\n\n    sendAttachment() {\n      if (this.currentImageInputPath) {\n        this.currentSendProgress = 0;\n        this.currentSendOperation = util.sendImage(\n          this.$matrix.matrixClient,\n          this.roomId,\n          this.currentImageInputPath,\n          this.onUploadProgress\n        );\n        this.currentSendOperation\n          .then(() => {\n            this.currentSendOperation = null;\n            this.currentImageInput = null;\n            this.currentSendProgress = 0;\n          })\n          .catch((err) => {\n            this.currentSendError = err.toLocaleString();\n            this.currentSendOperation = null;\n            this.currentSendProgress = 0;\n          });\n      }\n    },\n\n    cancelSendAttachment() {\n      if (this.currentSendOperation) {\n        this.currentSendOperation.reject(\"Canceled\");\n      }\n      this.currentSendOperation = null;\n      this.currentImageInput = null;\n      this.currentSendProgress = 0;\n      this.currentSendError = null;\n    },\n\n    handleScrolledToTop() {\n      console.log(\"@top\");\n      if (\n        this.timelineWindow &&\n        this.timelineWindow.canPaginate(EventTimeline.BACKWARDS)\n      ) {\n        this.timelineWindow\n          .paginate(EventTimeline.BACKWARDS, 10, true)\n          .then((success) => {\n            if (success) {\n              this.scrollPosition.prepareFor(\"up\");\n              this.events = this.timelineWindow.getEvents();\n              this.$nextTick(() => {\n                // restore scroll position!\n                console.log(\"Restore scroll!\");\n                this.scrollPosition.restore();\n              });\n            }\n          });\n      }\n    },\n\n    handleScrolledToBottom(scrollToEnd) {\n      console.log(\"@bottom\");\n      if (\n        this.timelineWindow &&\n        this.timelineWindow.canPaginate(EventTimeline.FORWARDS)\n      ) {\n        this.timelineWindow\n          .paginate(EventTimeline.FORWARDS, 10, true)\n          .then((success) => {\n            if (success) {\n              this.scrollPosition.prepareFor(\"down\");\n              this.events = this.timelineWindow.getEvents();\n              this.$nextTick(() => {\n                // restore scroll position!\n                console.log(\"Restore scroll!\");\n                this.scrollPosition.restore();\n                if (scrollToEnd) {\n                  this.smoothScrollToEnd();\n                }\n              });\n            }\n          });\n      }\n    },\n\n    /**\n     * Scroll so that the given event is at the middle of the chat view (if more events) or else at the bottom.\n     */\n    scrollToEvent(eventId) {\n      const container = this.$refs.chatContainer;\n      const ref = this.$refs[eventId];\n      if (container && ref) {\n        const targetY = container.clientHeight / 2;\n        const sourceY = ref[0].offsetTop;\n        container.scrollTo(0, sourceY - targetY);\n      }\n    },\n\n    smoothScrollToEnd() {\n      this.$nextTick(function () {\n        const container = this.$refs.chatContainer;\n        if (container.children.length > 0) {\n          const lastChild = container.children[container.children.length - 1];\n          console.log(\"Scroll into view\", lastChild);\n          window.requestAnimationFrame(() => {\n            lastChild.scrollIntoView({\n              behavior: \"smooth\",\n              block: \"start\",\n              inline: \"nearest\",\n            });\n          });\n        }\n      });\n    },\n\n    addReaction(e) {\n      const event = e.event;\n      // Store the event we are reacting to, so that we know where to\n      // send when the picker closes.\n      this.selectedEvent = event;\n      this.showEmojiPicker = true;\n    },\n\n    addReply(event) {\n      this.replyToEvent = event;\n      this.$refs.messageInput.focus();\n    },\n\n    edit(event) {\n      this.editedEvent = event;\n      this.currentInput = event.getContent().body;\n      this.$refs.messageInput.focus();\n    },\n\n    redact(event) {\n      this.$matrix.matrixClient\n        .redactEvent(event.getRoomId(), event.getId())\n        .then(() => {\n          console.log(\"Message redacted\");\n        })\n        .catch((err) => {\n          console.log(\"Redaction failed: \", err);\n        });\n    },\n\n    download(event) {\n      util\n        .getAttachment(this.$matrix.matrixClient, event)\n        .then((url) => {\n          const link = document.createElement(\"a\");\n          link.href = url;\n          link.target = \"_blank\";\n          link.download = event.getContent().body || \"Download\";\n          link.click();\n          URL.revokeObjectURL(url);\n        })\n        .catch((err) => {\n          console.log(\"Failed to fetch attachment: \", err);\n        });\n    },\n\n    cancelEditReply() {\n      this.currentInput = \"\";\n      this.editedEvent = null;\n      this.replyToEvent = null;\n    },\n\n    emojiSelected(e) {\n      this.showEmojiPicker = false;\n      if (this.selectedEvent) {\n        const event = this.selectedEvent;\n        this.selectedEvent = null;\n        this.sendQuickReaction({ reaction: e.data, event: event });\n      }\n    },\n\n    sendQuickReaction(e) {\n      util\n        .sendQuickReaction(\n          this.$matrix.matrixClient,\n          this.roomId,\n          e.reaction,\n          e.event\n        )\n        .then(() => {\n          console.log(\"Quick reaction message\");\n        })\n        .catch((err) => {\n          console.log(\"Failed to send quick reaction:\", err);\n        });\n    },\n\n    showContextMenuForEvent(e) {\n      const event = e.event;\n      const ref = this.$refs[event.getId()];\n      if (ref) {\n        console.log(\"Got the ref\", ref);\n      }\n      this.selectedEvent = event;\n      this.showContextMenu = true;\n      this.showContextMenuAnchor = e.anchor;\n    },\n\n    viewProfile() {\n      this.$navigation.push({ name: \"Profile\" }, 1);\n    },\n\n    closeContextMenuIfOpen(e) {\n      if (this.showContextMenu) {\n        this.showContextMenu = false;\n        e.preventDefault();\n      }\n    },\n\n    /** Stop Read Receipt timer */\n    stopRRTimer() {\n      if (this.rrTimer) {\n        clearTimeout(this.rrTimer);\n        this.rrTimer = null;\n      }\n    },\n\n    /**\n     * Start/restart the timer to Read Receipts.\n     */\n    restartRRTimer() {\n      this.stopRRTimer();\n      this.rrTimer = setTimeout(this.rrTimerElapsed, READ_RECEIPT_TIMEOUT);\n    },\n\n    rrTimerElapsed() {\n      this.rrTimer = null;\n\n      const container = this.$refs.chatContainer;\n      const elFirst = util.getFirstVisibleElement(container);\n      const elLast = util.getLastVisibleElement(container);\n      if (elFirst && elLast) {\n        const eventIdFirst = elFirst.getAttribute(\"eventId\");\n        const eventIdLast = elLast.getAttribute(\"eventId\");\n        if (eventIdLast && this.room) {\n          var event = this.room.findEventById(eventIdLast);\n          const index = this.events.indexOf(event);\n\n          // Walk backwards through visible events to the first one that is incoming\n          //\n          var lastTimestamp = 0;\n          if (this.lastRR) {\n            lastTimestamp = this.lastRR.getTs();\n          }\n\n          for (var i = index; i >= 0; i--) {\n            event = this.events[i];\n            if (event == this.lastRR || event.getTs() <= lastTimestamp) {\n              // Already sent this or too old...\n              break;\n            }\n            // Make sure it's not a local echo event...\n            if (!event.getId().startsWith(\"~\")) {\n              // Send read receipt\n              this.$matrix.matrixClient\n                .sendReadReceipt(event)\n                .then(() => {\n                  this.$matrix.matrixClient.setRoomReadMarkers(\n                    this.room.roomId,\n                    event.getId()\n                  );\n                })\n                .then(() => {\n                  console.log(\"RR sent for event: \" + event.getId());\n                  this.lastRR = event;\n                })\n                .catch((err) => {\n                  console.log(\"Failed to update read marker: \", err);\n                })\n                .finally(() => {\n                  this.restartRRTimer();\n                });\n              return; // Bail out here\n            }\n\n            // Stop iterating at first visible\n            if (event.getId() == eventIdFirst) {\n              break;\n            }\n          }\n        }\n      }\n      this.restartRRTimer();\n    },\n\n    showDayMarkerBeforeEvent(event) {\n      const idx = this.events.indexOf(event);\n      if (idx <= 0) {\n        return true;\n      }\n      const previousEvent = this.events[idx - 1];\n      return util.dayDiff(previousEvent.getTs(), event.getTs()) > 0;\n    },\n\n    dayForEvent(event) {\n      return util.formatDay(event.getTs());\n    },\n\n    startRecording() {\n      this.showRecorder = true;\n    },\n\n    onVoiceRecording(event) {\n      util.sendImage(\n        this.$matrix.matrixClient,\n        this.roomId,\n        event.file,\n        undefined\n      );\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=06d2df5e&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VDivider,VIcon,VImg,VProgressCircular,VRow,VSpacer,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"join-root\"},[(!_vm.waitingForInfo && !_vm.waitingForMembership)?_c('div',{staticClass:\"text-center\"},[(!_vm.currentUser)?_c('v-btn',{staticClass:\"btn-login\",attrs:{\"text\":\"\",\"small\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleLogin($event)}}},[_vm._v(\"Login\")]):_vm._e(),_c('v-avatar',{staticClass:\"join-avatar\"},[(_vm.roomAvatar)?_c('v-img',{attrs:{\"src\":_vm.roomAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.roomName.substring(0, 1).toUpperCase()))])],1),_c('div',{staticClass:\"join-title\"},[_vm._v(\"Welcome to \"+_vm._s(_vm.roomName))]),_c('div',{staticClass:\"join-message\"}),_c('v-container',{staticClass:\"join-user-info\"},[(_vm.canEditProfile)?_c('v-row',[_c('v-col',{staticClass:\"flex-grow-0 flex-shrink-0\"},[_c('v-avatar',{on:{\"click\":_vm.showAvatarPickerList}},[(_vm.profile)?_c('v-img',{attrs:{\"src\":_vm.profile.image}}):_vm._e()],1)],1),_c('v-col',{staticClass:\"flex-shrink-1 flex-grow-1\"},[_c('v-select',{ref:\"avatar\",attrs:{\"items\":_vm.availableAvatars,\"cache-items\":\"\",\"label\":\"User name\",\"outlined\":\"\",\"dense\":\"\",\"value\":_vm.availableAvatars[0],\"single-line\":\"\"},on:{\"change\":_vm.selectAvatar},scopedSlots:_vm._u([{key:\"selection\",fn:function(){return [_c('v-text-field',{attrs:{\"background-color\":\"transparent\",\"solo\":\"\",\"flat\":\"\",\"hide-details\":\"\"},nativeOn:{\"click\":function($event){$event.stopPropagation();{\n                  }}},model:{value:(_vm.profile.name),callback:function ($$v) {_vm.$set(_vm.profile, \"name\", $$v)},expression:\"profile.name\"}})]},proxy:true},{key:\"item\",fn:function(data){return [_c('v-avatar',{attrs:{\"size\":\"32\"}},[_c('v-img',{attrs:{\"src\":data.item.image}})],1),_c('div',{staticClass:\"ml-2\"},[_vm._v(_vm._s(data.item.name))])]}}],null,false,1308766746)})],1)],1):_c('v-row',[_c('v-col',[_vm._v(\" You are joining as: \"),_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('v-avatar',{attrs:{\"color\":\"#e0e0e0\"}},[(_vm.userAvatar)?_c('v-img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])],1)],1),_vm._v(\" \"+_vm._s(_vm.userDisplayName)+\" \")])],1)],1),(!_vm.currentUser)?_c('v-btn',{staticClass:\"btn-dark\",attrs:{\"large\":\"\",\"block\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleJoin($event)}}},[_vm._v(\"Join as guest\")]):_c('v-btn',{staticClass:\"btn-dark\",attrs:{\"large\":\"\",\"block\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleJoin($event)}}},[_vm._v(\"Join room\")]),_vm._m(0),(_vm.loadingMessage)?_c('div',[_vm._v(_vm._s(_vm.loadingMessage))]):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"join-privacy\"},[_vm._v(\" Enhance your physical privacy. \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"Learn how\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"join-root\">\n    <div v-if=\"!waitingForInfo && !waitingForMembership\" class=\"text-center\">\n      <v-btn\n        class=\"btn-login\"\n        text\n        small\n        @click.stop=\"handleLogin\"\n        :loading=\"loading\"\n        v-if=\"!currentUser\"\n        >Login</v-btn\n      >\n\n      <v-avatar class=\"join-avatar\">\n        <v-img v-if=\"roomAvatar\" :src=\"roomAvatar\" />\n        <span v-else class=\"white--text headline\">{{\n          roomName.substring(0, 1).toUpperCase()\n        }}</span>\n      </v-avatar>\n      <div class=\"join-title\">Welcome to {{ roomName }}</div>\n      <div class=\"join-message\">\n        <!-- Join the group chat in a web browser or with the Keanu app. -->\n      </div>\n      <v-container class=\"join-user-info\">\n        <v-row v-if=\"canEditProfile\">\n          <v-col class=\"flex-grow-0 flex-shrink-0\">\n            <v-avatar @click=\"showAvatarPickerList\">\n              <v-img v-if=\"profile\" :src=\"profile.image\" />\n            </v-avatar>\n          </v-col>\n          <v-col class=\"flex-shrink-1 flex-grow-1\">\n            <v-select\n              ref=\"avatar\"\n              :items=\"availableAvatars\"\n              cache-items\n              label=\"User name\"\n              outlined\n              dense\n              @change=\"selectAvatar\"\n              :value=\"availableAvatars[0]\"\n              single-line\n            >\n              <template v-slot:selection>\n                <v-text-field\n                  background-color=\"transparent\"\n                  solo\n                  flat\n                  hide-details\n                  @click.native.stop=\"\n                    {\n                    }\n                  \"\n                  v-model=\"profile.name\"\n                ></v-text-field>\n              </template>\n              <template v-slot:item=\"data\">\n                <v-avatar size=\"32\">\n                  <v-img :src=\"data.item.image\" />\n                </v-avatar>\n                <div class=\"ml-2\">{{ data.item.name }}</div>\n              </template>\n            </v-select>\n          </v-col>\n        </v-row>\n        <v-row v-else>\n          <v-col>\n            You are joining as:\n            <div style=\"display:inline-block\">\n            <v-avatar color=\"#e0e0e0\" style=\"\">\n              <v-img v-if=\"userAvatar\" :src=\"userAvatar\" />\n              <span v-else class=\"white--text headline\">{{\n                userAvatarLetter\n              }}</span>\n            </v-avatar>\n            </div>\n            {{ userDisplayName }}\n          </v-col>\n        </v-row>\n      </v-container>\n\n      <!--<v-btn\n        class=\"btn-light\"\n        large\n        block\n        @click.stop=\"handleOpenApp\"\n        :loading=\"loading\"\n        >Open Keanu app</v-btn\n      >\n\n      <div class=\"join-or-divider\">OR</div> -->\n\n      <v-btn\n        class=\"btn-dark\"\n        large\n        block\n        @click.stop=\"handleJoin\"\n        :loading=\"loading\"\n        v-if=\"!currentUser\"\n        >Join as guest</v-btn\n      >\n      <v-btn\n        class=\"btn-dark\"\n        large\n        block\n        @click.stop=\"handleJoin\"\n        :loading=\"loading\"\n        v-else\n        >Join room</v-btn\n      >\n\n      <div class=\"join-privacy\">\n        Enhance your physical privacy. <a href=\"#\">Learn how</a>\n      </div>\n\n      <div v-if=\"loadingMessage\">{{ loadingMessage }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport User from \"../models/user\";\nimport util from \"../plugins/utils\";\nimport config from \"../assets/config\";\n\nexport default {\n  name: \"Join\",\n  data() {\n    return {\n      roomName: null,\n      roomAvatar: null,\n      guestUser: new User(config.defaultServer, \"\", \"\", true),\n      loading: false,\n      loadingMessage: null,\n      waitingForInfo: true,\n      waitingForMembership: false,\n      availableAvatars: [],\n      randomProfile: null,\n      selectedProfile: null,\n    };\n  },\n  mounted() {\n    this.$matrix.on(\"Room.myMembership\", this.onMyMembership);\n    this.availableAvatars = util.getDefaultAvatars();\n    this.randomProfile = this.availableAvatars[\n      Math.floor(Math.random() * this.availableAvatars.length)\n    ];\n  },\n  destroyed() {\n    this.$matrix.off(\"Room.myMembership\", this.onMyMembership);\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    room() {\n      return this.$matrix.currentRoom;\n    },\n    roomId() {\n      if (this.room) {\n        return this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n    roomAliasOrId() {\n      if (this.room) {\n        return this.room.getCanonicalAlias() || this.room.roomId;\n      }\n      return this.$matrix.currentRoomId;\n    },\n\n    profile() {\n      return {\n        image:\n          (this.selectedProfile ? this.selectedProfile.image : null) ||\n          this.userAvatar ||\n          this.randomProfile.image,\n        name:\n          (this.selectedProfile ? this.selectedProfile.name : null) ||\n          this.userDisplayName ||\n          this.randomProfile.name,\n      };\n    },\n\n    canEditProfile() {\n      // If we have an account already, we can't edit profile here (need to go into profile view)\n      if (this.currentUser) {\n        return false;\n      }\n      return true;\n    },\n\n    hasChangedAvatar() {\n      return this.userAvatar != this.profile.image;\n    },\n\n    hasChangedDisplayName() {\n      return this.userDisplayName != this.profile.name;\n    },\n\n    userDisplayName() {\n      return this.$matrix.userDisplayName;\n    },\n\n    userAvatar() {\n      if (!this.$matrix.userAvatar) {\n        return null;\n      }\n      return this.$matrix.matrixClient.mxcUrlToHttp(\n        this.$matrix.userAvatar,\n        80,\n        80,\n        \"scale\",\n        true\n      );\n    },\n\n    userAvatarLetter() {\n      if (!this.currentUser) {\n        return null;\n      }\n      return (this.userDisplayName || this.currentUser.userId.substring(1)).substring(0, 1).toUpperCase();\n    }\n  },\n  watch: {\n    roomId: {\n      immediate: true,\n      handler(value, oldVal) {\n        if (!value || (value && value == oldVal)) {\n          return; // No change.\n        }\n        console.log(\n          \"Join: Current room changed to \" + (value ? value : \"null\")\n        );\n        this.roomName = this.roomId;\n        if (this.currentUser) {\n          this.waitingForMembership = true;\n          const self = this;\n          this.$matrix\n            .login(this.currentUser)\n            .then(() => {\n              self.$matrix.setCurrentRoomId(self.roomAliasOrId); // Go to this room, now or when joined.\n              const room = self.$matrix.getRoom(self.roomAliasOrId);\n\n              // Already joined?\n              if (\n                room &&\n                room.hasMembershipState(self.currentUser.user_id, \"join\")\n              ) {\n                // Yes, go to room\n                self.$navigation.push(\n                  {\n                    name: \"Chat\",\n                    params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n                  },\n                  -1\n                );\n                return;\n              }\n              this.waitingForMembership = false;\n            })\n            .catch((ignoredErr) => {\n              this.waitingForMembership = false;\n            });\n        }\n        if (this.roomId.startsWith(\"#\")) {\n          this.$matrix\n            .getPublicRoomInfo(this.roomId)\n            .then((room) => {\n              console.log(\"Found room:\", room);\n              this.roomName = room.name;\n              this.roomAvatar = room.avatar;\n              this.waitingForInfo = false;\n            })\n            .catch((err) => {\n              console.log(\"Could not find room info\", err);\n              this.waitingForInfo = false;\n            });\n        } else {\n          // Private room, try to get name\n          const room = this.$matrix.getRoom(this.roomId);\n          if (room) {\n            this.roomName = room.name || this.roomName;\n          }\n          this.waitingForInfo = false;\n        }\n      },\n    },\n  },\n\n  methods: {\n    onMyMembership(room, membership, ignoredprevMembership) {\n      if (room && room.roomId == this.roomId && membership == \"join\") {\n        this.$nextTick(() => {\n          this.$navigation.push(\n            {\n              name: \"Chat\",\n              params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n            },\n            -1\n          );\n        });\n      }\n    },\n\n    handleLogin() {\n      this.$navigation.push({ name: \"Login\" }, 1);\n    },\n\n    handleOpenApp() {\n      console.log(\"Open app...\"); //TODO\n    },\n\n    handleJoin() {\n      this.loading = true;\n      this.loadingMessage = \"Logging in...\";\n      var clientPromise;\n      if (this.currentUser) {\n        clientPromise = this.$matrix.login(this.currentUser);\n      } else {\n        clientPromise = this.$store.dispatch(\"auth/login\", this.guestUser);\n      }\n      return clientPromise\n        .then(\n          function (user) {\n            if (!this.hasChangedDisplayName) {\n              console.log(\"Join: No display name change\");\n              return Promise.resolve(user);\n            } else {\n              console.log(\"Join: Set display name to: \" + this.profile.name);\n              return this.$matrix.matrixClient.setDisplayName(\n                this.profile.name,\n                undefined\n              );\n            }\n          }.bind(this)\n        )\n        .then(\n          function () {\n            if (!this.hasChangedAvatar) {\n              console.log(\"Join: No avatar change\");\n              return Promise.resolve(\"no avatar\");\n            } else {\n              console.log(\"Join: Updating avatar\");\n              return util.setAvatar(\n                this.$matrix.matrixClient,\n                this.profile.image,\n                function (progress) {\n                  console.log(\"Progress: \" + JSON.stringify(progress));\n                }\n              );\n            }\n          }.bind(this)\n        )\n        .then(\n          function (ignoreduser) {\n            console.log(\"Join: joining room\");\n            this.loadingMessage = \"Joining room...\";\n            return this.$matrix.matrixClient.joinRoom(this.roomId);\n          }.bind(this)\n        )\n        .then((ignoredRoom) => {\n          this.loading = false;\n          this.loadingMessage = null;\n          this.$nextTick(() => {\n            this.$navigation.push(\n              {\n                name: \"Chat\",\n                params: { roomId: util.sanitizeRoomId(this.roomAliasOrId) },\n              },\n              -1\n            );\n          });\n        })\n        .catch((err) => {\n          // TODO - handle error\n          console.log(\"Failed to join room\", err);\n          this.loading = false;\n          this.loadingMessage = err.toString();\n        });\n    },\n\n    selectAvatar(value) {\n      this.selectedProfile = Object.assign({}, value); // Make a copy, so editing does not destroy data\n    },\n\n    showAvatarPickerList() {\n      this.$refs.avatar.$refs.input.click();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/join.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Join.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Join.vue?vue&type=template&id=10d6b5f2&\"\nimport script from \"./Join.vue?vue&type=script&lang=js&\"\nexport * from \"./Join.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Join.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCol,VContainer,VImg,VRow,VSelect,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-root\"},[(_vm.showBackArrow)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$navigation.pop($event)}}},[_c('v-icon',[_vm._v(\"arrow_back\")])],1):_vm._e(),_c('div',{staticClass:\"text-center\",attrs:{\"color\":\"rgba(255,255,255,0.1)\"}},[_c('div',{staticClass:\"h2\"},[_vm._v(\"Login\")]),_c('v-form',{model:{value:(_vm.isValid),callback:function ($$v) {_vm.isValid=$$v},expression:\"isValid\"}},[_c('v-text-field',{attrs:{\"label\":\"Username\",\"color\":\"black\",\"background-color\":\"white\",\"outlined\":\"\",\"rules\":[function (v) { return !!v || 'Username is required'; }],\"error\":_vm.userErrorMessage != null,\"error-messages\":_vm.userErrorMessage,\"required\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.$refs.password.focus()}},model:{value:(_vm.user.user_id),callback:function ($$v) {_vm.$set(_vm.user, \"user_id\", $$v)},expression:\"user.user_id\"}}),_c('v-text-field',{ref:\"password\",attrs:{\"label\":\"Password\",\"color\":\"black\",\"background-color\":\"white\",\"outlined\":\"\",\"type\":\"password\",\"rules\":[function (v) { return !!v || 'Password is required'; }],\"error\":_vm.passErrorMessage != null,\"error-messages\":_vm.passErrorMessage,\"required\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return (function () { if (_vm.isValid && !_vm.loading) { _vm.handleLogin() }})($event)}},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('v-btn',{attrs:{\"disabled\":!_vm.isValid || _vm.loading,\"primary\":\"\",\"large\":\"\",\"block\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleLogin($event)}}},[_vm._v(\"Login\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login-root\">\n    <v-btn v-if=\"showBackArrow\" icon @click.stop=\"$navigation.pop\">\n      <v-icon>arrow_back</v-icon>\n    </v-btn>\n\n    <div color=\"rgba(255,255,255,0.1)\" class=\"text-center\">\n      <div class=\"h2\">Login</div>\n      <v-form v-model=\"isValid\">\n        <v-text-field\n          v-model=\"user.user_id\"\n          label=\"Username\"\n          color=\"black\"\n          background-color=\"white\"\n          outlined\n          :rules=\"[(v) => !!v || 'Username is required']\"\n          :error=\"userErrorMessage != null\"\n          :error-messages=\"userErrorMessage\"\n          required\n          v-on:keyup.enter=\"$refs.password.focus()\"\n        ></v-text-field>\n        <v-text-field\n          ref=\"password\"\n          v-model=\"user.password\"\n          label=\"Password\"\n          color=\"black\"\n          background-color=\"white\"\n          outlined\n          type=\"password\"\n          :rules=\"[(v) => !!v || 'Password is required']\"\n          :error=\"passErrorMessage != null\"\n          :error-messages=\"passErrorMessage\"\n          required\n          v-on:keyup.enter=\"() => { if (isValid && !loading) { handleLogin() }}\"\n        ></v-text-field>\n          <v-btn\n            :disabled=\"!isValid || loading\"\n            primary\n            large\n            block\n            @click.stop=\"handleLogin\"\n            :loading=\"loading\"\n            >Login</v-btn\n          >\n      </v-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport User from \"../models/user\";\nimport util from \"../plugins/utils\";\nimport config from \"../assets/config\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      user: new User(config.defaultServer, \"\", \"\"),\n      isValid: true,\n      loading: false,\n      message: \"\",\n      userErrorMessage: null,\n      passErrorMessage: null,\n    };\n  },\n  computed: {\n    loggedIn() {\n      return this.$store.state.auth.status.loggedIn;\n    },\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    showBackArrow() {\n      return this.$navigation && this.$navigation.canPop();\n    }\n  },\n  created() {\n    if (this.loggedIn) {\n      this.$navigation.push({name: \"Chat\", params: { roomId: util.sanitizeRoomId(this.$matrix.currentRoomId) }}, -1);\n    }\n  },\n  watch: {\n    user: {\n      handler() {\n        // Reset manual errors\n        this.userErrorMessage = null;\n        this.passErrorMessage = null;\n      },\n      deep: true,\n    },\n    message() {\n      if (\n        this.message &&\n        this.message.toLowerCase().includes(\"user\")\n      ) {\n        this.userErrorMessage = this.message;\n      } else {\n        this.userErrorMessage = null;\n      }\n      if (\n        this.message &&\n        this.message.toLowerCase().includes(\"pass\")\n      ) {\n        this.passErrorMessage = this.message;\n      } else {\n        this.passErrorMessage = null;\n      }\n    },\n  },\n  methods: {\n    handleLogin() {\n      if (this.user.user_id && this.user.password) {\n\n      // Reset errors\n      this.message = null;\n\n        // Is it a full matrix user id? Modify a copy, so that the UI will still show the full ID.\n        var user = Object.assign({}, this.user);\n        user.normalize();\n\n        this.loading = true;\n        this.$store.dispatch(\"auth/login\", user).then(\n          () => {\n            if (this.$matrix.currentRoomId) {\n              this.$navigation.push({name: \"Chat\", params: { roomId: util.sanitizeRoomId(this.$matrix.currentRoomId) }}, -1);\n            } else {\n              this.$navigation.push({name: \"Home\"}, -1);            \n            }\n          },\n          (error) => {\n            this.loading = false;\n            this.message =\n              (error.data && error.data.error) ||\n              error.message ||\n              error.toString();\n            console.log(\"Message set to \", this.message);\n          }\n        );\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/login.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=5981c334&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VForm,VIcon,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user)?_c('div',{staticClass:\"profile\"},[_c('div',{staticClass:\"chat-header\"},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"room-name\"},[_vm._v(\"My Profile\")]),_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$navigation && _vm.$navigation.canPop()),expression:\"$navigation && $navigation.canPop()\"}],staticClass:\"back\",attrs:{\"text\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$navigation.pop($event)}}},[_c('v-icon',[_vm._v(\"close\")])],1)],1)],1),_c('v-container',{staticClass:\"user-info\"},[_c('v-row',[_c('v-col',{staticClass:\"flex-grow-0 flex-shrink-0\"},[_c('v-avatar',{staticClass:\"avatar\",attrs:{\"size\":\"48\",\"color\":\"#e0e0e0\"}},[(_vm.userAvatar)?_c('img',{attrs:{\"src\":_vm.userAvatar}}):_c('span',{staticClass:\"white--text headline\"},[_vm._v(_vm._s(_vm.userAvatarLetter))])])],1),_c('v-col',{staticClass:\"flex-shrink-1 flex-grow-1\"},[_c('div',{staticClass:\"h1\"},[_vm._v(_vm._s(_vm.displayName))]),(_vm.$matrix.currentUser.is_guest)?_c('div',[_vm._v(\" This identity is temporary. Set a password to use it again. \")]):_vm._e(),_c('v-btn',{staticClass:\"outlined-button\",attrs:{\"block\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.logout($event)}}},[_vm._v(\"Logout\")])],1)],1)],1),_c('div',{staticClass:\"action\",on:{\"click\":function($event){_vm.showEditPasswordDialog = true}}},[_c('v-icon',[_vm._v(\"lock\")]),_c('span',[_vm._v(\"Set password\")])],1),_c('div',{staticClass:\"action\",on:{\"click\":function($event){_vm.editValue = _vm.displayName;_vm.showEditDisplaynameDialog = true}}},[_c('v-icon',[_vm._v(\"edit\")]),_c('span',[_vm._v(\"Change name\")])],1),_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.showEditPasswordDialog),callback:function ($$v) {_vm.showEditPasswordDialog=$$v},expression:\"showEditPasswordDialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Change password\")]),_c('v-card-text',[_vm._v(\" Not yet implemented. \")]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.showEditPasswordDialog = false}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.showEditPasswordDialog = false;}}},[_vm._v(\"Ok\")])],1)],1)],1),_c('v-dialog',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"50%\"},model:{value:(_vm.showEditDisplaynameDialog),callback:function ($$v) {_vm.showEditDisplaynameDialog=$$v},expression:\"showEditDisplaynameDialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Display name\")]),_c('v-card-text',[_c('v-text-field',{model:{value:(_vm.editValue),callback:function ($$v) {_vm.editValue=$$v},expression:\"editValue\"}})],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.showEditDisplaynameDialog = false}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.setDisplayName(_vm.editValue);\n            _vm.showEditDisplaynameDialog = false;}}},[_vm._v(\"Ok\")])],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"user\" class=\"profile\">\n    <div class=\"chat-header\">\n      <v-container fluid>\n        <div class=\"room-name\">My Profile</div>\n            <v-btn\n              text\n              class=\"back\"\n              v-show=\"$navigation && $navigation.canPop()\"\n              @click.stop=\"$navigation.pop\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n\n      </v-container>\n    </div>\n\n\n    <v-container class=\"user-info\">\n        <v-row>\n          <v-col class=\"flex-grow-0 flex-shrink-0\">\n                <v-avatar class=\"avatar\" size=\"48\" color=\"#e0e0e0\">\n          <img v-if=\"userAvatar\" :src=\"userAvatar\" />\n            <span v-else class=\"white--text headline\">{{\n              userAvatarLetter\n            }}</span>\n          </v-avatar>\n          </v-col>\n          <v-col class=\"flex-shrink-1 flex-grow-1\">\n            <div class=\"h1\">{{ displayName }}</div>\n            <div v-if=\"$matrix.currentUser.is_guest\">\n              This identity is temporary. Set a password to use it again.\n            </div>\n            <v-btn block class=\"outlined-button\" @click.stop=\"logout\">Logout</v-btn>\n          </v-col>\n        </v-row>\n      </v-container>\n\n    <div class=\"action\" @click=\"showEditPasswordDialog = true\"><v-icon>lock</v-icon><span>Set password</span></div>\n    <div class=\"action\" @click=\"editValue = displayName;showEditDisplaynameDialog = true\"><v-icon>edit</v-icon><span>Change name</span></div>\n\n    <!-- edit password dialog -->\n    <v-dialog v-model=\"showEditPasswordDialog\" class=\"ma-0 pa-0\" width=\"50%\">\n      <v-card>\n        <v-card-title>Change password</v-card-title>\n        <v-card-text>\n          Not yet implemented.\n          <!-- <v-text-field v-model=\"password\" /> -->\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"showEditPasswordDialog = false\">Cancel</v-btn>\n          <v-btn\n            color=\"primary\"\n            text\n            @click=\"\n              showEditPasswordDialog = false;\n            \"\n            >Ok</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- edit display name dialog -->\n    <v-dialog v-model=\"showEditDisplaynameDialog\" class=\"ma-0 pa-0\" width=\"50%\">\n      <v-card>\n        <v-card-title>Display name</v-card-title>\n        <v-card-text>\n          <v-text-field v-model=\"editValue\" />\n        </v-card-text>\n        <v-divider></v-divider>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"showEditDisplaynameDialog = false\">Cancel</v-btn>\n          <v-btn\n            color=\"primary\"\n            text\n            @click=\"\n              setDisplayName(editValue);\n              showEditDisplaynameDialog = false;\n            \"\n            >Ok</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Profile\",\n  data() {\n    return {\n      showEditPasswordDialog: false,\n      showEditDisplaynameDialog: false,\n      editValue: null,\n    };\n  },\n\n  computed: {\n    user() {\n      if (!this.$matrix.matrixClient) {\n        return null;\n      }\n      return this.$matrix.matrixClient.getUser(this.$matrix.currentUserId);\n    },\n\n    displayName() {\n      if (!this.user) {\n        return null;\n      }\n      return (this.user.displayName || this.user.userId);\n    },\n\n    userAvatar() {\n      if (!this.user || !this.user.avatarUrl) {\n        return null;\n      }\n      return this.$matrix.matrixClient.mxcUrlToHttp(this.user.avatarUrl, 80, 80, 'scale', true);\n    },\n\n    userAvatarLetter() {\n      if (!this.user) {\n        return null;\n      }\n      return (this.user.displayName || this.user.userId.substring(1)).substring(0, 1).toUpperCase();\n    }\n  },\n\n  methods: {\n    logout() {\n      //TODO - For guest accounts, show warning about not being able to rejoin.\n      this.$store.dispatch(\"auth/logout\");\n      this.$nextTick(() => {\n        this.$navigation.push({path: \"/login\"}, -1);\n      })\n    },\n\n    setDisplayName(name) {\n      this.$matrix.matrixClient.setDisplayName(name);\n    },\n\n    upgradeAccount() {\n      this.$matrix\n        .upgradeGuestAccount()\n        .then(user => {\n          // Done, login with the \"new\" account to get a real token instead of our guest token.\n          this.user = user;\n          return this.$store.dispatch(\"auth/login\", this.user);\n        })\n        .then(() => {\n          console.log(\"Upgrade done!\");\n        })\n        .catch((err) => {\n          console.log(\"ERROR\", err);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=e8b95f6a&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Profile.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VDivider,VIcon,VRow,VSpacer,VTextField})\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '../components/Home.vue'\nimport Chat from '../components/Chat.vue'\nimport Join from '../components/Join.vue'\nimport Login from '../components/Login.vue'\nimport Profile from '../components/Profile.vue'\nimport util from '../plugins/utils'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/room/:roomId?',\n    name: 'Chat',\n    component: Chat,\n    meta: {\n      includeRoom: true\n    }\n  },\n  {\n    path: '/info',\n    name: 'RoomInfo',\n    component: () => import('../components/RoomInfo.vue'),\n    props: true,\n    meta: {\n      title: 'Info',\n      includeRoom: true\n    }\n  },\n  {\n    path: '/profile',\n    name: 'Profile',\n    component: Profile,\n    meta: {\n      title: 'Profile'\n    }\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login,\n    props: true\n  },\n  {\n    path: '/join/:roomId?',\n    name: 'Join',\n    component: Join\n  },\n]\n\nconst router = new VueRouter({\n  routes\n});\n\nrouter.beforeEach((to, from, next) => {\n  const publicPages = ['/login'];\n  var authRequired = !publicPages.includes(to.path);\n  const loggedIn = localStorage.getItem('user');\n\n  if (to.name == 'Chat' || to.name == 'Join') {\n    if (!to.params.roomId && to.hash) {\n      // Public rooms start with '#', confuses the router. If hash but no roomId param, set it.\n      to.params.roomId = to.hash;\n    }\n    const roomId = util.sanitizeRoomId(to.params.roomId);\n    router.app.$matrix.setCurrentRoomId(roomId);\n    if (roomId && roomId.startsWith('#')) {\n      //Invite to public room\n      authRequired = false;\n    }\n  }\n\n  // trying to access a restricted page + not logged in\n  // redirect to login page\n  if (authRequired && !loggedIn) {\n    next('/login');\n  } else {\n    next();\n  }\n});\n\nrouter.getRoomLink = function(roomId) {\n  return window.location.origin + window.location.pathname + \"#/room/\" + encodeURIComponent(util.sanitizeRoomId(roomId));\n}\n\nexport default router\n","const user = JSON.parse(localStorage.getItem('user'));\nconst initialState = user\n    ? { status: { loggedIn: true }, user }\n    : { status: { loggedIn: false }, user: null };\n\nexport const auth = {\n    namespaced: true,\n    state: initialState,\n    actions: {\n        login({ commit }, user) {\n            return this._vm.$matrix.login(user).then(\n                user => {\n                    commit('loginSuccess', user);\n                    return Promise.resolve(user);\n                },\n                error => {\n                    commit('loginFailure');\n                    return Promise.reject(error);\n                }\n            );\n        },\n        logout({ commit }) {\n            this._vm.$matrix.logout();\n            commit('logout');\n        },\n    },\n    mutations: {\n        loginSuccess(state, user) {\n            state.status.loggedIn = true;\n            state.user = user;\n        },\n        loginFailure(state) {\n            state.status.loggedIn = false;\n            state.user = null;\n        },\n        logout(state) {\n            state.status.loggedIn = false;\n            state.user = null;\n        },\n        registerSuccess(state) {\n            state.status.loggedIn = false;\n        },\n        registerFailure(state) {\n            state.status.loggedIn = false;\n        }\n    }\n};","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport VuexPersist from 'vuex-persist'\n\nimport { auth } from './auth.module';\n\nVue.use(Vuex)\n\nconst vuexPersist = new VuexPersist({\n    key: 'settings',\n    storage: localStorage,\n    reducer: state => ({\n      currentRoomId: state.currentRoomId\n    })\n  })\n\nexport default new Vuex.Store({\n    state: {\n        currentRoomId: null\n    },\n    mutations: {\n        setCurrentRoomId(state, roomId) {\n            state.currentRoomId = roomId;\n        },\n    },\n    actions: {\n    },\n    modules: {\n        auth\n    },\n    plugins: [vuexPersist.plugin]\n})\n","export default {\n    install(Vue, router) {\n        var routes = [];\n        var nextRoutes = null;\n        var zeroIndex = undefined;\n\n        router.beforeResolve((to, ignoredfrom, next) => {\n            if (!zeroIndex) {\n                routes = [to];\n                zeroIndex = window.history.length;\n            }\n            next();\n        })\n\n        router.beforeEach((to, from, next) => {\n            if (nextRoutes) {\n                console.log(\"Nav: next routes set, going:\", routes, nextRoutes);\n                routes = nextRoutes;\n                nextRoutes = null;\n                if (routes.length > 0) {\n                    console.log(\"Redirecting to\", routes[routes.length - 1]);\n                    next(routes[routes.length - 1]);\n                    return;\n                }\n            }\n            next();\n        })\n\n        const navigationService = {\n            /***\n             * @param mode Mode of operation. -1 = push as root, 0 = replace, 1 = normal push\n             */\n            push(route, mode) {\n                if (mode === undefined) {\n                    mode = 1;\n                }\n                if (mode == -1) {\n                    nextRoutes = [route];\n                } else if (mode == 0) {\n                    // Replace\n                    nextRoutes = [...routes];\n                    nextRoutes.pop();\n                    nextRoutes.push(route);\n                } else {\n                    nextRoutes = [...routes];\n                    nextRoutes.push(route);\n                }\n\n                const index = nextRoutes.length - routes.length;\n                const targetIndex = nextRoutes.length - 1;\n                console.log(\"Nav - index \" + index + \" Target \" + targetIndex);\n                if (index < 0) {\n                    console.log(\"Nav - go \" + index);\n                    router.go(index);\n                } else if (index == 0) {\n                    console.log(\"Nav - replace\");\n                    routes = nextRoutes;\n                    nextRoutes = null;\n                    router.replace(route).catch((ignoredErr) => {});\n                } else {\n                    console.log(\"Nav - push\");\n                    router.push(route).catch((ignoredErr) => {});\n                }\n            },\n\n            canPop() {\n                if (nextRoutes) {\n                    return nextRoutes.length > 1;\n                }\n                return routes.length > 1;\n            },\n\n            pop() {\n                routes.pop();\n                router.go(-1);\n            }\n        }\n        Vue.prototype.$navigation = navigationService;\n    }\n}\n","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify';\nimport router from './router'\nimport store from './store'\nimport matrix from './services/matrix.service'\nimport navigation from './services/navigation.service'\nimport 'roboto-fontface/css/roboto/roboto-fontface.css'\nimport 'material-design-icons-iconfont/dist/material-design-icons.css'\nimport VEmojiPicker from 'v-emoji-picker';\nimport VueResize from 'vue-resize';\nimport 'vue-resize/dist/vue-resize.css';\nimport VueClipboard from 'vue-clipboard2'\nimport VueSanitize from \"vue-sanitize\";\n\nvar defaultOptions = VueSanitize.defaults;\ndefaultOptions.disallowedTagsMode = \"recursiveEscape\";\ndefaultOptions.allowedTags = [];\nVue.use(VueSanitize, defaultOptions);\n\nVue.config.productionTip = false\n\nVue.use(VueResize);\nVue.use(VEmojiPicker);\nVue.use(matrix, {store: store});\nVue.use(VueClipboard);\n\n// Add bubble functionality to custom events.\n// From here: https://stackoverflow.com/questions/41993508/vuejs-bubbling-custom-events\nVue.use((Vue) => {\n  Vue.prototype.$bubble = function $bubble(eventName, ...args) {\n    // Emit the event on all parent components\n    let component = this;\n    do {\n      component.$emit(eventName, ...args);\n      component = component.$parent;\n    } while (component);\n  };\n});\n\n// Register a global custom directive called `v-blur` that prevents focus\nVue.directive('blur', {\n  inserted: function (el) {\n    el.onfocus = (ev) => ev.target.blur()\n  }\n});\n\nVue.use(navigation, router);\n\nnew Vue({\n  vuetify,\n  router,\n  store,\n  matrix,\n  render: h => h(App)\n}).$mount('#app');","module.exports = __webpack_public_path__ + \"img/av_cat.152143a7.png\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_panda.5b6eb785.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=style&index=1&lang=css&\"","module.exports = __webpack_public_path__ + \"img/av_tiger.d4418fd9.png\";","module.exports = __webpack_public_path__ + \"img/av_osprey.0ee2ef1c.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingAudio.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_panther.bd8e1503.png\";","module.exports = __webpack_public_path__ + \"img/av_otter.e251be0c.png\";","module.exports = __webpack_public_path__ + \"img/av_mantis.a0086bc3.png\";","module.exports = __webpack_public_path__ + \"img/av_bunny.2787a707.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingImage.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_iguna.744f7412.png\";","module.exports = __webpack_public_path__ + \"img/av_dragonfly.08cea848.png\";","module.exports = __webpack_public_path__ + \"img/av_hummingbird.abadb545.png\";","module.exports = __webpack_public_path__ + \"img/av_turtle.80b5d008.png\";","module.exports = __webpack_public_path__ + \"img/av_orangutan.31fa41b2.png\";","export default class User {\n    constructor(home_server, user_id, password, is_guest) {\n        this.home_server = home_server;\n        this.user_id = user_id;\n        this.password = password;\n        this.is_guest = is_guest || false\n    }\n\n    normalize = function() {\n        if (this.user_id.startsWith('@') && this.user_id.includes(':')) {\n            const parts = this.user_id.split(\":\");\n            this.user_id = parts[0].substring(1);\n            this.home_server = \"https://\" + parts[1];\n        }\n    };\n\n    static homeServerUrl = function(home_server) {\n        if (home_server && !home_server.startsWith(\"https://\")) {\n            return \"https://\" + home_server;\n        }\n        return home_server;\n    };\n\n    static localPart(user_id) {\n        if (user_id && user_id.startsWith('@') && user_id.includes(':')) {\n            const parts = user_id.split(\":\");\n            return parts[0].substring(1);\n        }\n        return user_id;\n    }\n}","module.exports = __webpack_public_path__ + \"img/av_owl.711727bb.png\";","module.exports = __webpack_public_path__ + \"img/av_starfish.5fab06a7.png\";","module.exports = __webpack_public_path__ + \"img/av_horse.5b902952.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingText.vue?vue&type=style&index=0&lang=scss&\"","var map = {\n\t\"./av_baboon.png\": \"bcb7\",\n\t\"./av_badger.png\": \"02f6\",\n\t\"./av_bear.png\": \"c56a\",\n\t\"./av_bee.png\": \"f46f\",\n\t\"./av_beta.png\": \"0130\",\n\t\"./av_bunny.png\": \"7740\",\n\t\"./av_butterfly.png\": \"ebf5\",\n\t\"./av_cardinal.png\": \"f3a3d\",\n\t\"./av_cat.png\": \"5b89\",\n\t\"./av_cockatoo.png\": \"ec1f\",\n\t\"./av_crab.png\": \"a9ada\",\n\t\"./av_crane.png\": \"dcc7\",\n\t\"./av_dragonfly.png\": \"7e6d\",\n\t\"./av_eagle.png\": \"53ed\",\n\t\"./av_egret.png\": \"ad17\",\n\t\"./av_elephant.png\": \"a3d9\",\n\t\"./av_flamingo.png\": \"e199\",\n\t\"./av_fox.png\": \"af6a\",\n\t\"./av_gazelle.png\": \"9c44\",\n\t\"./av_giraffe.png\": \"9968\",\n\t\"./av_gorilla.png\": \"c300\",\n\t\"./av_hedgehog.png\": \"1301\",\n\t\"./av_hippo.png\": \"c517\",\n\t\"./av_horse.png\": \"8ead\",\n\t\"./av_hummingbird.png\": \"7edc\",\n\t\"./av_iguna.png\": \"7af4\",\n\t\"./av_jellyfish.png\": \"061b\",\n\t\"./av_leopard.png\": \"2f9f\",\n\t\"./av_lion.png\": \"cddb\",\n\t\"./av_lionfish.png\": \"d4da\",\n\t\"./av_lizard.png\": \"db7c\",\n\t\"./av_macaw.png\": \"19ad\",\n\t\"./av_mantis.png\": \"768b\",\n\t\"./av_octopus.png\": \"03e5\",\n\t\"./av_orangutan.png\": \"83ed\",\n\t\"./av_osprey.png\": \"6a23\",\n\t\"./av_otter.png\": \"73d8\",\n\t\"./av_owl.png\": \"8828\",\n\t\"./av_panda.png\": \"5c74\",\n\t\"./av_pangolin.png\": \"329e\",\n\t\"./av_panther.png\": \"6ba5\",\n\t\"./av_peacock.png\": \"1eb2\",\n\t\"./av_penguin.png\": \"e175\",\n\t\"./av_polar bear.png\": \"403a\",\n\t\"./av_puffin.png\": \"19df\",\n\t\"./av_puppy.png\": \"b459\",\n\t\"./av_rhino.png\": \"b504\",\n\t\"./av_rooster.png\": \"f305\",\n\t\"./av_shark.png\": \"977f\",\n\t\"./av_sloth.png\": \"b74f\",\n\t\"./av_snake.png\": \"5029\",\n\t\"./av_squirrel.png\": \"0478\",\n\t\"./av_starfish.png\": \"8aa7e\",\n\t\"./av_stingray.png\": \"b302\",\n\t\"./av_tiger.png\": \"650e\",\n\t\"./av_tucan.png\": \"132f\",\n\t\"./av_turtle.png\": \"81a0\",\n\t\"./av_walrus.png\": \"2c30\",\n\t\"./av_whaleshark.png\": \"e99d\",\n\t\"./av_yak.png\": \"b95f\",\n\t\"./av_zebra.png\": \"2f1c\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"921a\";","module.exports = __webpack_public_path__ + \"img/av_shark.545e47bb.png\";","module.exports = __webpack_public_path__ + \"img/av_giraffe.7af253ac.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOperations.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_gazelle.4a3025c3.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingAudio.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_elephant.cbbeeff1.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactInvited.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_crab.331519ac.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomHistoryVisibility.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_egret.605ff296.png\";","module.exports = __webpack_public_path__ + \"img/av_fox.e790d11c.png\";","module.exports = __webpack_public_path__ + \"img/av_stingray.e1cf4ae1.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_puppy.3b09488c.png\";","module.exports = __webpack_public_path__ + \"img/av_rhino.2299bc9b.png\";","module.exports = __webpack_public_path__ + \"img/av_sloth.1efebb51.png\";","module.exports = __webpack_public_path__ + \"img/av_yak.91a75b41.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=style&index=0&lang=scss&\"","global.Olm = require(\"olm\");\nimport sdk from \"matrix-js-sdk\";\nimport util from \"../plugins/utils\";\nimport User from \"../models/user\";\n\nconst LocalStorageCryptoStore = require(\"matrix-js-sdk/lib/crypto/store/localStorage-crypto-store\")\n    .LocalStorageCryptoStore;\nsdk.setCryptoStoreFactory(\n    () => new LocalStorageCryptoStore(window.localStorage)\n);\n\nexport default {\n    install(Vue, options) {\n        if (!options || !options.store) {\n            throw new Error('Please initialise plugin with a Vuex store.')\n        }\n\n        const store = options.store;\n\n        const matrixService = new Vue({\n            store,\n\n            data() {\n                return {\n                    matrixClient: null,\n                    matrixClientReady: false,\n                    rooms: [],\n                    userDisplayName: null,\n                    userAvatar: null,\n                    currentRoom: null,\n                    notificationCount: 0\n                }\n            },\n            mounted() {\n                console.log(\"Matrix service mounted\");\n            },\n\n            computed: {\n                ready() {\n                    return this.matrixClient != null && this.matrixClientReady;\n                },\n\n                currentUser() {\n                    return this.$store.state.auth.user;\n                },\n\n                currentUserId() {\n                    const user = this.currentUser || {}\n                    return user.user_id;\n                },\n\n                currentRoomId() {\n                    return this.$store.state.currentRoomId;\n                },\n            },\n\n            watch: {\n                currentRoomId: {\n                    immediate: true,\n                    handler(roomId) {\n                        this.currentRoom = this.getRoom(roomId);\n                    }\n                },\n            },\n\n            methods: {\n                login(user) {\n                    const tempMatrixClient = sdk.createClient(User.homeServerUrl(user.home_server));\n                    var promiseLogin;\n\n                    if (user.is_guest && !user.access_token) {\n                        // Generate random username and password. We don't user REAL matrix\n                        // guest accounts because 1. They are not allowed to post media, 2. They\n                        // can not use avatars and 3. They can not seamlessly be upgraded to real accounts.\n                        //\n                        // Instead, we use an ILAG approach, Improved Landing as Guest.\n                        const user = util.randomUser();\n                        const pass = util.randomPass();\n                        promiseLogin = tempMatrixClient\n                            .register(user, pass, null, {\n                                type: \"m.login.dummy\",\n                            })\n                            .then((response) => {\n                                console.log(\"Response\", response);\n                                response.password = pass;\n                                response.is_guest = true;\n                                localStorage.setItem('user', JSON.stringify(response));\n                                return response;\n                            })\n                    } else if (!user.is_guest && user.access_token) {\n                        // Logged in on \"real\" account\n                        promiseLogin = Promise.resolve(user);\n                    } else {\n                        var data = { user: User.localPart(user.user_id), password: user.password, type: \"m.login.password\" };\n                        if (user.device_id) {\n                            data.device_id = user.device_id;\n                        }\n                        promiseLogin = tempMatrixClient\n                            .login(\"m.login.password\", data)\n                            .then((response) => {\n                                var u = response;\n                                if (user.is_guest) {\n                                    // Copy over needed properties\n                                    u = Object.assign(user, response);\n                                }\n                                localStorage.setItem('user', JSON.stringify(u));\n                                return response;\n                            })\n                    }\n\n                    return promiseLogin\n                        .then(user => {\n                            return this.getMatrixClient(user);\n                        })\n                },\n\n                clearCryptoStore() {\n                    // Clear crypto related data \n                    // TODO - for some reason \"clearStores\" called in \"logout\" only clears the \"account\" crypto\n                    // data item, not all sessions etc. Why? We need to do that manually here!\n                    const toRemove = [];\n                    for (let i = 0; i < localStorage.length; ++i) {\n                        const key = localStorage.key(i);\n                        if (key.startsWith(\"crypto.\")) toRemove.push(key);\n                    }\n                    for (const key of toRemove) {\n                        localStorage.removeItem(key);\n                    }\n                },\n\n                logout() {\n                    if (this.matrixClient) {\n                        this.removeMatrixClientListeners(this.matrixClient);\n                        this.matrixClient.stopClient();\n                        this.matrixClient.clearStores().then(() => {\n                            this.clearCryptoStore()\n                        })\n                        this.matrixClient = null;\n                        this.matrixClientReady = false;\n                    } else {\n                        this.clearCryptoStore();\n                    }\n\n\n                    localStorage.removeItem('user');\n                    this.$store.commit(\"setCurrentRoomId\", null);\n                },\n\n                /**\n                 * Upgrade a guest account into a \"normal\" account. For now, use random user and pass...\n                 */\n                upgradeGuestAccount() {\n                    if (!this.matrixClient || !this.currentUser || !this.currentUser.is_guest) {\n                        return Promise.reject(\"Invalid params\");\n                    }\n                    const randomPassword = util.randomPass();\n                    const self = this;\n                    return this.matrixClient.register(this.matrixClient.getUserIdLocalpart(), randomPassword, null, {\n                        type: \"m.login.dummy\",\n                    }, undefined, this.currentUser.access_token)\n                        .then((response) => {\n                            console.log(\"Response\", response);\n                            response.is_guest = false;\n                            response.password = randomPassword;\n                            self.currentUser = response;\n                            localStorage.setItem('user', JSON.stringify(response)); // Update local storage as well.\n                            self.logout();\n                            return self.currentUser;\n                        });\n                },\n\n                initClient() {\n                    this.reloadRooms();\n                    this.matrixClientReady = true;\n                    this.matrixClient.emit('Matrix.initialized', this.matrixClient);\n                    this.matrixClient.getProfileInfo(this.currentUserId)\n                    .then(info => {\n                        console.log(\"Got user profile: \" + JSON.stringify(info));\n                        this.userDisplayName = info.displayname;\n                        this.userAvatar = info.avatar_url;\n                    })\n                    .catch(err => {\n                        console.log(\"Failed to get user profile: \", err);\n                    })\n                },\n\n                async getMatrixClient(user) {\n                    if (user === undefined) {\n                        user = this.$store.state.auth.user;\n                    }\n                    if (this.matrixClientReady) {\n                        return new Promise((resolve, ignoredreject) => {\n                            resolve(user);\n                        })\n                    } else if (this.matrixClient) {\n                        return new Promise((resolve, ignoredreject) => {\n                            this.matrixClient.once('Matrix.initialized', (ignoredclient) => {\n                                resolve(user);\n                            });\n                        })\n                    }\n\n                    const matrixStore = new sdk.MemoryStore(window.localStorage);\n                    const webStorageSessionStore = new sdk.WebStorageSessionStore(\n                        window.localStorage\n                    );\n\n                    var homeServer = user.home_server;\n                    if (!homeServer.startsWith(\"https://\")) {\n                        homeServer = \"https://\" + homeServer;\n                    }\n\n                    var opts = {\n                        baseUrl: homeServer,\n                        userId: user.user_id,\n                        store: matrixStore,\n                        sessionStore: webStorageSessionStore,\n                        deviceId: user.device_id,\n                        accessToken: user.access_token,\n                        timelineSupport: true,\n                        unstableClientRelationAggregation: true,\n                        //useAuthorizationHeader: true\n                    }\n                    this.matrixClient = sdk.createClient(opts);\n                    // if (user.is_guest) {\n                    //     this.matrixClient.setGuest(true);\n                    // }\n                    return this.matrixClient\n                        .initCrypto()\n                        .then(() => {\n                            console.log(\"Crypto initialized\");\n\n                            this.addMatrixClientListeners(this.matrixClient);\n\n                            this.matrixClient.startClient();\n                            return this.matrixClient;\n                        })\n                        .then(matrixClient => {\n                            if (matrixClient.isInitialSyncComplete()) {\n                                console.log(\"Initial sync done already!\");\n                                return matrixClient;\n                            } else {\n                                return new Promise((resolve, reject) => {\n                                    matrixClient.once(\n                                        \"sync\",\n                                        function (state, ignoredprevState, ignoredres) {\n                                            console.log(state); // state will be 'PREPARED' when the client is ready to use\n                                            if (state == \"PREPARED\") {\n                                                resolve(matrixClient);\n                                            } else if (state == \"ERROR\") {\n                                                reject(\"Error syncing\");\n                                            }\n                                        }\n                                    )\n                                });\n                            }\n                        })\n                        .then(() => {\n                            // Ready to use! Start by loading rooms.\n                            this.initClient();\n                            return user;\n                        })\n                },\n\n                addMatrixClientListeners(client) {\n                    if (client) {\n                        client.on(\"event\", this.onEvent);\n                        client.on(\"Room\", this.onRoom);\n                        client.on(\"Session.logged_out\", this.onSessionLoggedOut);\n                    }\n                },\n\n                removeMatrixClientListeners(client) {\n                    if (client) {\n                        client.off(\"event\", this.onEvent);\n                        client.off(\"Room\", this.onRoom);\n                        client.off(\"Session.logged_out\", this.onSessionLoggedOut);\n                    }\n                },\n\n                onEvent(event) {\n                    switch (event.getType()) {\n                        case \"m.room.topic\": {\n                            const room = this.matrixClient.getRoom(event.getRoomId());\n                            if (room) {\n                                Vue.set(room, \"topic\", event.getContent().topic);\n                            }\n                        }\n                            break;\n\n                        case \"m.room.avatar\": {\n                            const room = this.matrixClient.getRoom(event.getRoomId());\n                            if (room) {\n                                Vue.set(room, \"avatar\", room.getAvatarUrl(this.matrixClient.getHomeserverUrl(), 80, 80, \"scale\", true));\n                            }\n                        }\n                            break;\n                    }\n                    this.updateNotificationCount();\n                },\n\n                onRoom(ignoredroom) {\n                    console.log(\"Got room: \" + ignoredroom);\n                    this.reloadRooms();\n                    this.updateNotificationCount();\n                },\n\n                onSessionLoggedOut() {\n                    console.log(\"Logged out!\");\n                    if (this.matrixClient) {\n                        this.removeMatrixClientListeners(this.matrixClient);\n                        this.matrixClient.stopClient();\n                        this.matrixClient = null;\n                        this.matrixClientReady = false;\n                    }\n                    this.$store.commit(\"setCurrentRoomId\", null);\n\n                    // Clear the access token\n                    var user = JSON.parse(localStorage.getItem('user'));\n                    if (user) {\n                        delete user.access_token;\n                    }\n                    localStorage.setItem('user', JSON.stringify(user));\n                    this.$navigation.push({ name: \"Login\" }, -1);\n                },\n\n                reloadRooms() {\n                    // TODO - do incremental update instead of replacing the whole array\n                    // each time!\n                    var updatedRooms = this.matrixClient.getVisibleRooms();\n                    updatedRooms = updatedRooms.filter(room => {\n                        return room._selfMembership && (room._selfMembership == \"invite\" || room._selfMembership == \"join\");\n                    });\n                    updatedRooms.forEach(room => {\n                        if (!room.avatar) {\n                            Vue.set(room, \"avatar\", room.getAvatarUrl(this.matrixClient.getHomeserverUrl(), 80, 80, \"scale\", true));\n                        }\n                    });\n                    console.log(\"Reload rooms\", updatedRooms);\n                    Vue.set(this, \"rooms\", updatedRooms);\n                    const currentRoom = this.getRoom(this.$store.state.currentRoomId);\n                    if (this.currentRoom != currentRoom) {\n                        this.currentRoom = currentRoom;\n                    }\n                },\n\n                setCurrentRoomId(roomId) {\n                    this.$store.commit(\"setCurrentRoomId\", roomId);\n                    this.currentRoom = this.getRoom(roomId);\n                },\n\n                getRoom(roomId) {\n                    if (!roomId) {\n                        return null;\n                    }\n                    var room = null;\n                    if (this.matrixClient) {\n                        const visibleRooms = this.matrixClient.getRooms();\n                        room = visibleRooms.find(room => {\n                            if (roomId.startsWith(\"#\")) {\n                                return room.getCanonicalAlias() == roomId;\n                            }\n                            return room.roomId == roomId;\n                        });\n                    }\n                    return room || null;\n                },\n\n                leaveRoom(roomId) {\n                    return this.matrixClient.leave(roomId, undefined)\n                        .then(() => {\n                            this.rooms = this.rooms.filter(room => {\n                                room.roomId != roomId;\n                            });\n                            this.matrixClient.store.removeRoom(roomId);\n                            //this.matrixClient.forget(roomId, true, undefined);\n                        })\n                },\n\n                on(event, handler) {\n                    if (this.matrixClient) {\n                        this.matrixClient.on(event, handler);\n                    }\n                },\n\n                off(event, handler) {\n                    if (this.matrixClient) {\n                        this.matrixClient.off(event, handler);\n                    }\n                },\n\n                uploadFile(file, opts) {\n                    return this.matrixClient.uploadContent(file, opts);\n                },\n\n                getPublicRoomInfo(roomId) {\n                    if (!roomId) {\n                        return Promise.reject(\"Invalid parameters\");\n                    }\n\n                    const parts = roomId.split(':');\n                    if (parts.length != 2) {\n                        return Promise.reject(\"Unknown room server\");\n                    }\n\n                    const server = parts[1];\n                    const tempMatrixClient = sdk.createClient(\"https://\" + server);\n\n                    const findOrGetMore = function _findOrGetMore(response) {\n                        for (var room of response.chunk) {\n                            if ((roomId.startsWith(\"#\") && room.canonical_alias == roomId) || (roomId.startsWith(\"!\") && room.room_id == roomId)) {\n                                room.avatar = tempMatrixClient.mxcUrlToHttp(room.avatar_url, 80, 80, 'scale', true);\n                                return Promise.resolve(room);\n                            }\n                        }\n                        if (response.next_batch) {\n                            return tempMatrixClient._http.request(undefined, \"GET\", \"/publicRooms\", { limit: 1000, since: response.next_batch })\n                                //return tempMatrixClient.publicRooms({limit:1,next_batch:response.next_batch})\n                                .then(response => {\n                                    return _findOrGetMore(response);\n                                })\n                                .catch(err => {\n                                    return Promise.reject(\"Failed to find room: \" + err);\n                                });\n                        } else {\n                            return Promise.reject(\"No more data\");\n                        }\n                    };\n\n                    return tempMatrixClient._http.request(undefined, \"GET\", \"/publicRooms\", { limit: 1000 })\n                        //return tempMatrixClient.publicRooms({limit:1})\n                        .then(response => {\n                            return findOrGetMore(response);\n                        })\n                        .catch(err => {\n                            return Promise.reject(\"Failed to find room: \" + err);\n                        });\n                },\n\n                updateNotificationCount() {\n                    var count = 0;\n                    this.rooms.forEach(room => {\n                        count += room.getUnreadNotificationCount('total') || 0;\n                    });\n                    this.notificationCount = count;\n                }\n\n            }\n        })\n\n        Vue.prototype.$matrix = matrixService;\n    }\n}\n","module.exports = __webpack_public_path__ + \"img/av_baboon.748ddcc3.png\";","module.exports = __webpack_public_path__ + \"img/av_gorilla.a95f8263.png\";","module.exports = __webpack_public_path__ + \"img/av_hippo.26533229.png\";","module.exports = __webpack_public_path__ + \"img/av_bear.f1aa8118.png\";","module.exports = __webpack_public_path__ + \"img/av_lion.4b529348.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomNameChanged.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_lionfish.a6538492.png\";","import axios from 'axios';\nimport * as ContentHelpers from \"matrix-js-sdk/lib/content-helpers\";\nvar dayjs = require('dayjs');\nvar sha256 = require('js-sha256').sha256;\nvar aesjs = require('aes-js');\nvar base64Url = require('json-web-key/lib/base64url');\n\n// Install extended localized format\nvar localizedFormat = require('dayjs/plugin/localizedFormat')\ndayjs.extend(localizedFormat)\nvar duration = require('dayjs/plugin/duration')\ndayjs.extend(duration);\n\nclass Util {\n    getAttachment(matrixClient, event) {\n        return new Promise((resolve, reject) => {\n            const content = event.getContent();\n            if (content.url != null) {\n                // Unencrypted, just return!\n                resolve(matrixClient.mxcUrlToHttp(content.url));\n                return;\n            }\n            var url = null;\n            var file = null;\n            if (content.file && content.file.url) {\n                file = content.file;\n                url = matrixClient.mxcUrlToHttp(file.url);\n            }\n\n            if (url == null) {\n                reject(\"No url found!\");\n            }\n\n            axios.get(url, { responseType: 'arraybuffer' })\n                .then(response => {\n                    return this.decryptIfNeeded(file, response);\n                })\n                .then(bytes => {\n                    resolve(URL.createObjectURL(new Blob([bytes.buffer], { type: file.mimetype })));\n                })\n                .catch(err => {\n                    console.log(\"Download error: \", err);\n                    reject(err);\n                });\n        });\n    }\n\n    getThumbnail(matrixClient, event, ignoredw, ignoredh) {\n        return new Promise((resolve, reject) => {\n            const content = event.getContent();\n            if (content.url != null) {\n                // Unencrypted, just return!\n                resolve(matrixClient.mxcUrlToHttp(content.url));\n                return;\n            }\n            var url = null;\n            var file = null;\n            if (\n                content &&\n                content.info &&\n                content.info.thumbnail_file &&\n                content.info.thumbnail_file.url\n            ) {\n                file = content.info.thumbnail_file;\n                // var width = w;\n                // var height = h;\n                // if (content.info.w < w || content.info.h < h) {\n                //     width = content.info.w;\n                //     height = content.info.h;\n                // }\n                // url = matrixClient.mxcUrlToHttp(\n                //     file.url,\n                //     width, height,\n                //     \"scale\",\n                //     true\n                // );\n                url = matrixClient.mxcUrlToHttp(file.url);\n            } else if (content.file && content.file.url) {\n                // No thumb, use real url\n                file = content.file;\n                url = matrixClient.mxcUrlToHttp(file.url);\n            }\n\n            if (url == null) {\n                reject(\"No url found!\");\n                return;\n            }\n            axios.get(url, { responseType: 'arraybuffer' })\n                .then(response => {\n                    return this.decryptIfNeeded(file, response);\n                })\n                .then(bytes => {\n                    resolve(URL.createObjectURL(new Blob([bytes.buffer], { type: file.mimetype })));\n                })\n                .catch(err => {\n                    console.log(\"Download error: \", err);\n                    reject(err);\n                });\n        });\n    }\n\n    decryptIfNeeded(file, response) {\n        return new Promise((resolve, reject) => {\n            var key = base64Url.decode(file.key.k);\n            var iv = base64Url.decode(file.iv);\n            var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(iv));\n\n            const data = new Uint8Array(response.data);\n\n            // Calculate sha256 and compare hashes\n            var hash = new Uint8Array(sha256.create().update(data).arrayBuffer());\n            const originalHash = base64Url.decode(file.hashes.sha256);\n            if (Buffer.compare(Buffer.from(hash), Buffer.from(originalHash.buffer)) != 0) {\n                reject(\"Hashes don't match!\");\n                return;\n            }\n\n            var decryptedBytes = aesCtr.decrypt(data);\n            resolve(decryptedBytes);\n        });\n    }\n\n    sendTextMessage(matrixClient, roomId, text, editedEvent, replyToEvent) {\n        var content = ContentHelpers.makeTextMessage(text);\n        if (editedEvent) {\n            content['m.relates_to'] = {\n                rel_type: 'm.replace',\n                event_id: editedEvent.getId()\n            }\n            content['m.new_content'] = {\n                body: content.body,\n                msgtype: content.msgtype\n            }\n        } else if (replyToEvent) {\n            content['m.relates_to'] = {\n                'm.in_reply_to': {\n                    event_id: replyToEvent.getId()\n                }\n            }\n\n            // Prefix the content with reply info (seems to be a legacy thing)\n            const prefix = replyToEvent.getContent().body.split('\\n').map((item, index) => {\n                return \"> \" + (index == 0 ? (\"<\" + replyToEvent.getSender() + \"> \") : \"\") + item;\n            }).join('\\n');\n            content.body = prefix + \"\\n\\n\" + content.body;\n        }\n        return this.sendMessage(matrixClient, roomId, \"m.room.message\", content);\n    }\n\n    sendQuickReaction(matrixClient, roomId, emoji, event) {\n        const content = {\n            'm.relates_to': {\n                key: emoji,\n                rel_type: 'm.annotation',\n                event_id: event.getId()\n            }\n        };\n        return this.sendMessage(matrixClient, roomId, \"m.reaction\", content);\n    }\n\n    sendMessage(matrixClient, roomId, eventType, content) {\n        return new Promise((resolve, reject) => {\n            matrixClient.sendEvent(roomId, eventType, content, undefined, undefined)\n                .then((result) => {\n                    console.log(\"Message sent: \", result);\n                    resolve(true);\n                })\n                .catch(err => {\n                    console.log(\"Image send error: \", err);\n                    if (err && err.name == \"UnknownDeviceError\") {\n                        console.log(\"Unknown devices. Mark as known before retrying.\");\n                        var setAsKnownPromises = [];\n                        for (var user of Object.keys(err.devices)) {\n                            const userDevices = err.devices[user];\n                            for (var deviceId of Object.keys(userDevices)) {\n                                const deviceInfo = userDevices[deviceId];\n                                if (!deviceInfo.known) {\n                                    setAsKnownPromises.push(\n                                        matrixClient.setDeviceKnown(\n                                            user,\n                                            deviceId,\n                                            true\n                                        )\n                                    );\n                                }\n                            }\n                        }\n                        Promise.all(setAsKnownPromises)\n                            .then(() => {\n                                // All devices now marked as \"known\", try to resend\n                                matrixClient.resendEvent(err.event, matrixClient.getRoom(err.event.getRoomId()))\n                                    .then((result) => {\n                                        console.log(\"Message sent: \", result);\n                                        resolve(true);\n                                    })\n                                    .catch((err) => {\n                                        // Still error, abort\n                                        reject(err.toLocaleString());\n                                    });\n                            });\n                    }\n                    else {\n                        reject(err.toLocaleString());\n                    }\n                });\n        });\n    }\n\n    sendImage(matrixClient, roomId, file, onUploadProgress) {\n        return new Promise((resolve, reject) => {\n            var reader = new FileReader();\n            reader.onload = (e) => {\n                const fileContents = e.target.result;\n                var data = new Uint8Array(fileContents);\n\n                const info = {\n                    mimetype: file.type,\n                    size: file.size\n                };\n\n                var description = file.name;\n                var msgtype = 'm.image';\n                if (file.type.startsWith(\"audio/\")) {\n                    msgtype = 'm.audio';\n                } else if (file.type.startsWith(\"video/\")) {\n                    msgtype = 'm.video';\n                } else if (file.type.startsWith(\"application/pdf\")) {\n                    msgtype = 'm.file';\n                }\n\n                const opts = {\n                    type: file.type,\n                    name: description,\n                    progressHandler: onUploadProgress,\n                    onlyContentUri: false\n                };\n\n                var messageContent = {\n                    body: description,\n                    info: info,\n                    msgtype: msgtype\n                }\n\n                // Set filename for files\n                if (msgtype == 'm.file') {\n                    messageContent.filename = file.name;\n                }\n\n                if (!matrixClient.isRoomEncrypted(roomId)) {\n                    // Not encrypted.\n                    matrixClient.uploadContent(data, opts)\n                        .then((response) => {\n                            messageContent.url = response.content_uri;\n                            return this.sendMessage(matrixClient, roomId, \"m.room.message\", messageContent)\n                        })\n                        .then(result => {\n                            resolve(result);\n                        })\n                        .catch(err => {\n                            reject(err);\n                        });\n                    return; // Don't fall through\n                }\n\n                const crypto = require('crypto');\n                let key = crypto.randomBytes(256 / 8);\n                let iv = Buffer.concat([crypto.randomBytes(8), Buffer.alloc(8)]); // Initialization vector.\n\n                // Encrypt\n                var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(iv));\n                var encryptedBytes = aesCtr.encrypt(data);\n                data = encryptedBytes;\n\n                // Calculate sha256\n                var hash = new Uint8Array(sha256.create().update(data).arrayBuffer());\n\n                const jwk = {\n                    kty: 'oct',\n                    key_opts: ['encrypt', 'decrypt'],\n                    alg: 'A256CTR',\n                    k: base64Url.encode(key),\n                    ext: true\n                };\n\n                const encryptedFile = {\n                    mimetype: file.type,\n                    key: jwk,\n                    iv: Buffer.from(iv).toString('base64').replace(/=/g, ''),\n                    hashes: { sha256: Buffer.from(hash).toString('base64').replace(/=/g, '') },\n                    v: 'v2'\n                };\n\n                messageContent.file = encryptedFile;\n\n                matrixClient.uploadContent(data, opts)\n                    .then((response) => {\n                        encryptedFile.url = response.content_uri;\n                        return this.sendMessage(matrixClient, roomId, \"m.room.message\", messageContent)\n                    })\n                    .then(result => {\n                        resolve(result);\n                    })\n                    .catch(err => {\n                        reject(err);\n                    });\n            }\n            reader.onerror = (err) => {\n                reject(err);\n            }\n            reader.readAsArrayBuffer(file);\n        });\n    }\n\n    /** Generate a random user name */\n    randomUser() {\n        return this.randomString(\n            12,\n            \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"\n        );\n    }\n\n    /**\n     * Generate random 12 char password\n     */\n    randomPass() {\n        return this.randomString(\n            12,\n            \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#_-*+\"\n        );\n    }\n\n    // From here: https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript\n    randomString(length, characters) {\n        var result = \"\";\n        var charactersLength = characters.length;\n        for (var i = 0; i < length; i++) {\n            result += characters.charAt(\n                Math.floor(Math.random() * charactersLength)\n            );\n        }\n        return result;\n    }\n\n    sanitizeRoomId(roomId) {\n        if (roomId && roomId.match(/^(!|#).+$/)) {\n            return roomId;\n        }\n        return null;\n    }\n\n    getFirstVisibleElement(parentNode) {\n        const visible = this.findVisibleElements(parentNode);\n        if (visible && visible.length > 0) {\n            return visible[0];\n        }\n        return null;\n    }\n\n    getLastVisibleElement(parentNode) {\n        const visible = this.findVisibleElements(parentNode);\n        if (visible && visible.length > 0) {\n            return visible[visible.length - 1];\n        }\n        return null;\n    }\n\n    findVisibleElements(parentNode) {\n        const middle = this.findOneVisibleElement(parentNode);\n        if (middle) {\n            var nodes = [parentNode.children[middle]];\n            var i = middle - 1;\n                while (i >= 0 && this.isChildVisible(parentNode, parentNode.children[i])) {\n                    nodes.splice(0,0,parentNode.children[i]);\n                    i-=1;\n                }\n            i = middle + 1;\n            while (i < parentNode.children.length && this.isChildVisible(parentNode, parentNode.children[i])) {\n                nodes.push(parentNode.children[i]);\n                i+=1;\n            }\n            return nodes;\n        }\n        return null; // No visible found\n    }\n\n    isChildVisible(parentNode, childNode) {\n        const rect1 = parentNode.getBoundingClientRect();\n        const rect2 = childNode.getBoundingClientRect();\n        var overlap = !(rect1.right < rect2.left || \n            rect1.left > rect2.right || \n            rect1.bottom < rect2.top || \n            rect1.top > rect2.bottom)\n        return overlap;\n    }\n\n    findOneVisibleElement(parentNode) {\n        let start = 0;\n        let end = parentNode.children.length - 1;\n        let top = parentNode.scrollTop;\n        while (start <= end) {\n            let middle = Math.floor((start + end) / 2);\n            let childNode = parentNode.children[middle];\n            if (this.isChildVisible(parentNode, childNode)) {\n                // found the key\n                return middle;\n            } else if (childNode.offsetTop < top) {\n                // continue searching to the right\n                start = middle + 1;\n            } else {\n                // search searching to the left\n                end = middle - 1;\n            }\n        }\n        // key wasn't found\n        return null;\n    }\n\n    _importAll(r) {\n        var images = [];\n        r.keys().forEach(res => {\n            console.log(\"Avatar\", res);\n            // // Remove\"./\"\n            var name = res.split(\"_\")[1];\n            name = name.slice(0, name.indexOf(\".\"));\n            name = name.charAt(0).toUpperCase() + name.slice(1);\n            const image = r(res);\n            images.push({ id: res, image: image, name: \"Guest \" + name });\n        });\n        return images;\n    }\n\n    getDefaultAvatars() {\n        return this._importAll(require.context('../assets/avatars/', true, /\\.(jpeg|jpg|png)$/));\n    }\n\n    setAvatar(matrixClient, file, onUploadProgress) {\n        return new Promise((resolve, reject) => {\n            axios.get(file, { responseType: 'arraybuffer' })\n                .then(response => {\n                    const opts = {\n                        type: response.headers['content-type'].split(';')[0],\n                        name: \"Avatar\",\n                        progressHandler: onUploadProgress,\n                        onlyContentUri: false\n                    };\n                    matrixClient.uploadContent(response.data, opts)\n                        .then((response) => {\n                            const uri = response.content_uri;\n                            return matrixClient.setAvatarUrl(uri);\n                        })\n                        .then(result => {\n                            resolve(result);\n                        })\n                        .catch(err => {\n                            reject(err);\n                        });\n                })\n                .catch(err => {\n                    reject(err);\n                });\n\n        })\n    }\n\n    /**\n     * Return number of whole days between the timestamps, at end of that day.\n     * @param {*} ts1 \n     * @param {*} ts2 \n     */\n    dayDiff(ts1, ts2) {\n        var t1 = dayjs(ts1).endOf('day');\n        var t2 = dayjs(ts2).endOf('day');\n        return t2.diff(t1, 'day');\n    }\n\n    formatDay(timestamp) {\n        var then = dayjs(timestamp).endOf('day');\n        var now = dayjs().endOf('day');\n        const dayDiff = now.diff(then, 'day');\n        if (dayDiff < 1) {\n            return \"Today\";\n        } else if (dayDiff < 2) {\n            return \"Yesterday\";\n        } else if (dayDiff < 7) {\n            return \"\" + dayDiff + \" days ago\";\n        } else {\n            return then.format('L');\n        }\n    }\n\n    formatRecordDuration(ms) {\n        return dayjs.duration(ms).format(\"HH:mm:ss\");\n    }\n\n    formatRecordStartTime(timestamp) {\n        var then = dayjs(timestamp);\n        return then.format('lll');\n    }\n}\nexport default new Util();\n\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeaveRoomDialog.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_lizard.542e0b1b.png\";","module.exports = __webpack_public_path__ + \"img/av_crane.5ebd657e.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.room),expression:\"room\"}],staticClass:\"ma-0 pa-0\",attrs:{\"width\":\"80%\"},model:{value:(_vm.showDialog),callback:function ($$v) {_vm.showDialog=$$v},expression:\"showDialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"dialog-title\"},[_vm._v(\"Are you sure you want to leave?\")]),_c('v-card-text',[_c('div',{staticClass:\"dialog-text\"},[_vm._v(\"You may not be able to rejoin.\")])]),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){_vm.onLeaveRoom();\n          _vm.showDialog = false;}}},[_vm._v(\"Next\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"showDialog\" v-show=\"room\" class=\"ma-0 pa-0\" width=\"80%\">\n    <v-card>\n      <v-card-title class=\"dialog-title\">Are you sure you want to leave?</v-card-title>\n      <v-card-text>\n        <div class=\"dialog-text\">You may not be able to rejoin.</div>\n      </v-card-text>\n      <v-divider></v-divider>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn text @click=\"showDialog = false\">Cancel</v-btn>\n        <v-btn\n          color=\"primary\"\n          text\n          @click=\"\n            onLeaveRoom();\n            showDialog = false;\n          \"\n          >Next</v-btn\n        >\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nexport default {\n  name: \"LeaveRoomDialog\",\n  props: {\n    show: {\n      type: Boolean,\n      default: function () {\n        return false;\n      },\n    },\n    room: {\n        type: Object,\n        default: function() {\n            return null;\n        }\n    }\n  },\n  data() {\n    return {\n      showDialog: false,\n    };\n  },\n  watch: {\n    show: {\n      handler(newVal, ignoredOldVal) {\n        this.showDialog = newVal;\n      },\n    },\n    showDialog() {\n        if (!this.showDialog) {\n            this.$emit('close');\n        }\n    }\n  },\n\n  methods: {\n    onLeaveRoom() {\n      //this.$matrix.matrixClient.forget(this.room.roomId, true, undefined)\n      const roomId = this.room.roomId;\n      this.$matrix.leaveRoom(roomId)\n      .then(() => {\n        console.log(\"Left room\");\n        this.$navigation.push({name:'Home', params:{roomId:null}}, -1);\n      })\n      .catch(err => {\n        console.log(\"Error leaving\", err);\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/css/chat.scss\";\n</style> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeaveRoomDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LeaveRoomDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LeaveRoomDialog.vue?vue&type=template&id=73df5439&\"\nimport script from \"./LeaveRoomDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./LeaveRoomDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LeaveRoomDialog.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VDivider,VSpacer})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceRecorder.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_penguin.80792892.png\";","module.exports = __webpack_public_path__ + \"img/av_flamingo.6c04a0d8.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageOutgoingText.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageIncomingImage.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_whaleshark.8efe40d9.png\";","module.exports = __webpack_public_path__ + \"img/av_butterfly.873f2a9e.png\";","module.exports = __webpack_public_path__ + \"img/av_cockatoo.ca3d9f21.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomList.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomAvatarChanged.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QuickReactions.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/av_rooster.14950a79.png\";","module.exports = __webpack_public_path__ + \"img/av_cardinal.1ca8cd7d.png\";","module.exports = __webpack_public_path__ + \"img/av_bee.33719139.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContactLeave.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}